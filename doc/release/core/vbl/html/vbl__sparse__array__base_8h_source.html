<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>core/vbl/vbl_sparse_array_base.h Source File</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">core/vbl/vbl_sparse_array_base.h</div>  </div>
</div>
<div class="contents">
<a href="vbl__sparse__array__base_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// This is core/vbl/vbl_sparse_array_base.h</span>
<a name="l00002"></a>00002 <span class="preprocessor">#ifndef vbl_sparse_array_base_h_</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#define vbl_sparse_array_base_h_</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="preprocessor">#ifdef VCL_NEEDS_PRAGMA_INTERFACE</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="preprocessor">#pragma interface</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span><span class="comment">//:</span>
<a name="l00008"></a>00008 <span class="comment">// \file</span>
<a name="l00009"></a>00009 <span class="comment">// \brief base class for sparse arrays.</span>
<a name="l00010"></a>00010 <span class="comment">// \author Ian Scott, Manchester ISBE</span>
<a name="l00011"></a>00011 <span class="comment">// \date   10 April 2001</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;vcl_functional.h&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;vcl_map.h&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;vcl_cstddef.h&gt;</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="comment">//: A fully featured sparse array which devolves indexing to its templated type</span>
<a name="l00018"></a>00018 <span class="comment">// If you just want an ordinary sparse array use vbl_sparse_array_1d,</span>
<a name="l00019"></a>00019 <span class="comment">// vbl_sparse_array_2d, or vbl_sparse_array_3d.</span>
<a name="l00020"></a>00020 <span class="comment">//</span>
<a name="l00021"></a>00021 <span class="comment">// Design Decision: Advanced Users only.</span>
<a name="l00022"></a>00022 <span class="comment">//</span>
<a name="l00023"></a>00023 <span class="comment">// The sparse array design has as much of the code as possible in this</span>
<a name="l00024"></a>00024 <span class="comment">// templated base class. This allows us to code harden this class</span>
<a name="l00025"></a>00025 <span class="comment">// while leaving the three derived classes in vbl, simple, easy to</span>
<a name="l00026"></a>00026 <span class="comment">// understand and use.</span>
<a name="l00027"></a>00027 <span class="comment">// I rejected to use templating over the number of dimensions because</span>
<a name="l00028"></a>00028 <span class="comment">// this can lead into recursive templating which is in theory very nice,</span>
<a name="l00029"></a>00029 <span class="comment">// but in practice very horrible. It also makes the interface rather</span>
<a name="l00030"></a>00030 <span class="comment">// unintuitive.</span>
<a name="l00031"></a>00031 <span class="comment">// If you are worried about the speed aspects of using a pair of integers</span>
<a name="l00032"></a>00032 <span class="comment">// instead of a single encoded integer, then you can create</span>
<a name="l00033"></a>00033 <span class="comment">// an encoder class as the index type, and use it directly, or hide the</span>
<a name="l00034"></a>00034 <span class="comment">// details by writing a specialising derivative of vbl_sparse_array_base.</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> Index&gt;
<a name="l00037"></a><a class="code" href="classvbl__sparse__array__base.html">00037</a> <span class="keyword">class </span><a class="code" href="classvbl__sparse__array__base.html" title="A fully featured sparse array which devolves indexing to its templated type.">vbl_sparse_array_base</a>
<a name="l00038"></a>00038 {
<a name="l00039"></a>00039  <span class="keyword">protected</span>:
<a name="l00040"></a>00040   <span class="comment">//: The type of the storage</span>
<a name="l00041"></a><a class="code" href="classvbl__sparse__array__base.html#a2797ae64e319e2f7cd9ad52ffbffa027">00041</a>   <span class="keyword">typedef</span> vcl_map&lt;Index, T, vcl_less&lt;Index&gt; &gt; <a class="code" href="classvbl__sparse__array__base.html#a2797ae64e319e2f7cd9ad52ffbffa027" title="The type of the storage.">Map</a>;
<a name="l00042"></a>00042   <span class="comment">//: This stores a compact list of the values.</span>
<a name="l00043"></a><a class="code" href="classvbl__sparse__array__base.html#a0f5edaca5821d4cad5ccbf0f7087c17e">00043</a>   <a class="code" href="classvbl__sparse__array__base.html#a2797ae64e319e2f7cd9ad52ffbffa027" title="The type of the storage.">Map</a> <a class="code" href="classvbl__sparse__array__base.html#a0f5edaca5821d4cad5ccbf0f7087c17e" title="This stores a compact list of the values.">storage_</a>;
<a name="l00044"></a>00044 
<a name="l00045"></a>00045  <span class="keyword">public</span>:
<a name="l00046"></a>00046   
<a name="l00047"></a><a class="code" href="classvbl__sparse__array__base.html#a0401e72e714146d1aba1e834715ae845">00047</a>   <span class="keyword">typedef</span> vcl_size_t <a class="code" href="classvbl__sparse__array__base.html#a0401e72e714146d1aba1e834715ae845">size_type</a>;
<a name="l00048"></a>00048 
<a name="l00049"></a>00049   <span class="comment">//: Return contents at (i)</span>
<a name="l00050"></a><a class="code" href="classvbl__sparse__array__base.html#a1ba281d715540b35d4193c7f52daaacf">00050</a>   T      &amp; <a class="code" href="classvbl__sparse__array__base.html#a1ba281d715540b35d4193c7f52daaacf" title="Return contents at (i).">operator () </a>(Index i) { <span class="keywordflow">return</span> <a class="code" href="classvbl__sparse__array__base.html#a0f5edaca5821d4cad5ccbf0f7087c17e" title="This stores a compact list of the values.">storage_</a>[i]; }
<a name="l00051"></a>00051 
<a name="l00052"></a>00052   <span class="comment">//: Return contents at (i). Asserts that (i) is non-empty.</span>
<a name="l00053"></a>00053   T <span class="keyword">const</span>&amp; <a class="code" href="classvbl__sparse__array__base.html#a1ba281d715540b35d4193c7f52daaacf" title="Return contents at (i).">operator () </a>(Index i) <span class="keyword">const</span>;
<a name="l00054"></a>00054 
<a name="l00055"></a>00055   <span class="comment">//: Erase element at location (i). Assertion failure if not yet filled.</span>
<a name="l00056"></a>00056   <span class="keywordtype">void</span> <a class="code" href="classvbl__sparse__array__base.html#a0e76d0c1dce1a82eb39d53eb87cbbf9f" title="Erase element at location (i). Assertion failure if not yet filled.">erase</a>(Index );
<a name="l00057"></a>00057 
<a name="l00058"></a>00058   <span class="comment">//: Return true if location (i) has been filled.</span>
<a name="l00059"></a>00059   <span class="keywordtype">bool</span> <a class="code" href="classvbl__sparse__array__base.html#affc7da70f0aa84ab191af97b1ca3f19f" title="Return true if location (i) has been filled.">fullp</a>(Index ) <span class="keyword">const</span>;
<a name="l00060"></a>00060 
<a name="l00061"></a>00061   <span class="comment">//: Put a value into location (i).</span>
<a name="l00062"></a>00062   <span class="keywordtype">bool</span> <a class="code" href="classvbl__sparse__array__base.html#a8a80274a98db355f3554a40cda724f9d" title="Put a value into location (i).">put</a>(Index , <span class="keyword">const</span> T&amp; );
<a name="l00063"></a>00063 
<a name="l00064"></a>00064   <span class="comment">//: Return the address of location (i).  0 if not yet filled.</span>
<a name="l00065"></a>00065   T* <a class="code" href="classvbl__sparse__array__base.html#a6c28cd3f9393dd99a0823eaba1892500" title="Return the address of location (i). 0 if not yet filled.">get_addr</a>(Index);
<a name="l00066"></a>00066 
<a name="l00067"></a>00067   <span class="comment">//: Empty the sparse matrix.</span>
<a name="l00068"></a>00068   <span class="keywordtype">void</span> <a class="code" href="classvbl__sparse__array__base.html#a4c212443aa4bff1d0f0b12741b83d0f7" title="Empty the sparse matrix.">clear</a>();
<a name="l00069"></a>00069 
<a name="l00070"></a>00070   <span class="comment">//: The type of iterators into the efficient storage</span>
<a name="l00071"></a><a class="code" href="classvbl__sparse__array__base.html#a59035b09fd1578f827701bdc291f65bc">00071</a>   <span class="keyword">typedef</span> <span class="keyword">typename</span> Map::const_iterator <a class="code" href="classvbl__sparse__array__base.html#a59035b09fd1578f827701bdc291f65bc" title="The type of iterators into the efficient storage.">const_iterator</a>;
<a name="l00072"></a>00072 
<a name="l00073"></a>00073   <span class="comment">//: Return number of locations that have been assigned a value using &quot;put&quot;.</span>
<a name="l00074"></a><a class="code" href="classvbl__sparse__array__base.html#a47a8c218c29d9180dcbb184803229882">00074</a>   <a class="code" href="classvbl__sparse__array__base.html#a0401e72e714146d1aba1e834715ae845">size_type</a> <a class="code" href="classvbl__sparse__array__base.html#a47a8c218c29d9180dcbb184803229882" title="Return number of locations that have been assigned a value using &quot;put&quot;.">count_nonempty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classvbl__sparse__array__base.html#a0f5edaca5821d4cad5ccbf0f7087c17e" title="This stores a compact list of the values.">storage_</a>.size(); }
<a name="l00075"></a>00075 
<a name="l00076"></a>00076   <span class="comment">//: The type of objects used to index the sparse array</span>
<a name="l00077"></a><a class="code" href="classvbl__sparse__array__base.html#a035280546e43031374674e400ad88edf">00077</a>   <span class="keyword">typedef</span> Index <a class="code" href="classvbl__sparse__array__base.html#a035280546e43031374674e400ad88edf" title="The type of objects used to index the sparse array.">Index_type</a>;
<a name="l00078"></a>00078 
<a name="l00079"></a>00079   <span class="comment">//: The type of values stored by the sparse array</span>
<a name="l00080"></a><a class="code" href="classvbl__sparse__array__base.html#a6e211d516945d0d00ad5feeb77fac392">00080</a>   <span class="keyword">typedef</span> T <a class="code" href="classvbl__sparse__array__base.html#a6e211d516945d0d00ad5feeb77fac392" title="The type of values stored by the sparse array.">T_type</a>;
<a name="l00081"></a>00081 
<a name="l00082"></a>00082   <span class="comment">//: The type of values of the controlled sequence</span>
<a name="l00083"></a>00083   <span class="comment">// The value_type is a vcl_pair&lt;Index_type, typename T_type&gt;</span>
<a name="l00084"></a><a class="code" href="classvbl__sparse__array__base.html#ae92f52891c1e5613eb4330fc660c636b">00084</a>   <span class="keyword">typedef</span> <span class="keyword">typename</span> Map::value_type <a class="code" href="classvbl__sparse__array__base.html#ae92f52891c1e5613eb4330fc660c636b" title="The type of values of the controlled sequence.">sequence_value_type</a>;
<a name="l00085"></a>00085 
<a name="l00086"></a>00086   <span class="comment">//: A bidirectional iterator pointing at the first non-empty element</span>
<a name="l00087"></a>00087   <span class="comment">// If the array is empty it points just beyond the end.</span>
<a name="l00088"></a><a class="code" href="classvbl__sparse__array__base.html#a2b24747bb4111cfd0296a07454619a58">00088</a>   <a class="code" href="classvbl__sparse__array__base.html#a59035b09fd1578f827701bdc291f65bc" title="The type of iterators into the efficient storage.">const_iterator</a> <a class="code" href="classvbl__sparse__array__base.html#a2b24747bb4111cfd0296a07454619a58" title="A bidirectional iterator pointing at the first non-empty element.">begin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classvbl__sparse__array__base.html#a0f5edaca5821d4cad5ccbf0f7087c17e" title="This stores a compact list of the values.">storage_</a>.begin(); }
<a name="l00089"></a>00089 
<a name="l00090"></a>00090   <span class="comment">//: A bidirectional iterator pointing just beyond last non-empty element.</span>
<a name="l00091"></a><a class="code" href="classvbl__sparse__array__base.html#a7d20bc93cff5ff53ae769e0aafe92b35">00091</a>   <a class="code" href="classvbl__sparse__array__base.html#a59035b09fd1578f827701bdc291f65bc" title="The type of iterators into the efficient storage.">const_iterator</a> <a class="code" href="classvbl__sparse__array__base.html#a7d20bc93cff5ff53ae769e0aafe92b35" title="A bidirectional iterator pointing just beyond last non-empty element.">end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classvbl__sparse__array__base.html#a0f5edaca5821d4cad5ccbf0f7087c17e" title="This stores a compact list of the values.">storage_</a>.end(); }
<a name="l00092"></a>00092 };
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="preprocessor">#endif // vbl_sparse_array_base_h_</span>
</pre></div></div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 1 2013 17:30:51 for core/vbl by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
