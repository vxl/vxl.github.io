<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>vidl : Video Stream Library</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">vidl : Video Stream Library </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>A stream-based rewrite of the old vidl1 library</p>
<h2><a class="anchor" id="introduction"></a>
Introduction</h2>
<p>The purpose of this library is to provide a unified interface reading and writing video in VXL. Unlike the previous vidl library, this library treats video as a data stream and builds directly on the vil image library. The two main classes are <a class="el" href="classvidl__istream.html" title="A base class for input video streams.">vidl_istream</a> for input streams and <a class="el" href="classvidl__ostream.html" title="A base class for output video streams.">vidl_ostream</a> for output streams.</p>
<p>This design has the following advantages over the old vidl library that treated videos as container objects.</p>
<ul>
<li>Better support for large video files</li>
<li>Better support for encoding options</li>
<li>Support for live video streams</li>
<li>Better integration with vil</li>
</ul>
<h2><a class="anchor" id="streams"></a>
Streams vs. Codecs</h2>
<p>Various stream subclasses are used to interface with different types of video streams. Note that these are not called codecs. The codec in the old vidl library was somewhat of a misnomer. Each <a class="el" href="classvidl__istream.html" title="A base class for input video streams.">vidl_istream</a> and <a class="el" href="classvidl__ostream.html" title="A base class for output video streams.">vidl_ostream</a> subclass is a wrapper for another video API that may or may not provide encoding, and may support many different codecs. For example, <a class="el" href="classvidl__ffmpeg__istream.html" title="A video input stream using FFMPEG to decoded files.">vidl_ffmpeg_istream</a> provides a input using the FFMPEG library. The FFMPEG library can open a large variety of video file formats (avi, mpeg, etc.) and decode using an even larger variety of codecs (MPEG2, MPEG4, MJPEG, H.264, Cinepak, etc.).</p>
<p>The video stream design also allows for streams that receive images from live video feeds. This could be from a camera, network video feed, or other source. Thus, video capture and video transcoding are both accomplished by directing an input stream into and output stream.</p>
<h2><a class="anchor" id="types"></a>
Stream Types</h2>
<p>The following is a list of streams that are currently implemented</p>
<ul>
<li><a class="el" href="classvidl__image__list__istream.html" title="A video input stream from a list of images on disk.">vidl_image_list_istream</a> : treats an ordered list of vil_image_resource_sptr as a video stream. Also supports reading a list of images from disk given a list of filenames or a file glob.</li>
<li><a class="el" href="classvidl__image__list__ostream.html" title="A video output stream to a list of images.">vidl_image_list_ostream</a> : writes a video to disk as a sequence of numbered image files using any image file format supported by vil.</li>
<li><a class="el" href="classvidl__ffmpeg__istream.html" title="A video input stream using FFMPEG to decoded files.">vidl_ffmpeg_istream</a> : uses the <a href="http://ffmpeg.sourceforge.net/">FFMPEG</a> library to decode many common video file formats.</li>
<li><a class="el" href="classvidl__ffmpeg__ostream.html" title="A video output stream to an encoded file using FFMPEG.">vidl_ffmpeg_ostream</a> : uses the <a href="http://ffmpeg.sourceforge.net/">FFMPEG</a> library to encode to many common video file formats with many encoding options for video quality and compression.</li>
<li><a class="el" href="classvidl__v4l__istream.html">vidl_v4l_istream</a> - use a video for Linux input stream</li>
<li><a class="el" href="classvidl__dshow__live__istream.html" title="DirectShow live video input stream support.">vidl_dshow_live_istream</a> - use the DirectShow API to stream video directly from camera and frame-grabber devices in Windows using native Windows codecs.</li>
<li><a class="el" href="classvidl__dshow__file__istream.html" title="DirectShow file input stream object.">vidl_dshow_file_istream</a> - use the DirectShow API to encode video files in Windows using native Windows codecs</li>
<li><a class="el" href="classvidl__dc1394__istream.html" title="A video input stream using libdc1394.">vidl_dc1394_istream</a> - use libdc1394 to stream video directly from IEEE 1394 (firewire) based cameras (using Linux/BSD)</li>
</ul>
<p>The following streams are currently under development</p>
<ul>
<li>vidl_v4l_ostream - use a video for Linux output stream</li>
</ul>
<p>The following streams sound useful but need someone to work on them</p>
<ul>
<li>vidl_cmu1394_istream - use the CMU 1394 driver to stream video directly from IEEE 1394 (firewire) based cameras (using Windows)</li>
<li>vidl_dv1394_istream - use libdv1394 to stream video from DV camcorders over a 1394 DV connection (using Linux/BSD)</li>
<li>vidl_dv1394_ostream - use libdv1394 to stream video over a 1394 DV connection to some other video device (using Linux/BSD)</li>
</ul>
<h2><a class="anchor" id="frames"></a>
Video Frames</h2>
<p>The vidl_frame_sptr is data structure used to transport video frame data from a <a class="el" href="classvidl__istream.html" title="A base class for input video streams.">vidl_istream</a> to a <a class="el" href="classvidl__ostream.html" title="A base class for output video streams.">vidl_ostream</a>. The <a class="el" href="classvidl__frame.html" title="A ref counted video frame.">vidl_frame</a> contains a pointer to the frame buffer, the image resolution, the pixel format, and may eventually contain a time stamp. A <a class="el" href="classvidl__frame.html" title="A ref counted video frame.">vidl_frame</a> is more restrictive than a <a class="elRef" doxygen="core_vil.tag:../../../core/vil/html/" href="../../../core/vil/html/classvil__image__view.html">vil_image_view</a> since it requires contiguous memory and is limited in pixel data types. However, it also handles many pixels formats not supported by vil such as those with subsampled chrominance (i.e. YUV 4:2:2).</p>
<p>In some cases the <a class="el" href="classvidl__frame.html" title="A ref counted video frame.">vidl_frame</a> data can be wrapped by a <a class="elRef" doxygen="core_vil.tag:../../../core/vil/html/" href="../../../core/vil/html/classvil__image__view.html">vil_image_view</a>, but usually this is not a good idea. The <a class="el" href="classvidl__frame.html" title="A ref counted video frame.">vidl_frame</a> should considered be volatile data structure. The image buffer is only guaranteed to be valid until the next call of <code>vidl_ostream::advance()</code>. The ostream will keep a pointer to the released frame and then invalidate it before reusing memory. Use the functions in <a class="el" href="vidl__convert_8h.html" title="Convert frames to vil_image_views.">vidl_convert.h</a> to obtain a non-volatile <a class="elRef" doxygen="core_vil.tag:../../../core/vil/html/" href="../../../core/vil/html/classvil__image__view.html">vil_image_view</a>.</p>
<h2><a class="anchor" id="pix_fmt"></a>
Pixel Formats and Conversions</h2>
<p>The supported pixel formats are enumerated in vidl_pixel_format. A set of template specializations is used to define a set of traits for each format. A new pixel format may be introduced by simply adding an entry in the table in <a class="el" href="vidl__pixel__format_8h.html" title="Supported pixel formats for video frames.">vidl_pixel_format.h</a>. The traits of a pixel format are used in the generation of conversion routines with templates.</p>
<h2><a class="anchor" id="todo"></a>
Todo List</h2>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Settle on the stream API. Should the redundant read_frame() be removed? Can we handle all asynchronous streams with the synchronous API and an asynchronous buffering mechanism behind the scenes? The idea being that we want a simple API.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>Add some notion of timestamps to the <a class="el" href="classvidl__frame.html" title="A ref counted video frame.">vidl_frame</a>. It seems like it would be useful to know when each frame was captured (maybe relative to the first frame), especially if you are allowing for dropped frames or capturing non-uniformly in time.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>Improve conversion routines to and from vil_image_views.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>Add support for more parameters in the 1394 camera standard.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>Write a VXL book chapter for vidl (in progress). This is required to promote vidl to core and ultimately replace vidl (which has a very limited book chapter). Also, it would be good to have a user's guide other than the Doxygen generated pages.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd>Decide on a standard (maybe XML?) for stream parameter files, and add code to read and write these files. This is related to the factory creation stuff. Should we push to put modern factory creation code in vbl?</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd>Update vidl/examples/vidl_player to include all implemented streams. We'd like to have a single GUI demo application that can feed any istream to any ostream (provided they have been compiled into vidl).</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd>Update comments within the code. This includes the "advance but
 don't acquire" remark. This was intended for the case of file parsing where one can seek to another frame without decoding it, but is incorrect for live streams. Advanced Copy &amp; paste techniques have spread the comment around ;-).</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd>A DirectShow ostream should be added.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000010">Todo:</a></b></dt><dd>We'd like to create a DirectShow filter that replaces the ISampleGrabber currently used in the vidl_dshow_istream family. This would remove the limitations imposed by the use of the ISampleGrabber and potentially could consolidate the file/live_istreams into a single vidl_dshow_istream.</dd></dl>
</div></div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 1 2013 17:33:01 for core/vidl by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
