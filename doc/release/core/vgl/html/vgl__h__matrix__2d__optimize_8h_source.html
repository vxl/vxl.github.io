<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>core/vgl/algo/vgl_h_matrix_2d_optimize.h Source File</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">core/vgl/algo/vgl_h_matrix_2d_optimize.h</div>  </div>
</div>
<div class="contents">
<a href="vgl__h__matrix__2d__optimize_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// This is core/vgl/algo/vgl_h_matrix_2d_optimize.h</span>
<a name="l00002"></a>00002 <span class="preprocessor">#ifndef vgl_h_matrix_2d_optimize_h_</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#define vgl_h_matrix_2d_optimize_h_</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="comment">//:</span>
<a name="l00005"></a>00005 <span class="comment">// \file</span>
<a name="l00006"></a>00006 <span class="comment">// \author J.L. Mundy Jan. 5, 2005</span>
<a name="l00007"></a>00007 <span class="comment">// \brief Refine an initial 2d homography by minimizing projection error</span>
<a name="l00008"></a>00008 <span class="comment">//</span>
<a name="l00009"></a>00009 <span class="comment">// Abstract interface for classes that optimize plane-to-plane</span>
<a name="l00010"></a>00010 <span class="comment">// projectivities from point and line correspondences.</span>
<a name="l00011"></a>00011 <span class="comment">//</span>
<a name="l00012"></a>00012 <span class="comment">// \verbatim</span>
<a name="l00013"></a>00013 <span class="comment">//  Modifications</span>
<a name="l00014"></a>00014 <span class="comment">// \endverbatim</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;vcl_vector.h&gt;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;vcl_cassert.h&gt;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;vnl/vnl_least_squares_function.h&gt;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;<a class="code" href="vgl__homg__point__2d_8h.html" title="point in projective 2D space">vgl/vgl_homg_point_2d.h</a>&gt;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;<a class="code" href="vgl__homg__line__2d_8h.html" title="line in projective 2D space">vgl/vgl_homg_line_2d.h</a>&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;<a class="code" href="vgl__h__matrix__2d_8h.html" title="3x3 plane-to-plane projectivity">vgl/algo/vgl_h_matrix_2d.h</a>&gt;</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="comment">// Note that the least squares function is over-parametrized</span>
<a name="l00023"></a>00023 <span class="comment">// with 9 parameters rather than the minimum 8.</span>
<a name="l00024"></a>00024 <span class="comment">// See Hartley and Zisserman p. 94.</span>
<a name="l00025"></a><a class="code" href="classprojection__lsqf.html">00025</a> <span class="keyword">class </span><a class="code" href="classprojection__lsqf.html">projection_lsqf</a> : <span class="keyword">public</span> vnl_least_squares_function
<a name="l00026"></a>00026 {
<a name="l00027"></a><a class="code" href="classprojection__lsqf.html#ac13ce3b270b8a7c956113288a68a8796">00027</a>   <span class="keywordtype">unsigned</span> <a class="code" href="classprojection__lsqf.html#ac13ce3b270b8a7c956113288a68a8796">n_</a>;
<a name="l00028"></a><a class="code" href="classprojection__lsqf.html#a9966d0c66fad169f8958ee1948e8c211">00028</a>   vcl_vector&lt;vgl_homg_point_2d&lt;double&gt; &gt; <a class="code" href="classprojection__lsqf.html#a9966d0c66fad169f8958ee1948e8c211">from_points_</a>;
<a name="l00029"></a><a class="code" href="classprojection__lsqf.html#ae4088b240e744d1af1bfa16018800c77">00029</a>   vcl_vector&lt;vgl_point_2d&lt;double&gt; &gt; <a class="code" href="classprojection__lsqf.html#ae4088b240e744d1af1bfa16018800c77">to_points_</a>;
<a name="l00030"></a>00030 
<a name="l00031"></a>00031  <span class="keyword">public</span>:
<a name="l00032"></a><a class="code" href="classprojection__lsqf.html#a18797bf7a4d1576253ed99cf039a2da3">00032</a>   <a class="code" href="classprojection__lsqf.html#a18797bf7a4d1576253ed99cf039a2da3">projection_lsqf</a>(vcl_vector&lt;<a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; from_points,
<a name="l00033"></a>00033                   vcl_vector&lt;<a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; to_points)
<a name="l00034"></a>00034   : vnl_least_squares_function(9, 2*from_points.size() + 1, no_gradient)
<a name="l00035"></a>00035   {
<a name="l00036"></a>00036     <a class="code" href="classprojection__lsqf.html#ac13ce3b270b8a7c956113288a68a8796">n_</a> = from_points.size();
<a name="l00037"></a>00037     assert(<a class="code" href="classprojection__lsqf.html#ac13ce3b270b8a7c956113288a68a8796">n_</a>==to_points.size());
<a name="l00038"></a>00038     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i&lt;<a class="code" href="classprojection__lsqf.html#ac13ce3b270b8a7c956113288a68a8796">n_</a>; ++i)
<a name="l00039"></a>00039     {
<a name="l00040"></a>00040       <a class="code" href="classprojection__lsqf.html#a9966d0c66fad169f8958ee1948e8c211">from_points_</a>.push_back(from_points[i]);
<a name="l00041"></a>00041       <a class="code" href="classprojection__lsqf.html#ae4088b240e744d1af1bfa16018800c77">to_points_</a>.push_back(to_points[i]);
<a name="l00042"></a>00042     }
<a name="l00043"></a>00043   }
<a name="l00044"></a>00044 
<a name="l00045"></a><a class="code" href="classprojection__lsqf.html#a27688b751493eea0ada3f091069a65ba">00045</a>   <a class="code" href="classprojection__lsqf.html#a27688b751493eea0ada3f091069a65ba">~projection_lsqf</a>() {}
<a name="l00046"></a>00046 
<a name="l00047"></a>00047   <span class="comment">//: compute the projection error given a set of h parameters.</span>
<a name="l00048"></a>00048   <span class="comment">// The residuals required by f are the Euclidean x and y coordinate</span>
<a name="l00049"></a>00049   <span class="comment">// differences between the projected from points and the</span>
<a name="l00050"></a>00050   <span class="comment">// corresponding to points.</span>
<a name="l00051"></a><a class="code" href="classprojection__lsqf.html#acaf8086fcae41c82cb76d78f465da805">00051</a>   <span class="keywordtype">void</span> <a class="code" href="classprojection__lsqf.html#acaf8086fcae41c82cb76d78f465da805" title="compute the projection error given a set of h parameters.">f</a>(<span class="keyword">const</span> vnl_vector&lt;double&gt;&amp; hv, vnl_vector&lt;double&gt;&amp; proj_err)
<a name="l00052"></a>00052   {
<a name="l00053"></a>00053     assert(hv.size()==9);
<a name="l00054"></a>00054     assert(proj_err.size()==2*<a class="code" href="classprojection__lsqf.html#ac13ce3b270b8a7c956113288a68a8796">n_</a>+1);
<a name="l00055"></a>00055     <span class="comment">// project and compute residual</span>
<a name="l00056"></a>00056     <a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a> h(hv.data_block());
<a name="l00057"></a>00057     <span class="keywordtype">unsigned</span> k = 0;
<a name="l00058"></a>00058     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i&lt;<a class="code" href="classprojection__lsqf.html#ac13ce3b270b8a7c956113288a68a8796">n_</a>; ++i, k+=2)
<a name="l00059"></a>00059     {
<a name="l00060"></a>00060       <a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> to_proj = h(<a class="code" href="classprojection__lsqf.html#a9966d0c66fad169f8958ee1948e8c211">from_points_</a>[i]);
<a name="l00061"></a>00061       <a class="code" href="classvgl__point__2d.html" title="Represents a cartesian 2D point.">vgl_point_2d&lt;double&gt;</a> p_proj(to_proj);
<a name="l00062"></a>00062       <span class="keywordtype">double</span> xp = <a class="code" href="classprojection__lsqf.html#ae4088b240e744d1af1bfa16018800c77">to_points_</a>[i].x(), yp = <a class="code" href="classprojection__lsqf.html#ae4088b240e744d1af1bfa16018800c77">to_points_</a>[i].y();
<a name="l00063"></a>00063       <span class="keywordtype">double</span> xproj = p_proj.<a class="code" href="classvgl__point__2d.html#a3d0455536dcb130f284c3eeaba1ae960">x</a>(), yproj = p_proj.<a class="code" href="classvgl__point__2d.html#a25dfe52017f7614103d028639125ff91">y</a>();
<a name="l00064"></a>00064       proj_err[k]=(xp-xproj);  proj_err[k+1]=(yp-yproj);
<a name="l00065"></a>00065     }
<a name="l00066"></a>00066     proj_err[2*<a class="code" href="classprojection__lsqf.html#ac13ce3b270b8a7c956113288a68a8796">n_</a>]=1.0-hv.magnitude();
<a name="l00067"></a>00067   }
<a name="l00068"></a>00068 };
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 
<a name="l00071"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html">00071</a> <span class="keyword">class </span><a class="code" href="classvgl__h__matrix__2d__optimize.html">vgl_h_matrix_2d_optimize</a>
<a name="l00072"></a>00072 {
<a name="l00073"></a>00073  <span class="keyword">public</span>:
<a name="l00074"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#a997fbfa6919e9eb3e9fb299a1090f37f">00074</a>   <a class="code" href="classvgl__h__matrix__2d__optimize.html#a997fbfa6919e9eb3e9fb299a1090f37f">vgl_h_matrix_2d_optimize</a>(<a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a> <span class="keyword">const</span>&amp; initial_h)
<a name="l00075"></a>00075     : <a class="code" href="classvgl__h__matrix__2d__optimize.html#aee07a6db2e8ab5356b25060865267406">verbose_</a>(false), <a class="code" href="classvgl__h__matrix__2d__optimize.html#af6c02473b348f6c9157a86457e27a4c2">trace_</a>(false), <a class="code" href="classvgl__h__matrix__2d__optimize.html#ac2b2188af714f65e5e0ac3a814ecd8de">ftol_</a>(1e-9), <a class="code" href="classvgl__h__matrix__2d__optimize.html#a60c9fc1927c4f02d1891be179edd97be">gtol_</a>(1e-9),
<a name="l00076"></a>00076     <a class="code" href="classvgl__h__matrix__2d__optimize.html#ae3ad225f07436ba0b2e3dba7246810ad">htol_</a>(1e-9), <a class="code" href="classvgl__h__matrix__2d__optimize.html#a02453731ed80ac3032051305a2bb10b1">max_iter_</a>(2000), <a class="code" href="classvgl__h__matrix__2d__optimize.html#ae521c546950a7ef6f85fd5609b967fe3">initial_h_</a>(initial_h){}
<a name="l00077"></a>00077 
<a name="l00078"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#a5012005cdf1ac6d63452e519f4e755ed">00078</a>   <span class="keyword">virtual</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a5012005cdf1ac6d63452e519f4e755ed">~vgl_h_matrix_2d_optimize</a>() {}
<a name="l00079"></a>00079 
<a name="l00080"></a>00080   <span class="comment">//: set this to true for verbose run-time information</span>
<a name="l00081"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#ae6890a8968ee2279c4ab4dee65aaf2ab">00081</a>   <span class="keywordtype">void</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#ae6890a8968ee2279c4ab4dee65aaf2ab" title="set this to true for verbose run-time information.">set_verbose</a>(<span class="keywordtype">bool</span> <a class="code" href="vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>) { <a class="code" href="classvgl__h__matrix__2d__optimize.html#aee07a6db2e8ab5356b25060865267406">verbose_</a> = <a class="code" href="vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>; }
<a name="l00082"></a>00082 
<a name="l00083"></a>00083   <span class="comment">//: Termination tolerance on the gradient of the projection error</span>
<a name="l00084"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#a15d5a713fce488b1471776fbf526efe4">00084</a>   <span class="keywordtype">void</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a15d5a713fce488b1471776fbf526efe4" title="Termination tolerance on the gradient of the projection error.">set_trace</a>(<span class="keywordtype">bool</span> <a class="code" href="vgl__rtree_8txx.html#a850204e31ddf91a3152fadee164adccc">trace</a>){<a class="code" href="classvgl__h__matrix__2d__optimize.html#af6c02473b348f6c9157a86457e27a4c2">trace_</a> = <a class="code" href="vgl__rtree_8txx.html#a850204e31ddf91a3152fadee164adccc">trace</a>;}
<a name="l00085"></a>00085 
<a name="l00086"></a>00086   <span class="comment">//: Termination tolerance on change in the solution</span>
<a name="l00087"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#a208470afd24adf768cf00d092f7c8b64">00087</a>   <span class="keywordtype">void</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a208470afd24adf768cf00d092f7c8b64" title="Termination tolerance on change in the solution.">set_htol</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> htol){<a class="code" href="classvgl__h__matrix__2d__optimize.html#ae3ad225f07436ba0b2e3dba7246810ad">htol_</a> = htol;}
<a name="l00088"></a>00088 
<a name="l00089"></a>00089   <span class="comment">//: Termination tolerance on the sum of squared projection errors</span>
<a name="l00090"></a>00090   <span class="comment">// The optimization is done in a normalized coordinate frame with</span>
<a name="l00091"></a>00091   <span class="comment">// unity point domain radius.</span>
<a name="l00092"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#ab1dba306ea6692ba939f2cc37ff18a7c">00092</a>   <span class="keywordtype">void</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#ab1dba306ea6692ba939f2cc37ff18a7c" title="Termination tolerance on the sum of squared projection errors.">set_ftol</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> ftol){<a class="code" href="classvgl__h__matrix__2d__optimize.html#ac2b2188af714f65e5e0ac3a814ecd8de">ftol_</a> = ftol;}
<a name="l00093"></a>00093 
<a name="l00094"></a>00094   <span class="comment">//: Termination tolerance on the gradient of the projection error</span>
<a name="l00095"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#ae6e4b55c488a11336adff261c8812321">00095</a>   <span class="keywordtype">void</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#ae6e4b55c488a11336adff261c8812321" title="Termination tolerance on the gradient of the projection error.">set_gtol</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> gtol){<a class="code" href="classvgl__h__matrix__2d__optimize.html#a60c9fc1927c4f02d1891be179edd97be">gtol_</a> = gtol;}
<a name="l00096"></a>00096 
<a name="l00097"></a>00097   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a478af071e76ae95ec795d33201ebd64c">minimum_number_of_correspondences</a>() <span class="keyword">const</span> = 0;
<a name="l00098"></a>00098 
<a name="l00099"></a>00099   <span class="comment">// Optimize methods :</span>
<a name="l00100"></a>00100   <span class="comment">//</span>
<a name="l00101"></a>00101   <span class="comment">// Some use point correspondences, some use line</span>
<a name="l00102"></a>00102   <span class="comment">// correspondences, some use both. They are implemented</span>
<a name="l00103"></a>00103   <span class="comment">// in terms of the pure virtual optimize_(p|l|pl) methods.</span>
<a name="l00104"></a>00104 
<a name="l00105"></a>00105   <span class="comment">//: optimize homography from matched points</span>
<a name="l00106"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#a27b75543efb760fa4823a3869b95c6f5">00106</a>   <span class="keywordtype">bool</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a27b75543efb760fa4823a3869b95c6f5" title="optimize homography from matched points.">optimize</a>(vcl_vector&lt;<a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; points1,
<a name="l00107"></a>00107                 vcl_vector&lt;<a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; points2,
<a name="l00108"></a>00108                 <a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a>&amp; H)
<a name="l00109"></a>00109   {
<a name="l00110"></a>00110     <span class="keywordflow">return</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a5ba5dc70d534b96eb4f351c77ead8eb8">optimize_p</a>(points1, points2, H);
<a name="l00111"></a>00111   }
<a name="l00112"></a>00112 
<a name="l00113"></a>00113   <span class="comment">//: optimize homography from matched lines</span>
<a name="l00114"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#acd59ef0713e80f827fd57476665eab41">00114</a>   <span class="keywordtype">bool</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a27b75543efb760fa4823a3869b95c6f5" title="optimize homography from matched points.">optimize</a>(vcl_vector&lt;<a class="code" href="classvgl__homg__line__2d.html" title="Represents a homogeneous 2D line.">vgl_homg_line_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; lines1,
<a name="l00115"></a>00115                 vcl_vector&lt;<a class="code" href="classvgl__homg__line__2d.html" title="Represents a homogeneous 2D line.">vgl_homg_line_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; lines2,
<a name="l00116"></a>00116                 <a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a>&amp; H)
<a name="l00117"></a>00117   {
<a name="l00118"></a>00118     <span class="keywordflow">return</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a0b9f40480382a66d0345ce6f06fe58ad">optimize_l</a>(lines1, lines2, H);
<a name="l00119"></a>00119   }
<a name="l00120"></a>00120 
<a name="l00121"></a>00121   <span class="comment">//: optimize homography from matched points and lines</span>
<a name="l00122"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#ac248663c2ceaa8792ae67cd77f13d379">00122</a>   <span class="keywordtype">bool</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a27b75543efb760fa4823a3869b95c6f5" title="optimize homography from matched points.">optimize</a>(vcl_vector&lt;<a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; points1,
<a name="l00123"></a>00123                 vcl_vector&lt;<a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; points2,
<a name="l00124"></a>00124                 vcl_vector&lt;<a class="code" href="classvgl__homg__line__2d.html" title="Represents a homogeneous 2D line.">vgl_homg_line_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; lines1,
<a name="l00125"></a>00125                 vcl_vector&lt;<a class="code" href="classvgl__homg__line__2d.html" title="Represents a homogeneous 2D line.">vgl_homg_line_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; lines2,
<a name="l00126"></a>00126                 <a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a>&amp; H)
<a name="l00127"></a>00127   {
<a name="l00128"></a>00128     <span class="keywordflow">return</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a6055b473d024295962bf320aacf2369c">optimize_pl</a>(points1, points2, lines1, lines2, H);
<a name="l00129"></a>00129   }
<a name="l00130"></a>00130 
<a name="l00131"></a>00131   <span class="comment">//: optimize homography from matched points - return h_matrix</span>
<a name="l00132"></a>00132   <a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a>
<a name="l00133"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#af3791b836c8f0699c3cde8507821cd69">00133</a>   <a class="code" href="classvgl__h__matrix__2d__optimize.html#a27b75543efb760fa4823a3869b95c6f5" title="optimize homography from matched points.">optimize</a>(vcl_vector&lt;<a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; p1,
<a name="l00134"></a>00134            vcl_vector&lt;<a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; p2)
<a name="l00135"></a>00135   { <a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a> H; <a class="code" href="classvgl__h__matrix__2d__optimize.html#a5ba5dc70d534b96eb4f351c77ead8eb8">optimize_p</a>(p1, p2, H); <span class="keywordflow">return</span> H; }
<a name="l00136"></a>00136 
<a name="l00137"></a>00137   <span class="comment">//: optimize homography from matched lines - return h_matrix</span>
<a name="l00138"></a>00138   <a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a>
<a name="l00139"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#af9f02dfae1a941ae84dbe487c8932782">00139</a>   <a class="code" href="classvgl__h__matrix__2d__optimize.html#a27b75543efb760fa4823a3869b95c6f5" title="optimize homography from matched points.">optimize</a>(vcl_vector&lt;<a class="code" href="classvgl__homg__line__2d.html" title="Represents a homogeneous 2D line.">vgl_homg_line_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; l1,
<a name="l00140"></a>00140            vcl_vector&lt;<a class="code" href="classvgl__homg__line__2d.html" title="Represents a homogeneous 2D line.">vgl_homg_line_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; l2)
<a name="l00141"></a>00141   { <a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a> H; <a class="code" href="classvgl__h__matrix__2d__optimize.html#a0b9f40480382a66d0345ce6f06fe58ad">optimize_l</a>(l1, l2, H); <span class="keywordflow">return</span> H; }
<a name="l00142"></a>00142 
<a name="l00143"></a>00143   <span class="comment">//: optimize homography from matched points and lines - return h_matrix</span>
<a name="l00144"></a>00144   <a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a>
<a name="l00145"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#a3e3226d9dc4c139e3501f49b2a1ddcec">00145</a>   <a class="code" href="classvgl__h__matrix__2d__optimize.html#a27b75543efb760fa4823a3869b95c6f5" title="optimize homography from matched points.">optimize</a>(vcl_vector&lt;<a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; p1,
<a name="l00146"></a>00146            vcl_vector&lt;<a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; p2,
<a name="l00147"></a>00147            vcl_vector&lt;<a class="code" href="classvgl__homg__line__2d.html" title="Represents a homogeneous 2D line.">vgl_homg_line_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; l1,
<a name="l00148"></a>00148            vcl_vector&lt;<a class="code" href="classvgl__homg__line__2d.html" title="Represents a homogeneous 2D line.">vgl_homg_line_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; l2)
<a name="l00149"></a>00149   { <a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a>  H; <a class="code" href="classvgl__h__matrix__2d__optimize.html#a6055b473d024295962bf320aacf2369c">optimize_pl</a>(p1, p2, l1, l2, H); <span class="keywordflow">return</span> H; }
<a name="l00150"></a>00150 
<a name="l00151"></a>00151  <span class="keyword">protected</span>:
<a name="l00152"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#aee07a6db2e8ab5356b25060865267406">00152</a>   <span class="keywordtype">bool</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#aee07a6db2e8ab5356b25060865267406">verbose_</a>;
<a name="l00153"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#af6c02473b348f6c9157a86457e27a4c2">00153</a>   <span class="keywordtype">bool</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#af6c02473b348f6c9157a86457e27a4c2">trace_</a>;
<a name="l00154"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#ac2b2188af714f65e5e0ac3a814ecd8de">00154</a>   <span class="keywordtype">double</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#ac2b2188af714f65e5e0ac3a814ecd8de">ftol_</a>;
<a name="l00155"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#a60c9fc1927c4f02d1891be179edd97be">00155</a>   <span class="keywordtype">double</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a60c9fc1927c4f02d1891be179edd97be">gtol_</a>;
<a name="l00156"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#ae3ad225f07436ba0b2e3dba7246810ad">00156</a>   <span class="keywordtype">double</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#ae3ad225f07436ba0b2e3dba7246810ad">htol_</a>;
<a name="l00157"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#a02453731ed80ac3032051305a2bb10b1">00157</a>   <span class="keywordtype">int</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a02453731ed80ac3032051305a2bb10b1">max_iter_</a>;
<a name="l00158"></a><a class="code" href="classvgl__h__matrix__2d__optimize.html#ae521c546950a7ef6f85fd5609b967fe3">00158</a>   <a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a> <a class="code" href="classvgl__h__matrix__2d__optimize.html#ae521c546950a7ef6f85fd5609b967fe3">initial_h_</a>;
<a name="l00159"></a>00159   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a5ba5dc70d534b96eb4f351c77ead8eb8">optimize_p</a>(vcl_vector&lt;<a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; points1,
<a name="l00160"></a>00160                           vcl_vector&lt;<a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; points2,
<a name="l00161"></a>00161                           <a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a>&amp; H) = 0;
<a name="l00162"></a>00162 
<a name="l00163"></a>00163   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a0b9f40480382a66d0345ce6f06fe58ad">optimize_l</a>(vcl_vector&lt;<a class="code" href="classvgl__homg__line__2d.html" title="Represents a homogeneous 2D line.">vgl_homg_line_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; lines1,
<a name="l00164"></a>00164                           vcl_vector&lt;<a class="code" href="classvgl__homg__line__2d.html" title="Represents a homogeneous 2D line.">vgl_homg_line_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; lines2,
<a name="l00165"></a>00165                           <a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a>&amp; H) = 0;
<a name="l00166"></a>00166 
<a name="l00167"></a>00167   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classvgl__h__matrix__2d__optimize.html#a6055b473d024295962bf320aacf2369c">optimize_pl</a>(vcl_vector&lt;<a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> &gt;<span class="keyword">const</span>&amp; points1,
<a name="l00168"></a>00168                            vcl_vector&lt;<a class="code" href="classvgl__homg__point__2d.html" title="Represents a homogeneous 2D point.">vgl_homg_point_2d&lt;double&gt;</a> &gt;<span class="keyword">const</span>&amp; points2,
<a name="l00169"></a>00169                            vcl_vector&lt;<a class="code" href="classvgl__homg__line__2d.html" title="Represents a homogeneous 2D line.">vgl_homg_line_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; lines1,
<a name="l00170"></a>00170                            vcl_vector&lt;<a class="code" href="classvgl__homg__line__2d.html" title="Represents a homogeneous 2D line.">vgl_homg_line_2d&lt;double&gt;</a> &gt; <span class="keyword">const</span>&amp; lines2,
<a name="l00171"></a>00171                            <a class="code" href="classvgl__h__matrix__2d.html">vgl_h_matrix_2d&lt;double&gt;</a>&amp; H) = 0;
<a name="l00172"></a>00172 };
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 <span class="preprocessor">#endif // vgl_h_matrix_2d_optimize_h_</span>
</pre></div></div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 1 2013 17:31:23 for core/vgl by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
