<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>core/vgui/vgui_range_map.h Source File</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">core/vgui/vgui_range_map.h</div>  </div>
</div>
<div class="contents">
<a href="vgui__range__map_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// This is core/vgui/vgui_range_map.h</span>
<a name="l00002"></a>00002 <span class="preprocessor">#ifndef vgui_range_map_h</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#define vgui_range_map_h</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="preprocessor">#ifdef VCL_NEEDS_PRAGMA_INTERFACE</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="preprocessor">#pragma interface</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span><span class="comment">//:</span>
<a name="l00008"></a>00008 <span class="comment">// \file</span>
<a name="l00009"></a>00009 <span class="comment">// \author  J.L. Mundy</span>
<a name="l00010"></a>00010 <span class="comment">// \brief A mapping from pixels to 8 bit display range</span>
<a name="l00011"></a>00011 <span class="comment">//</span>
<a name="l00012"></a>00012 <span class="comment">//  Supports pixel look-up table mapping for contrast adjustment</span>
<a name="l00013"></a>00013 <span class="comment">//  and other interactive controls of the image display range</span>
<a name="l00014"></a>00014 <span class="comment">//  A key application is producing usable display of 16 bit pixels</span>
<a name="l00015"></a>00015 <span class="comment">//  Can be used to interactively window the dynamic range of 8 bit pixels</span>
<a name="l00016"></a>00016 <span class="comment">//  or to display signed char or signed short.</span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00018"></a>00018 <span class="comment">//  For byte and short pixel types, the mapping is implemented using</span>
<a name="l00019"></a>00019 <span class="comment">//  a look-up table.</span>
<a name="l00020"></a>00020 <span class="comment">//</span>
<a name="l00021"></a>00021 <span class="comment">//  When mapping can be done by a look_up table, there are two</span>
<a name="l00022"></a>00022 <span class="comment">//  table types available (* = [L,R,G,B,A]):</span>
<a name="l00023"></a>00023 <span class="comment">//     ::*map()  - rmap[in_pixel]-&gt;vxl_byte</span>
<a name="l00024"></a>00024 <span class="comment">//     ::f*map() - frmap[in_pixe]-&gt;float</span>
<a name="l00025"></a>00025 <span class="comment">//</span>
<a name="l00026"></a>00026 <span class="comment">//     *map is used to map the image pixels during conversion to</span>
<a name="l00027"></a>00027 <span class="comment">//     display pixels carried out by vgui_section_buffer. The range of</span>
<a name="l00028"></a>00028 <span class="comment">//     this map is [0 256], which is the unclamped range in vgui_pixel.</span>
<a name="l00029"></a>00029 <span class="comment">//</span>
<a name="l00030"></a>00030 <span class="comment">//     *fmap is used to directly map image pixels using the OpenGL</span>
<a name="l00031"></a>00031 <span class="comment">//     glPixelMapf() mapping function. The best form for a glPixelMap</span>
<a name="l00032"></a>00032 <span class="comment">//     is an array of floats on the range [0,1] and is provided by frmap.</span>
<a name="l00033"></a>00033 <span class="comment">//</span>
<a name="l00034"></a>00034 <span class="comment">// For pixel types with a larger dynamic range than can</span>
<a name="l00035"></a>00035 <span class="comment">// be stored in a table, the pixel conversion is done on the fly, using</span>
<a name="l00036"></a>00036 <span class="comment">// the ::map_pixel(in_pixel) method. This function is applied in</span>
<a name="l00037"></a>00037 <span class="comment">// vgui_section_buffer during pixel conversion.</span>
<a name="l00038"></a>00038 <span class="comment">//</span>
<a name="l00039"></a>00039 <span class="comment">// The gamma  mapping function is defined as,</span>
<a name="l00040"></a>00040 <span class="comment">//                  y = (x)^(1/gamma)</span>
<a name="l00041"></a>00041 <span class="comment">// which accounts for the standard photometric gamma correction.</span>
<a name="l00042"></a>00042 <span class="comment">// Note on Gamma (by Joel Savaric 1998):</span>
<a name="l00043"></a>00043 <span class="comment">// 1/gamma is used to be consistent with other software like Photoshop,</span>
<a name="l00044"></a>00044 <span class="comment">// Paintshop pro, GIMP or xv, that raise to the power of 1/gamma when</span>
<a name="l00045"></a>00045 <span class="comment">// making gamma correction. Gamma correction is considered to be a</span>
<a name="l00046"></a>00046 <span class="comment">// correction of the hardware setting. Monitors raise the input voltage to a</span>
<a name="l00047"></a>00047 <span class="comment">// power of gamma (generally gamma=1.7 or 2.5) When you want to correct the</span>
<a name="l00048"></a>00048 <span class="comment">// gamma of the monitor your raise to the power of 1/gamma.</span>
<a name="l00049"></a>00049 <span class="comment">// (for more detail see http://www.cgsd.com/papers/gamma.html)</span>
<a name="l00050"></a>00050 <span class="comment">//</span>
<a name="l00051"></a>00051 <span class="comment">// The map can also be inverted, i.e. swapping dark and light intensity values,</span>
<a name="l00052"></a>00052 <span class="comment">//                  in = max(in)-in;</span>
<a name="l00053"></a>00053 <span class="comment">//</span>
<a name="l00054"></a>00054 <span class="comment">// The map is recomputed whenever the domain limits, gamma or invert parameters</span>
<a name="l00055"></a>00055 <span class="comment">// are changed.</span>
<a name="l00056"></a>00056 <span class="comment">//</span>
<a name="l00057"></a>00057 <span class="comment">// Notes:</span>
<a name="l00058"></a>00058 <span class="comment">//</span>
<a name="l00059"></a>00059 <span class="comment">//   In GUI applications, the dynamic mouse motion pixel display should show</span>
<a name="l00060"></a>00060 <span class="comment">//   the source pixel values before mapping, not the frame buffer values.</span>
<a name="l00061"></a>00061 <span class="comment">//</span>
<a name="l00062"></a>00062 <span class="comment">//   The current scheme can easily be extended to full color support if the</span>
<a name="l00063"></a>00063 <span class="comment">//   need arises. The number of maps has to be extended to three</span>
<a name="l00064"></a>00064 <span class="comment">//   (four with an alpha channel or multi-spectras) as well as</span>
<a name="l00065"></a>00065 <span class="comment">//   increasing the number of mapping parameters.</span>
<a name="l00066"></a>00066 <span class="comment">//</span>
<a name="l00067"></a>00067 <span class="comment">// \verbatim</span>
<a name="l00068"></a>00068 <span class="comment">//  Modifications</span>
<a name="l00069"></a>00069 <span class="comment">//   &lt;none&gt;</span>
<a name="l00070"></a>00070 <span class="comment">// \endverbatim</span>
<a name="l00071"></a>00071 <span class="preprocessor">#include &lt;vxl_config.h&gt;</span>
<a name="l00072"></a>00072 <span class="preprocessor">#include &lt;<a class="codeRef" doxygen="core_vbl.tag:../../../core/vbl/html/" href="../../../core/vbl/html/vbl__array__1d_8h.html">vbl/vbl_array_1d.h</a>&gt;</span>
<a name="l00073"></a>00073 <span class="preprocessor">#include &lt;<a class="code" href="vgui__range__map__params_8h.html" title="Parameters to define pixel range mapping.">vgui/vgui_range_map_params.h</a>&gt;</span>
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Type&gt;
<a name="l00076"></a><a class="code" href="classvgui__range__map.html">00076</a> <span class="keyword">class </span><a class="code" href="classvgui__range__map.html">vgui_range_map</a> : <span class="keyword">public</span> <a class="code" href="classvgui__range__map__params.html">vgui_range_map_params</a>
<a name="l00077"></a>00077 {
<a name="l00078"></a>00078  <span class="keyword">public</span>:
<a name="l00079"></a>00079   <a class="code" href="classvgui__range__map.html#a37edf42883d0af913b410b7f44462099">vgui_range_map</a>(<a class="code" href="classvgui__range__map__params.html">vgui_range_map_params</a> <span class="keyword">const</span>&amp; rmp);
<a name="l00080"></a>00080   <a class="code" href="classvgui__range__map.html#a1c830ec6297659a76463c75b2f63fb55">~vgui_range_map</a>();
<a name="l00081"></a>00081 
<a name="l00082"></a>00082   <span class="comment">//: Is the pixel type mapable at all</span>
<a name="l00083"></a><a class="code" href="classvgui__range__map.html#a4d763a15aac37df701f1361582f632dc">00083</a>   <span class="keywordtype">bool</span> <a class="code" href="classvgui__range__map.html#a4d763a15aac37df701f1361582f632dc" title="Is the pixel type mapable at all.">mapable</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classvgui__range__map.html#aa05a55776e01a447327a8b903b86582d" title="input pixel type can be mapped">mapable_</a>;}
<a name="l00084"></a>00084 
<a name="l00085"></a>00085   <span class="comment">//: Is the pixel type mapable by a lookup table</span>
<a name="l00086"></a><a class="code" href="classvgui__range__map.html#a2a3cdc9e561725a2165654fa87f06ea4">00086</a>   <span class="keywordtype">bool</span> <a class="code" href="classvgui__range__map.html#a2a3cdc9e561725a2165654fa87f06ea4" title="Is the pixel type mapable by a lookup table.">table_mapable</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classvgui__range__map.html#af6c405c9b9435020f2fd8d1924f8f095" title="input pixel type can be mapped by a table.">table_mapable_</a>;}
<a name="l00087"></a>00087 
<a name="l00088"></a>00088   <span class="comment">//: Get the number of elements in the mapping tables</span>
<a name="l00089"></a><a class="code" href="classvgui__range__map.html#acd082c66fd440476d2171cdae92f6ccb">00089</a>   <span class="keywordtype">unsigned</span> <a class="code" href="classvgui__range__map.html#acd082c66fd440476d2171cdae92f6ccb" title="Get the number of elements in the mapping tables.">map_size</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classvgui__range__map.html#ad2122716218e74ea906a1dcdb8b65a45" title="number of elements in the map">size_</a>;}
<a name="l00090"></a>00090 
<a name="l00091"></a>00091   <span class="comment">// get the software range maps (byte range)</span>
<a name="l00092"></a>00092 
<a name="l00093"></a>00093   <span class="comment">//: Luminance map</span>
<a name="l00094"></a><a class="code" href="classvgui__range__map.html#a212a09ed23c0147d8ca7349ee29d3052">00094</a>   <a class="codeRef" doxygen="core_vbl.tag:../../../core/vbl/html/" href="../../../core/vbl/html/classvbl__array__1d.html">vbl_array_1d&lt;vxl_byte&gt;</a> <a class="code" href="classvgui__range__map.html#a212a09ed23c0147d8ca7349ee29d3052" title="Luminance map.">Lmap</a>() {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#a4a84024048c40d6cfe1040e6eee588a7" title="Initialize the byte mapping table.">compute_byte_table</a>(Type(<a class="code" href="classvgui__range__map__params.html#ab58d3fc6bb0b53962acb219d857648a0" title="map domain minimum for luminance data">min_L_</a>), Type(<a class="code" href="classvgui__range__map__params.html#a3e328ad6295d257a968e980f6d1efcdb" title="map domain maximum for luminance data">max_L_</a>), <a class="code" href="classvgui__range__map__params.html#a4cd2a9b300a0af59304d0f0a37afe55a" title="photometric non-linear gamma correction">gamma_L_</a>, <a class="code" href="classvgui__range__map.html#adb71c2a53e8978b494b62a014bfd1329" title="scale for computed Luminance mapping">ratio_L_</a>);}
<a name="l00095"></a>00095   <span class="comment">//: Red Channel map</span>
<a name="l00096"></a><a class="code" href="classvgui__range__map.html#aef3396ccaf3ae4c49a58b6a1d3097829">00096</a>   <a class="codeRef" doxygen="core_vbl.tag:../../../core/vbl/html/" href="../../../core/vbl/html/classvbl__array__1d.html">vbl_array_1d&lt;vxl_byte&gt;</a> <a class="code" href="classvgui__range__map.html#aef3396ccaf3ae4c49a58b6a1d3097829" title="Red Channel map.">Rmap</a>() {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#a4a84024048c40d6cfe1040e6eee588a7" title="Initialize the byte mapping table.">compute_byte_table</a>(Type(<a class="code" href="classvgui__range__map__params.html#a06f35211337d6eb40585525aad6f1f1d" title="map domain minimum for red channel data">min_R_</a>), Type(<a class="code" href="classvgui__range__map__params.html#aeabde30bf91695e516908d35a3894270" title="map domain maximum for red channel data">max_R_</a>), <a class="code" href="classvgui__range__map__params.html#a69567d39c8fa151aacd5d49510129093" title="photometric non-linear gamma correction for red">gamma_R_</a>, <a class="code" href="classvgui__range__map.html#a96acee1d1ad73e237f7bcc8a49eba967" title="scale for computed red channel mapping">ratio_R_</a>);}
<a name="l00097"></a>00097   <span class="comment">//: Green Channel map</span>
<a name="l00098"></a><a class="code" href="classvgui__range__map.html#acfa3bc16cc1eb9238bc82c13a67a94fb">00098</a>   <a class="codeRef" doxygen="core_vbl.tag:../../../core/vbl/html/" href="../../../core/vbl/html/classvbl__array__1d.html">vbl_array_1d&lt;vxl_byte&gt;</a> <a class="code" href="classvgui__range__map.html#acfa3bc16cc1eb9238bc82c13a67a94fb" title="Green Channel map.">Gmap</a>() {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#a4a84024048c40d6cfe1040e6eee588a7" title="Initialize the byte mapping table.">compute_byte_table</a>(Type(<a class="code" href="classvgui__range__map__params.html#a4c1fabb613de7345f7007c0135843d50" title="map domain minimum for green channel data">min_G_</a>), Type(<a class="code" href="classvgui__range__map__params.html#aa11dc6fef37af504d2b9f7d5d69ad028" title="map domain maximum for green channel data">max_G_</a>), <a class="code" href="classvgui__range__map__params.html#a264f4c546539050ca5c61b874defbe1d" title="photometric non-linear gamma correction for green">gamma_G_</a>, <a class="code" href="classvgui__range__map.html#af187b5559eeb1ca9bb321d4bee32161a" title="scale for computed green channel mapping">ratio_G_</a>);}
<a name="l00099"></a>00099   <span class="comment">//: Blue Channel map</span>
<a name="l00100"></a><a class="code" href="classvgui__range__map.html#a12ba1537a33a9fa8b011356a035e2c26">00100</a>   <a class="codeRef" doxygen="core_vbl.tag:../../../core/vbl/html/" href="../../../core/vbl/html/classvbl__array__1d.html">vbl_array_1d&lt;vxl_byte&gt;</a> <a class="code" href="classvgui__range__map.html#a12ba1537a33a9fa8b011356a035e2c26" title="Blue Channel map.">Bmap</a>() {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#a4a84024048c40d6cfe1040e6eee588a7" title="Initialize the byte mapping table.">compute_byte_table</a>(Type(<a class="code" href="classvgui__range__map__params.html#a64ca14b83875d9c667a10237fe873393" title="map domain minimum for blue channel data">min_B_</a>), Type(<a class="code" href="classvgui__range__map__params.html#a656484ddd020b596adacb676f1ec1c08" title="map domain maximum for blue channel data">max_B_</a>), <a class="code" href="classvgui__range__map__params.html#af13f24245b89e515f1b520feb49f8870" title="photometric non-linear gamma correction for blue">gamma_B_</a>, <a class="code" href="classvgui__range__map.html#ad75a2315d98699cf1b0fed62d6435781" title="scale for computed blue channel mapping">ratio_B_</a>);}
<a name="l00101"></a>00101   <span class="comment">//: Alpha or Infrared Channel map</span>
<a name="l00102"></a><a class="code" href="classvgui__range__map.html#a4e4d83cdac1c10b576c02b12a18fc5f2">00102</a>   <a class="codeRef" doxygen="core_vbl.tag:../../../core/vbl/html/" href="../../../core/vbl/html/classvbl__array__1d.html">vbl_array_1d&lt;vxl_byte&gt;</a> <a class="code" href="classvgui__range__map.html#a4e4d83cdac1c10b576c02b12a18fc5f2" title="Alpha or Infrared Channel map.">Xmap</a>() {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#a4a84024048c40d6cfe1040e6eee588a7" title="Initialize the byte mapping table.">compute_byte_table</a>(Type(<a class="code" href="classvgui__range__map__params.html#a803ed860a999ca3ce235df0db21801a1" title="map domain minimum for alpha or infrared channel data">min_X_</a>), Type(<a class="code" href="classvgui__range__map__params.html#a567fe51dcc57758788ca9cb6ecb9c82d" title="map domain maximum for alpha or infrared channel data">max_X_</a>), <a class="code" href="classvgui__range__map__params.html#a1dd4e50584ddd186ffaa05dc7d0c9d46" title="photometric non-linear gamma correction for alpha or infrared">gamma_X_</a>, <a class="code" href="classvgui__range__map.html#a6b4b6f2ccf708489bce82da2d150a340" title="scale for computed alpha or IR channel mapping">ratio_X_</a>);}
<a name="l00103"></a>00103 
<a name="l00104"></a>00104   <span class="comment">// get the OpenGL hardware range maps (float [0, 1] range)</span>
<a name="l00105"></a>00105 
<a name="l00106"></a>00106   <span class="comment">//: Luminance hardware map</span>
<a name="l00107"></a><a class="code" href="classvgui__range__map.html#aa781c16c816ef4b822a683bc3a0b0113">00107</a>   <a class="codeRef" doxygen="core_vbl.tag:../../../core/vbl/html/" href="../../../core/vbl/html/classvbl__array__1d.html">vbl_array_1d&lt;float&gt;</a> <a class="code" href="classvgui__range__map.html#aa781c16c816ef4b822a683bc3a0b0113" title="Luminance hardware map.">fLmap</a>() {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#a118e3f313f8b0c84031ac42619c87a3b" title="Initialize the float mapping table.">compute_float_table</a>(Type(<a class="code" href="classvgui__range__map__params.html#ab58d3fc6bb0b53962acb219d857648a0" title="map domain minimum for luminance data">min_L_</a>), Type(<a class="code" href="classvgui__range__map__params.html#a3e328ad6295d257a968e980f6d1efcdb" title="map domain maximum for luminance data">max_L_</a>), <a class="code" href="classvgui__range__map__params.html#a4cd2a9b300a0af59304d0f0a37afe55a" title="photometric non-linear gamma correction">gamma_L_</a>, <a class="code" href="classvgui__range__map.html#adb71c2a53e8978b494b62a014bfd1329" title="scale for computed Luminance mapping">ratio_L_</a>);}
<a name="l00108"></a>00108   <span class="comment">//: Red channel hardware map</span>
<a name="l00109"></a><a class="code" href="classvgui__range__map.html#aab4bc30387d3e107f2b10e6051dbbedd">00109</a>   <a class="codeRef" doxygen="core_vbl.tag:../../../core/vbl/html/" href="../../../core/vbl/html/classvbl__array__1d.html">vbl_array_1d&lt;float&gt;</a> <a class="code" href="classvgui__range__map.html#aab4bc30387d3e107f2b10e6051dbbedd" title="Red channel hardware map.">fRmap</a>() {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#a118e3f313f8b0c84031ac42619c87a3b" title="Initialize the float mapping table.">compute_float_table</a>(Type(<a class="code" href="classvgui__range__map__params.html#a06f35211337d6eb40585525aad6f1f1d" title="map domain minimum for red channel data">min_R_</a>), Type(<a class="code" href="classvgui__range__map__params.html#aeabde30bf91695e516908d35a3894270" title="map domain maximum for red channel data">max_R_</a>), <a class="code" href="classvgui__range__map__params.html#a69567d39c8fa151aacd5d49510129093" title="photometric non-linear gamma correction for red">gamma_R_</a>, <a class="code" href="classvgui__range__map.html#a96acee1d1ad73e237f7bcc8a49eba967" title="scale for computed red channel mapping">ratio_R_</a>);}
<a name="l00110"></a>00110   <span class="comment">//: Green channel hardware map</span>
<a name="l00111"></a><a class="code" href="classvgui__range__map.html#a90a0b1017ab2e1e0a2a07e7fabd447a6">00111</a>   <a class="codeRef" doxygen="core_vbl.tag:../../../core/vbl/html/" href="../../../core/vbl/html/classvbl__array__1d.html">vbl_array_1d&lt;float&gt;</a> <a class="code" href="classvgui__range__map.html#a90a0b1017ab2e1e0a2a07e7fabd447a6" title="Green channel hardware map.">fGmap</a>() {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#a118e3f313f8b0c84031ac42619c87a3b" title="Initialize the float mapping table.">compute_float_table</a>(Type(<a class="code" href="classvgui__range__map__params.html#a4c1fabb613de7345f7007c0135843d50" title="map domain minimum for green channel data">min_G_</a>), Type(<a class="code" href="classvgui__range__map__params.html#aa11dc6fef37af504d2b9f7d5d69ad028" title="map domain maximum for green channel data">max_G_</a>), <a class="code" href="classvgui__range__map__params.html#a264f4c546539050ca5c61b874defbe1d" title="photometric non-linear gamma correction for green">gamma_G_</a>, <a class="code" href="classvgui__range__map.html#af187b5559eeb1ca9bb321d4bee32161a" title="scale for computed green channel mapping">ratio_G_</a>);}
<a name="l00112"></a>00112   <span class="comment">//: Blue channel hardware map</span>
<a name="l00113"></a><a class="code" href="classvgui__range__map.html#a0b656ce59ea4e87e8cdca6600009fe4e">00113</a>   <a class="codeRef" doxygen="core_vbl.tag:../../../core/vbl/html/" href="../../../core/vbl/html/classvbl__array__1d.html">vbl_array_1d&lt;float&gt;</a> <a class="code" href="classvgui__range__map.html#a0b656ce59ea4e87e8cdca6600009fe4e" title="Blue channel hardware map.">fBmap</a>() {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#a118e3f313f8b0c84031ac42619c87a3b" title="Initialize the float mapping table.">compute_float_table</a>(Type(<a class="code" href="classvgui__range__map__params.html#a64ca14b83875d9c667a10237fe873393" title="map domain minimum for blue channel data">min_B_</a>), Type(<a class="code" href="classvgui__range__map__params.html#a656484ddd020b596adacb676f1ec1c08" title="map domain maximum for blue channel data">max_B_</a>), <a class="code" href="classvgui__range__map__params.html#af13f24245b89e515f1b520feb49f8870" title="photometric non-linear gamma correction for blue">gamma_B_</a>, <a class="code" href="classvgui__range__map.html#ad75a2315d98699cf1b0fed62d6435781" title="scale for computed blue channel mapping">ratio_B_</a>);}
<a name="l00114"></a>00114   <span class="comment">//: Alpha or Infrared channel hardware map</span>
<a name="l00115"></a><a class="code" href="classvgui__range__map.html#abe4f97f0e0cf173630c54af7c20dbad8">00115</a>   <a class="codeRef" doxygen="core_vbl.tag:../../../core/vbl/html/" href="../../../core/vbl/html/classvbl__array__1d.html">vbl_array_1d&lt;float&gt;</a> <a class="code" href="classvgui__range__map.html#abe4f97f0e0cf173630c54af7c20dbad8" title="Alpha or Infrared channel hardware map.">fXmap</a>() {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#a118e3f313f8b0c84031ac42619c87a3b" title="Initialize the float mapping table.">compute_float_table</a>(Type(<a class="code" href="classvgui__range__map__params.html#a803ed860a999ca3ce235df0db21801a1" title="map domain minimum for alpha or infrared channel data">min_X_</a>), Type(<a class="code" href="classvgui__range__map__params.html#a567fe51dcc57758788ca9cb6ecb9c82d" title="map domain maximum for alpha or infrared channel data">max_X_</a>), <a class="code" href="classvgui__range__map__params.html#a1dd4e50584ddd186ffaa05dc7d0c9d46" title="photometric non-linear gamma correction for alpha or infrared">gamma_X_</a>, <a class="code" href="classvgui__range__map.html#a6b4b6f2ccf708489bce82da2d150a340" title="scale for computed alpha or IR channel mapping">ratio_X_</a>);}
<a name="l00116"></a>00116 
<a name="l00117"></a>00117   <span class="comment">//: Luminance computed map</span>
<a name="l00118"></a><a class="code" href="classvgui__range__map.html#a5efdf7ab3ea2124cc18913e49ce91fff">00118</a>   vxl_byte <a class="code" href="classvgui__range__map.html#a5efdf7ab3ea2124cc18913e49ce91fff" title="Luminance computed map.">map_L_pixel</a>(<span class="keyword">const</span> Type pix) {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#ac68835b2e4662d7e3a8b5116818a6900" title="Map a pixel from Type to vxl_byte.">map_pixel_byte</a>(pix, Type(<a class="code" href="classvgui__range__map__params.html#ab58d3fc6bb0b53962acb219d857648a0" title="map domain minimum for luminance data">min_L_</a>), Type(<a class="code" href="classvgui__range__map__params.html#a3e328ad6295d257a968e980f6d1efcdb" title="map domain maximum for luminance data">max_L_</a>), <a class="code" href="classvgui__range__map__params.html#a4cd2a9b300a0af59304d0f0a37afe55a" title="photometric non-linear gamma correction">gamma_L_</a>, <a class="code" href="classvgui__range__map.html#adb71c2a53e8978b494b62a014bfd1329" title="scale for computed Luminance mapping">ratio_L_</a>);}
<a name="l00119"></a>00119   <span class="comment">//: Red channel computed map</span>
<a name="l00120"></a><a class="code" href="classvgui__range__map.html#a9977a7efcb710140798cd8a4508afed1">00120</a>   vxl_byte <a class="code" href="classvgui__range__map.html#a9977a7efcb710140798cd8a4508afed1" title="Red channel computed map.">map_R_pixel</a>(<span class="keyword">const</span> Type pix) {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#ac68835b2e4662d7e3a8b5116818a6900" title="Map a pixel from Type to vxl_byte.">map_pixel_byte</a>(pix, Type(<a class="code" href="classvgui__range__map__params.html#a06f35211337d6eb40585525aad6f1f1d" title="map domain minimum for red channel data">min_R_</a>), Type(<a class="code" href="classvgui__range__map__params.html#aeabde30bf91695e516908d35a3894270" title="map domain maximum for red channel data">max_R_</a>), <a class="code" href="classvgui__range__map__params.html#a69567d39c8fa151aacd5d49510129093" title="photometric non-linear gamma correction for red">gamma_R_</a>, <a class="code" href="classvgui__range__map.html#a96acee1d1ad73e237f7bcc8a49eba967" title="scale for computed red channel mapping">ratio_R_</a>);}
<a name="l00121"></a>00121   <span class="comment">//: Green channel computed map</span>
<a name="l00122"></a><a class="code" href="classvgui__range__map.html#a1cfced99d91067fa4b384f4991c094d4">00122</a>   vxl_byte <a class="code" href="classvgui__range__map.html#a1cfced99d91067fa4b384f4991c094d4" title="Green channel computed map.">map_G_pixel</a>(<span class="keyword">const</span> Type pix) {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#ac68835b2e4662d7e3a8b5116818a6900" title="Map a pixel from Type to vxl_byte.">map_pixel_byte</a>(pix, Type(<a class="code" href="classvgui__range__map__params.html#a4c1fabb613de7345f7007c0135843d50" title="map domain minimum for green channel data">min_G_</a>), Type(<a class="code" href="classvgui__range__map__params.html#aa11dc6fef37af504d2b9f7d5d69ad028" title="map domain maximum for green channel data">max_G_</a>), <a class="code" href="classvgui__range__map__params.html#a264f4c546539050ca5c61b874defbe1d" title="photometric non-linear gamma correction for green">gamma_G_</a>, <a class="code" href="classvgui__range__map.html#af187b5559eeb1ca9bb321d4bee32161a" title="scale for computed green channel mapping">ratio_G_</a>);}
<a name="l00123"></a>00123   <span class="comment">//: Blue channel computed map</span>
<a name="l00124"></a><a class="code" href="classvgui__range__map.html#a82b40b453a90384795a725b7e363daaa">00124</a>   vxl_byte <a class="code" href="classvgui__range__map.html#a82b40b453a90384795a725b7e363daaa" title="Blue channel computed map.">map_B_pixel</a>(<span class="keyword">const</span> Type pix) {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#ac68835b2e4662d7e3a8b5116818a6900" title="Map a pixel from Type to vxl_byte.">map_pixel_byte</a>(pix, Type(<a class="code" href="classvgui__range__map__params.html#a64ca14b83875d9c667a10237fe873393" title="map domain minimum for blue channel data">min_B_</a>), Type(<a class="code" href="classvgui__range__map__params.html#a656484ddd020b596adacb676f1ec1c08" title="map domain maximum for blue channel data">max_B_</a>), <a class="code" href="classvgui__range__map__params.html#af13f24245b89e515f1b520feb49f8870" title="photometric non-linear gamma correction for blue">gamma_B_</a>, <a class="code" href="classvgui__range__map.html#ad75a2315d98699cf1b0fed62d6435781" title="scale for computed blue channel mapping">ratio_B_</a>);}
<a name="l00125"></a>00125   <span class="comment">//: Alpha or Infrared channel computed map</span>
<a name="l00126"></a><a class="code" href="classvgui__range__map.html#a83d3a543007a453995c1032241684f1a">00126</a>   vxl_byte <a class="code" href="classvgui__range__map.html#a83d3a543007a453995c1032241684f1a" title="Alpha or Infrared channel computed map.">map_X_pixel</a>(<span class="keyword">const</span> Type pix) {<span class="keywordflow">return</span> this-&gt;<a class="code" href="classvgui__range__map.html#ac68835b2e4662d7e3a8b5116818a6900" title="Map a pixel from Type to vxl_byte.">map_pixel_byte</a>(pix, Type(<a class="code" href="classvgui__range__map__params.html#a803ed860a999ca3ce235df0db21801a1" title="map domain minimum for alpha or infrared channel data">min_X_</a>), Type(<a class="code" href="classvgui__range__map__params.html#a567fe51dcc57758788ca9cb6ecb9c82d" title="map domain maximum for alpha or infrared channel data">max_X_</a>), <a class="code" href="classvgui__range__map__params.html#a1dd4e50584ddd186ffaa05dc7d0c9d46" title="photometric non-linear gamma correction for alpha or infrared">gamma_X_</a>, <a class="code" href="classvgui__range__map.html#a6b4b6f2ccf708489bce82da2d150a340" title="scale for computed alpha or IR channel mapping">ratio_X_</a>);}
<a name="l00127"></a>00127 
<a name="l00128"></a>00128   <span class="comment">//: offset for potentially signed table index. Zero for unsigned, -maxval for signed.</span>
<a name="l00129"></a>00129   <span class="keywordtype">int</span> <a class="code" href="classvgui__range__map.html#a92813432d32c8bc7acf4280cba109560" title="offset for potentially signed table index. Zero for unsigned, -maxval for signed.">offset</a>();
<a name="l00130"></a>00130 
<a name="l00131"></a>00131  <span class="keyword">private</span>:
<a name="l00132"></a>00132   <a class="code" href="classvgui__range__map.html#a37edf42883d0af913b410b7f44462099">vgui_range_map</a>();<span class="comment">//never use this</span>
<a name="l00133"></a>00133   <span class="comment">//:</span>
<a name="l00134"></a>00134   <span class="keywordtype">void</span> <a class="code" href="classvgui__range__map.html#ab9dab85773bf798a1a72e73278129ee4">init</a>();
<a name="l00135"></a>00135 
<a name="l00136"></a>00136   <span class="comment">//: Initialize the domain - sanity check and compute ratio_</span>
<a name="l00137"></a>00137   <span class="keywordtype">void</span> <a class="code" href="classvgui__range__map.html#a024a19324755e314def8b72f09137dac" title="Initialize the domain - sanity check and compute ratio_.">init_map_domain</a>(<span class="keyword">const</span> Type min, <span class="keyword">const</span> Type max,
<a name="l00138"></a>00138                        <span class="keywordtype">long</span> <span class="keywordtype">double</span>&amp; ratio);
<a name="l00139"></a>00139 
<a name="l00140"></a>00140   <span class="comment">//: Map a pixel from Type to vxl_byte</span>
<a name="l00141"></a>00141   vxl_byte <a class="code" href="classvgui__range__map.html#ac68835b2e4662d7e3a8b5116818a6900" title="Map a pixel from Type to vxl_byte.">map_pixel_byte</a>(<span class="keyword">const</span> Type pix, <span class="keyword">const</span> Type min, <span class="keyword">const</span> Type max,
<a name="l00142"></a>00142                           <span class="keyword">const</span> <span class="keywordtype">float</span> gamma, <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">double</span> ratio);
<a name="l00143"></a>00143   <span class="comment">//: Map the pixel to the range [0f 1f];</span>
<a name="l00144"></a>00144   <span class="keywordtype">float</span> <a class="code" href="classvgui__range__map.html#aeda9792c81b8f581568a1d67951314d4" title="Map the pixel to the range [0f 1f];.">map_pixel_float</a>(<span class="keyword">const</span> Type pix, <span class="keyword">const</span> Type min, <span class="keyword">const</span> Type max,
<a name="l00145"></a>00145                         <span class="keyword">const</span> <span class="keywordtype">float</span> gamma, <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">double</span> ratio);
<a name="l00146"></a>00146 
<a name="l00147"></a>00147   <span class="comment">//: Initialize the byte mapping table</span>
<a name="l00148"></a>00148   <a class="codeRef" doxygen="core_vbl.tag:../../../core/vbl/html/" href="../../../core/vbl/html/classvbl__array__1d.html">vbl_array_1d&lt;vxl_byte&gt;</a> <a class="code" href="classvgui__range__map.html#a4a84024048c40d6cfe1040e6eee588a7" title="Initialize the byte mapping table.">compute_byte_table</a>(<span class="keyword">const</span> Type min, <span class="keyword">const</span> Type max,
<a name="l00149"></a>00149                                             <span class="keyword">const</span> <span class="keywordtype">float</span> gamma,
<a name="l00150"></a>00150                                             <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">double</span> ratio);
<a name="l00151"></a>00151 
<a name="l00152"></a>00152   <span class="comment">//: Initialize the float mapping table</span>
<a name="l00153"></a>00153   <a class="codeRef" doxygen="core_vbl.tag:../../../core/vbl/html/" href="../../../core/vbl/html/classvbl__array__1d.html">vbl_array_1d&lt;float&gt;</a> <a class="code" href="classvgui__range__map.html#a118e3f313f8b0c84031ac42619c87a3b" title="Initialize the float mapping table.">compute_float_table</a>(<span class="keyword">const</span> Type min, <span class="keyword">const</span> Type max,
<a name="l00154"></a>00154                                           <span class="keyword">const</span> <span class="keywordtype">float</span> gamma,
<a name="l00155"></a>00155                                           <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">double</span> ratio);
<a name="l00156"></a>00156 
<a name="l00157"></a><a class="code" href="classvgui__range__map.html#aa05a55776e01a447327a8b903b86582d">00157</a>   <span class="keywordtype">bool</span> <a class="code" href="classvgui__range__map.html#aa05a55776e01a447327a8b903b86582d" title="input pixel type can be mapped">mapable_</a>;           <span class="comment">//!&lt; input pixel type can be mapped</span>
<a name="l00158"></a><a class="code" href="classvgui__range__map.html#af6c405c9b9435020f2fd8d1924f8f095">00158</a> <span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classvgui__range__map.html#af6c405c9b9435020f2fd8d1924f8f095" title="input pixel type can be mapped by a table.">table_mapable_</a>;     <span class="comment">//!&lt; input pixel type can be mapped by a table.</span>
<a name="l00159"></a><a class="code" href="classvgui__range__map.html#ad2122716218e74ea906a1dcdb8b65a45">00159</a> <span class="comment"></span>  <span class="keywordtype">unsigned</span> <a class="code" href="classvgui__range__map.html#ad2122716218e74ea906a1dcdb8b65a45" title="number of elements in the map">size_</a>;          <span class="comment">//!&lt; number of elements in the map</span>
<a name="l00160"></a><a class="code" href="classvgui__range__map.html#adb71c2a53e8978b494b62a014bfd1329">00160</a> <span class="comment"></span>  <span class="keywordtype">long</span> <span class="keywordtype">double</span> <a class="code" href="classvgui__range__map.html#adb71c2a53e8978b494b62a014bfd1329" title="scale for computed Luminance mapping">ratio_L_</a>;    <span class="comment">//!&lt; scale for computed Luminance mapping</span>
<a name="l00161"></a><a class="code" href="classvgui__range__map.html#a96acee1d1ad73e237f7bcc8a49eba967">00161</a> <span class="comment"></span>  <span class="keywordtype">long</span> <span class="keywordtype">double</span> <a class="code" href="classvgui__range__map.html#a96acee1d1ad73e237f7bcc8a49eba967" title="scale for computed red channel mapping">ratio_R_</a>;    <span class="comment">//!&lt; scale for computed red channel mapping</span>
<a name="l00162"></a><a class="code" href="classvgui__range__map.html#af187b5559eeb1ca9bb321d4bee32161a">00162</a> <span class="comment"></span>  <span class="keywordtype">long</span> <span class="keywordtype">double</span> <a class="code" href="classvgui__range__map.html#af187b5559eeb1ca9bb321d4bee32161a" title="scale for computed green channel mapping">ratio_G_</a>;    <span class="comment">//!&lt; scale for computed green channel mapping</span>
<a name="l00163"></a><a class="code" href="classvgui__range__map.html#ad75a2315d98699cf1b0fed62d6435781">00163</a> <span class="comment"></span>  <span class="keywordtype">long</span> <span class="keywordtype">double</span> <a class="code" href="classvgui__range__map.html#ad75a2315d98699cf1b0fed62d6435781" title="scale for computed blue channel mapping">ratio_B_</a>;    <span class="comment">//!&lt; scale for computed blue channel mapping</span>
<a name="l00164"></a><a class="code" href="classvgui__range__map.html#a6b4b6f2ccf708489bce82da2d150a340">00164</a> <span class="comment"></span>  <span class="keywordtype">long</span> <span class="keywordtype">double</span> <a class="code" href="classvgui__range__map.html#a6b4b6f2ccf708489bce82da2d150a340" title="scale for computed alpha or IR channel mapping">ratio_X_</a>;    <span class="comment">//!&lt; scale for computed alpha or IR channel mapping</span>
<a name="l00165"></a>00165 <span class="comment"></span>};
<a name="l00166"></a>00166 
<a name="l00167"></a><a class="code" href="vgui__range__map_8h.html#abd019a392892570bbff673ba82a7b545">00167</a> <span class="preprocessor">#define VGUI_RANGE_MAP_INSTANTIATE(T) extern &quot;please include vgui/vgui_range_map.txx first&quot;</span>
<a name="l00168"></a>00168 <span class="preprocessor"></span>
<a name="l00169"></a>00169 <span class="preprocessor">#endif //vgui_range_map_h</span>
</pre></div></div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 1 2013 17:32:44 for core/vgui by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
