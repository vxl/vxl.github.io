<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>core/vgui/impl/mfc/vgui_dir_dialog.cxx File Reference</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a>  </div>
  <div class="headertitle">
<div class="title">core/vgui/impl/mfc/vgui_dir_dialog.cxx File Reference</div>  </div>
</div>
<div class="contents">

<p>creates a directory browsing dialog, it allows to choose both directories and files  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;stdafx.h&quot;</code><br/>
<code>#include &lt;Dlgs.h&gt;</code><br/>
<code>#include &lt;imagehlp.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="vgui__dir__dialog_8h_source.html">vgui_dir_dialog.h</a>&quot;</code><br/>
<code>#include &lt;vcl_cstring.h&gt;</code><br/>
<code>#include &lt;vcl_cctype.h&gt;</code><br/>
</div>
<p><a href="vgui__dir__dialog_8cxx_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgui__dir__dialog_8cxx.html#a911fdeeced3dae3622c274d91c1a4e05">IDC_DIR</a>&#160;&#160;&#160;181</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vgui__dir__dialog_8cxx.html#a9ddd042e8e33d3c5d0b6fdf0d2f0709b">IDC_OPEN</a>&#160;&#160;&#160;182</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>creates a directory browsing dialog, it allows to choose both directories and files </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Gamze Tunali, LEMS, Brown University </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>16 Nov 2007</dd></dl>
<p>The CDirDialog class implements a directory selection dialog by deriving from the file selection dialog class (CFileDialog). This dialog has the advantages of the standard file open dialog (resizeable, ability to create/delete directories etc) but is customized for the selection of a directory rather than a file.</p>
<p>USER INTERFACE --------------</p>
<p>For example, the user can double click on a directory name or type it into the edit control to open it in the directory listing display. To say that this is the directory they want the user must click the "Open" button. When the user enters a backslash (\) as the last character in the edit control the display is changed to show the contents of the directory if it exists. The same is done if the user presses the Enter key except that if the directory does not exist the user is asked if they want to create it.</p>
<p>When the user enters other characters and the contents don't end in a backslash then automatic directory name completion is attempted. If the contents of the edit box are the first character(s) of one unique existing directory then the rest of the directory name is added to the end of the edit box. These characters are selected so that the user can type something else and it they will be ignored.</p>
<p>When selecting a directory you would normally not want to see files, but you may on occasion. The normal "Files of Type:" drop down list is available but it has an extra entry "Show Folders Only" that is selected by default. When files are displayed double clicking of them is ignored (unlike the normal File Open dialog). Double-clicking a directory name changes to that directory as normal.</p>
<p>PROGRAMMER INTERFACE --------------------</p>
<p>Add DirDialog.cpp and DirDialog.h to your project. Include DirDialog.h in the source file(s) where you want to use the CDirDialog class.</p>
<p>Create a CDirDialog object using the constructor described below. If necessary you may then modify values in the m_ofn member of the CFileDialog base class (see the Win32 documentation for OPENFILENAME). For example, to change the text that appears in the title bar of the dialog use m_ofn.lpstrTitle.</p>
<p>Call DoModal() to activate the dialog. If DoModal() return IDOK you can then call GetPath() to obtain the name of the directory that the user selected.</p>
<p>CDirDialog::CDirDialog(LPCTSTR lpstrInitialDir = NULL, LPCTSTR lpszFilter = NULL, CWnd* pParentWnd = NULL);</p>
<p>lpstrInitialDir The initial directory. If NULL then the current directory is used. See lpstrInitialDir in the Win32 documentation for OPENFILENAME for more info.</p>
<p>lpszFilter The string pairs that specify the file filters to use. See lpszFilter in the documentation for the CFileDialog constructor for more info. Note that an extra entry is always added that allows the user to hide the display of all files. If NULL is used (the default) then only the "no files" entry and an "all files" entry are provided.</p>
<p>pParentWnd A pointer to the dialog parent window.</p>
<p>virtual int CDirDialog::DoModal()</p>
<p>see CFileDialog::DoModal().</p>
<p>CString CDirDialog::GetPath()</p>
<p>return value The full path name chosen by the user.</p>
<p>Example:</p>
<p>// Called when the Browse button is clicked in CMyDialog void CMyDialog::OnBrowseDir() { if (!UpdateData(TRUE)) // Update current value of m_dir from control return;</p>
<p>CDirDialog dlg(m_dir, "JPEG Files (*.jpg; *.jpeg)|*.jpg;*.jpeg|All Files (*.*)|*.*||", this); dlg.m_ofn.lpstrTitle = "Select Folder to Store Images";</p>
<p>if (dlg.DoModal() == IDOK) { m_dir = dlg.GetPath(); // Store selected directory name back into the control UpdateData(FALSE); } }</p>
<p>INTERNAL DESIGN ---------------</p>
<p>The following changes are made to the controls in the standard file open dialog:</p>
<p>The "Open" button is hidden and replaced with another button (IDC_OPEN). The normal edit control (edt1) where the file name is entered is hidden and replaced by a "subclassed" edit control (IDC_DIR) of class <a class="el" href="classCDirEdit.html">CDirEdit</a> (derived from CEdit). By hiding and replacing these controls we can manipulate the behaviour of the dialog in ways not provided for in any other way. For example, by changing the contents of the hidden edit control (edt1) and simulating a click of the hidden Open button (IDOK) we can force the contents of a directory to be displayed.</p>
<p>An extra entry is added to the file types drop down combo called "Show Folders Only" that causes no files to be displayed. (If no filters are supplied at all by using the default value of NULL, then an "All Files" filter type is also added.) The filter string is a single dot (full-stop) which will match no files.</p>
<p>The new edit control (IDC_DIR) is subclassed so that the contents are monitored and the some keys can be intercepted. When the contents are changed and they end with a backslash the current display is changed to point to the directory entered (if it exists). When return is pressed the directory is also changed, but if it doesn't exist then the user is asked if he wants to create it. The way the directory is changed (ie. the files of that directory are shown in the display) is by putting the directory name into the original edit control (edt1) and simulating a click of the original Open button (IDOK). Directory name completion is also performed as the user types in a directory name.</p>
<p>The IDC_OPEN button is used as a replacement for the IDOK button while still allowing the hidden IDOK button to be used to change the displayed directory.</p>
<p>The CDirDialog class is derived from CFileDialog. The following base class members are overridden:</p>
<ul>
<li>OnInitDone: so that the dialog controls can be reorganized</li>
<li>OnFolderChange: so that when the user clicks on a folder name the edit control can be updated to reflect the name of the currently selected directory</li>
<li>OnFileNameOK: always returns TRUE so that the user can't select files by double-clicking them (this is a DIRECTORY selection dialog after all) </li>
</ul>

<p>Definition in file <a class="el" href="vgui__dir__dialog_8cxx_source.html">vgui_dir_dialog.cxx</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a911fdeeced3dae3622c274d91c1a4e05"></a><!-- doxytag: member="vgui_dir_dialog.cxx::IDC_DIR" ref="a911fdeeced3dae3622c274d91c1a4e05" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IDC_DIR&#160;&#160;&#160;181</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vgui__dir__dialog_8cxx_source.html#l00159">159</a> of file <a class="el" href="vgui__dir__dialog_8cxx_source.html">vgui_dir_dialog.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="a9ddd042e8e33d3c5d0b6fdf0d2f0709b"></a><!-- doxytag: member="vgui_dir_dialog.cxx::IDC_OPEN" ref="a9ddd042e8e33d3c5d0b6fdf0d2f0709b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IDC_OPEN&#160;&#160;&#160;182</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vgui__dir__dialog_8cxx_source.html#l00160">160</a> of file <a class="el" href="vgui__dir__dialog_8cxx_source.html">vgui_dir_dialog.cxx</a>.</p>

</div>
</div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 1 2013 17:32:44 for core/vgui by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
