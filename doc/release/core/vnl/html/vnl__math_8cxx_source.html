<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>core/vnl/vnl_math.cxx Source File</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">core/vnl/vnl_math.cxx</div>  </div>
</div>
<div class="contents">
<a href="vnl__math_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// This is core/vnl/vnl_math.cxx</span>
<a name="l00002"></a>00002 <span class="preprocessor">#ifdef VCL_NEEDS_PRAGMA_INTERFACE</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#pragma implementation</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="comment">//:</span>
<a name="l00006"></a>00006 <span class="comment">// \file</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="preprocessor">#include &quot;<a class="code" href="vnl__math_8h.html" title="Namespace with standard math functions.">vnl_math.h</a>&quot;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;vxl_config.h&gt;</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="preprocessor">#if defined(VCL_VC) || defined(__MINGW32__)</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span><span class="comment">// I don&#39;t think we need this, because &lt;ieeefp.h&gt; is available -- fsm</span>
<a name="l00013"></a>00013 <span class="preprocessor"># include &lt;float.h&gt;</span> <span class="comment">// for &#39;isnan&#39; and &#39;finite&#39;</span>
<a name="l00014"></a>00014 <span class="comment">// # define isnan _isnan</span>
<a name="l00015"></a>00015 <span class="preprocessor"># define finite _finite</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span><span class="preprocessor"># define finitef _finite</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span><span class="preprocessor">#ifndef finitel</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor"># define finitel _finite</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor"># define isnan _isnan</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#elif VXL_IEEEFP_HAS_FINITE</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor"># include &lt;ieeefp.h&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor"># ifndef finitef</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#  define finitef finite</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor"># endif</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor"># ifndef finitel</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span><span class="preprocessor">#  define finitel finite</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="preprocessor"># endif</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span>
<a name="l00030"></a>00030 <span class="preprocessor">#elif VXL_C_MATH_HAS_FINITE</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="preprocessor"># include &lt;math.h&gt;</span> <span class="comment">// dont_vxl_filter: this is *not* supposed to be &lt;cmath&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor"># if !VXL_C_MATH_HAS_FINITEF</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#  define finitef finite</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor"># endif</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor"># if !VXL_C_MATH_HAS_FINITEL</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">#  define finitel finite</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor"># endif</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span>
<a name="l00039"></a>00039 <span class="preprocessor">#elif defined(__hpux)</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="preprocessor"># include &lt;math.h&gt;</span> <span class="comment">// dont_vxl_filter: this is *not* supposed to be &lt;cmath&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor"># define finite _Isfinite</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="preprocessor"># define finitef _Isfinitef</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor"># define finitel _Isfinite</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00045"></a>00045 <span class="preprocessor">#elif defined(SYSV)</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span><span class="comment">// needed on platforms with finite() declared in strange places</span>
<a name="l00047"></a>00047 <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">int</span> finite(<span class="keywordtype">double</span>);
<a name="l00048"></a>00048 <span class="preprocessor"># define finitef finite</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="preprocessor"># define finitel finite</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>
<a name="l00051"></a>00051 <span class="preprocessor">#elif defined(VCL_BORLAND)</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span><span class="preprocessor"># include &lt;math.h&gt;</span> <span class="comment">// dont_vxl_filter: this is *not* supposed to be &lt;cmath&gt;</span>
<a name="l00053"></a>00053 <span class="preprocessor"># include &lt;float.h&gt;</span>
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="preprocessor">#else</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span><span class="preprocessor"># warning finite() is not declared on this platform</span>
<a name="l00057"></a><a class="code" href="vnl__math_8cxx.html#a7ec3115a14bb5419d57ffcc95794ba5e">00057</a> <span class="preprocessor"></span><span class="preprocessor"># define VNL_HAS_NO_FINITE</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span>
<a name="l00060"></a>00060 <span class="preprocessor">#ifdef VCL_SUNPRO_CC_5</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span><span class="preprocessor"># include &lt;math.h&gt;</span> <span class="comment">// dont_vxl_filter: no HUGE_VAL or isnan() in &lt;cmath&gt;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#endif</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span>
<a name="l00064"></a>00064 <span class="comment">// On Mac OS X Tiger in C++ the math.h header defines an inline __isnan</span>
<a name="l00065"></a>00065 <span class="comment">// that gets compiled here into an internal-linkage symbol.  Then at</span>
<a name="l00066"></a>00066 <span class="comment">// link time the relocation entry from libm.dylib confuses the linker</span>
<a name="l00067"></a>00067 <span class="comment">// because it thinks the entry applies to the static version of the</span>
<a name="l00068"></a>00068 <span class="comment">// symbol.  We need to avoid use of the inline version by never</span>
<a name="l00069"></a>00069 <span class="comment">// calling __isnan in C++ code.</span>
<a name="l00070"></a>00070 <span class="preprocessor">#if defined(__APPLE__)</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span><span class="preprocessor"># include &lt;Availability.h&gt;</span>
<a name="l00072"></a>00072 <span class="preprocessor"># if MAC_OS_X_VERSION_MAX_ALLOWED == 1040</span>
<a name="l00073"></a>00073 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;math.h&gt;</span> <span class="comment">// dont_vxl_filter: this is *not* supposed to be &lt;cmath&gt;</span>
<a name="l00074"></a>00074 <span class="preprocessor">#  if VXL_APPLE_HAS_ISNAND</span>
<a name="l00075"></a>00075 <span class="preprocessor"></span><span class="preprocessor">#   define isnan(x) __isnand((double)x)</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span><span class="preprocessor">#  else</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span><span class="preprocessor">#   define isnan(x) __inline_isnand((double)x)</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span><span class="preprocessor"># endif</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span>
<a name="l00082"></a>00082 <span class="comment">//--------------------------------------------------------------------------------</span>
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="preprocessor">#if !VCL_STATIC_CONST_INIT_FLOAT_NO_DEFN</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span>
<a name="l00086"></a>00086 <span class="comment">//: constants</span>
<a name="l00087"></a>00087 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::e                <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 2.71828182845904523540 );
<a name="l00088"></a>00088 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::log2e            <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 1.44269504088896340740 );
<a name="l00089"></a>00089 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::log10e           <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 0.43429448190325182765 );
<a name="l00090"></a>00090 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::ln2              <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 0.69314718055994530942 );
<a name="l00091"></a>00091 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::ln10             <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 2.30258509299404568402 );
<a name="l00092"></a>00092 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::pi               <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 3.14159265358979323846 );
<a name="l00093"></a>00093 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::pi_over_2        <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 1.57079632679489661923 );
<a name="l00094"></a>00094 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::pi_over_4        <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 0.78539816339744830962 );
<a name="l00095"></a>00095 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::pi_over_180      <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 0.01745329251994329577 );
<a name="l00096"></a>00096 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::one_over_pi      <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 0.31830988618379067154 );
<a name="l00097"></a>00097 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::two_over_pi      <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 0.63661977236758134308 );
<a name="l00098"></a>00098 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::deg_per_rad      <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 57.2957795130823208772 );
<a name="l00099"></a>00099 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::two_over_sqrtpi  <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 1.12837916709551257390 );
<a name="l00100"></a>00100 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::one_over_sqrt2pi <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 0.39894228040143267794 );
<a name="l00101"></a>00101 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::sqrt2            <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 1.41421356237309504880 );
<a name="l00102"></a>00102 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::sqrt1_2          <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 0.70710678118654752440 );
<a name="l00103"></a>00103 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::sqrt1_3          <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 0.57735026918962573106 );
<a name="l00104"></a>00104 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::euler            <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 0.57721566490153286061 );
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 <span class="comment">//: IEEE double machine precision</span>
<a name="l00107"></a>00107 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::eps              <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 2.2204460492503131e-16 );
<a name="l00108"></a>00108 <span class="keyword">const</span> <span class="keywordtype">double</span> vnl_math::sqrteps          <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 1.4901161193847660e-08 );
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 <span class="comment">//: IEEE single machine precision</span>
<a name="l00111"></a>00111 <span class="keyword">const</span> <span class="keywordtype">float</span> vnl_math::float_eps         <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 1.1920928960e-7f );
<a name="l00112"></a>00112 <span class="keyword">const</span> <span class="keywordtype">float</span> vnl_math::float_sqrteps     <a class="code" href="vnl__math_8cxx.html#acf2ed0562a96e3c03d458d6f892d5894" title="constants.">VCL_STATIC_CONST_INIT_FLOAT_DEFN</a>( 3.4526698307e-4f );
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="preprocessor">#endif</span>
<a name="l00115"></a>00115 <span class="preprocessor"></span>
<a name="l00116"></a>00116 <span class="comment">//--------------------------------------------------------------------------------</span>
<a name="l00117"></a>00117 <span class="comment">//: Return true iff x is &quot;Not a Number&quot;</span>
<a name="l00118"></a>00118 <span class="preprocessor">#if VXL_CXX11</span>
<a name="l00119"></a>00119 <span class="preprocessor"></span><span class="comment">//: Return true iff x is &quot;Not a Number&quot;</span>
<a name="l00120"></a>00120 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(<span class="keywordtype">float</span> x) { <span class="keywordflow">return</span> std::isnan(x); }
<a name="l00121"></a>00121 <span class="comment">//: Return true iff x is &quot;Not a Number&quot;</span>
<a name="l00122"></a>00122 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(<span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> std::isnan(x); }
<a name="l00123"></a>00123 <span class="comment">//: Return true iff x is &quot;Not a Number&quot;</span>
<a name="l00124"></a>00124 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(<span class="keywordtype">long</span> <span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> std::isnan(x); }
<a name="l00125"></a>00125 <span class="preprocessor">#elif defined(VCL_ICC)</span>
<a name="l00126"></a>00126 <span class="preprocessor"></span><span class="preprocessor">#include &lt;mathimf.h&gt;</span> <span class="comment">// defines isnanf, isnan, and isnanl</span>
<a name="l00127"></a>00127 <span class="comment">//: Return true iff x is &quot;Not a Number&quot;</span>
<a name="l00128"></a>00128 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(<span class="keywordtype">float</span> x) { <span class="keywordflow">return</span> isnanf(x); }
<a name="l00129"></a>00129 <span class="comment">//: Return true iff x is &quot;Not a Number&quot;</span>
<a name="l00130"></a>00130 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(<span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> isnan(x); }
<a name="l00131"></a>00131 <span class="comment">//: Return true iff x is &quot;Not a Number&quot;</span>
<a name="l00132"></a>00132 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(<span class="keywordtype">long</span> <span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> isnanl(x); }
<a name="l00133"></a>00133 <span class="preprocessor">#elif defined(VCL_BORLAND)</span>
<a name="l00134"></a>00134 <span class="preprocessor"></span><span class="comment">//: Return true iff x is &quot;Not a Number&quot;</span>
<a name="l00135"></a>00135 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(<span class="keywordtype">float</span> x) { <span class="keywordflow">return</span> _isnan(x); }
<a name="l00136"></a>00136 <span class="comment">//: Return true iff x is &quot;Not a Number&quot;</span>
<a name="l00137"></a>00137 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(<span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> _isnan(x); }
<a name="l00138"></a>00138 <span class="comment">//: Return true iff x is &quot;Not a Number&quot;</span>
<a name="l00139"></a>00139 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(<span class="keywordtype">long</span> <span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> _isnanl(x); }
<a name="l00140"></a>00140 <span class="preprocessor">#elif !defined(VNL_HAS_NO_FINITE) &amp;&amp; !defined(VCL_SGI_CC_7) &amp;&amp; !defined(__alpha__) &amp;&amp; !defined(VCL_WIN32)</span>
<a name="l00141"></a>00141 <span class="preprocessor"></span><span class="comment">//: Return true iff x is &quot;Not a Number&quot;</span>
<a name="l00142"></a>00142 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(<span class="keywordtype">float</span> x) { <span class="keywordflow">return</span> x != x; } <span class="comment">// causes &quot;floating exception&quot; on alpha &amp; sgi</span>
<a name="l00143"></a>00143 <span class="comment">//: Return true iff x is &quot;Not a Number&quot;</span>
<a name="l00144"></a>00144 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(<span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> x != x; }
<a name="l00145"></a>00145 <span class="comment">//: Return true iff x is &quot;Not a Number&quot;</span>
<a name="l00146"></a>00146 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(<span class="keywordtype">long</span> <span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> x != x; }
<a name="l00147"></a>00147 <span class="preprocessor">#else</span>
<a name="l00148"></a>00148 <span class="preprocessor"></span><span class="comment">// Auxiliary function to simplify notation</span>
<a name="l00149"></a>00149 <span class="preprocessor"># ifndef DEBUG</span>
<a name="l00150"></a>00150 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bMp(<span class="keywordtype">void</span>*x,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y,<span class="keywordtype">int</span> p=0){<span class="keywordflow">return</span> ((((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>*)x)[p])&amp;y);}
<a name="l00151"></a>00151 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> bMe(<span class="keywordtype">void</span>*x,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y,<span class="keywordtype">int</span> p=0){<span class="keywordflow">return</span> ((((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>*)x)[p])&amp;y)==y;}
<a name="l00152"></a>00152 <span class="preprocessor"># else</span>
<a name="l00153"></a>00153 <span class="preprocessor"></span><span class="preprocessor"># include &lt;vcl_iostream.h&gt;</span>
<a name="l00154"></a>00154 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bMp(<span class="keywordtype">void</span>* x, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> p=0)
<a name="l00155"></a>00155 {
<a name="l00156"></a>00156   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="vnl__vector_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>=(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)x;
<a name="l00157"></a>00157   vcl_cout&lt;&lt;int(v[4*p])&lt;&lt;<span class="charliteral">&#39; &#39;</span>&lt;&lt;int(v[4*p+1])&lt;&lt;<span class="charliteral">&#39; &#39;</span>&lt;&lt;int(v[4*p+2])&lt;&lt;<span class="charliteral">&#39; &#39;</span>&lt;&lt;int(v[4*p+3])&lt;&lt;<span class="stringliteral">&quot; &amp; &quot;</span>;
<a name="l00158"></a>00158   v=(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)(&amp;y);
<a name="l00159"></a>00159   vcl_cout&lt;&lt;int(v[0])&lt;&lt;<span class="charliteral">&#39; &#39;</span>&lt;&lt;int(v[1])&lt;&lt;<span class="charliteral">&#39; &#39;</span>&lt;&lt;int(v[2])&lt;&lt;<span class="charliteral">&#39; &#39;</span>&lt;&lt;int(v[3])&lt;&lt;<span class="stringliteral">&quot; = &quot;</span>;
<a name="l00160"></a>00160   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> z = ((((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>*)x)[p]) &amp; y);
<a name="l00161"></a>00161   v=(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)(&amp;z);
<a name="l00162"></a>00162   vcl_cout&lt;&lt;int(v[0])&lt;&lt;<span class="charliteral">&#39; &#39;</span>&lt;&lt;int(v[1])&lt;&lt;<span class="charliteral">&#39; &#39;</span>&lt;&lt;int(v[2])&lt;&lt;<span class="charliteral">&#39; &#39;</span>&lt;&lt;int(v[3]);
<a name="l00163"></a>00163   <span class="keywordflow">if</span> (z == y) vcl_cout&lt;&lt;<span class="stringliteral">&quot; ==&quot;</span>;
<a name="l00164"></a>00164   vcl_cout &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00165"></a>00165   <span class="keywordflow">return</span> z;
<a name="l00166"></a>00166 }
<a name="l00167"></a>00167 
<a name="l00168"></a>00168 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> bMe(<span class="keywordtype">void</span>* x, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> p=0) { <span class="keywordflow">return</span> bMp(x,y,p) == y; }
<a name="l00169"></a>00169 <span class="preprocessor"># endif</span>
<a name="l00170"></a>00170 <span class="preprocessor"></span><span class="preprocessor"># if VXL_BIG_ENDIAN</span>
<a name="l00171"></a>00171 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> sz_f = 0;
<a name="l00172"></a>00172 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> sz_d = 0;
<a name="l00173"></a>00173 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> sz_l = 0;
<a name="l00174"></a>00174 <span class="preprocessor"># else</span>
<a name="l00175"></a>00175 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> sz_f = <span class="keyword">sizeof</span>(float)/<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) -1;
<a name="l00176"></a>00176 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> sz_d = <span class="keyword">sizeof</span>(double)/<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) -1;
<a name="l00177"></a>00177 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> sz_l = <span class="keyword">sizeof</span>(<span class="keywordtype">long</span> double)/<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) -1;
<a name="l00178"></a>00178 <span class="preprocessor"># endif</span>
<a name="l00179"></a>00179 <span class="preprocessor"></span><span class="comment">// Assume IEEE floating point number representation</span>
<a name="l00180"></a><a class="code" href="vnl__math_8h.html#a5ae09f86b6b2db963d9f2d8b0842180d">00180</a> <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>( <span class="keywordtype">float</span> x){<span class="keywordflow">return</span> bMe(&amp;x,0x7f800000L,sz_f)&amp;&amp;bMp(&amp;x,0x007fffffL,sz_f);}
<a name="l00181"></a><a class="code" href="vnl__math_8h.html#a907f1b266058fc0bf19e3bea4806dfa4">00181</a> <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(<span class="keywordtype">double</span> x){<span class="keywordflow">return</span> bMe(&amp;x,0x7ff00000L,sz_d)&amp;&amp;(bMp(&amp;x,0x000fffffL,sz_d)||bMp(&amp;x,0xffffffffL,1-sz_d));}
<a name="l00182"></a><a class="code" href="vnl__math_8h.html#a55cdf9ed92cb6985604e13aa1c617000">00182</a> <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(<span class="keywordtype">long</span> <span class="keywordtype">double</span> x)
<a name="l00183"></a>00183 {
<a name="l00184"></a>00184   <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(<span class="keywordtype">long</span> <span class="keywordtype">double</span>) == 8) <span class="keywordflow">return</span> bMe(&amp;x,0x7ff00000L,sz_l) &amp;&amp; (bMp(&amp;x,0x000fffffL,sz_l)||bMp(&amp;x,0xffffffffL,1-sz_d));
<a name="l00185"></a>00185   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(<span class="keywordtype">long</span> <span class="keywordtype">double</span>) &lt;= 12) <span class="comment">// This code doesn&#39;t properly check the less significant</span>
<a name="l00186"></a>00186                                       <span class="comment">// bytes for non-zero-ness to distinguish inf from nan</span>
<a name="l00187"></a>00187                                       <span class="comment">// see http://babbage.cs.qc.cuny.edu/IEEE-754/References.xhtml#tables</span>
<a name="l00188"></a>00188 # <span class="keywordflow">if</span> defined LDBL_MANT_DIG &amp;&amp; LDBL_MANT_DIG&lt;=53
<a name="l00189"></a>00189     <span class="keywordflow">return</span> bMe(&amp;x,0x4001ffffL,sz_l) &amp;&amp; bMp(&amp;x,0x40000000,sz_l-4);
<a name="l00190"></a>00190 <span class="preprocessor"># else</span>
<a name="l00191"></a>00191 <span class="preprocessor"></span>    <span class="keywordflow">return</span> bMe(&amp;x,0x7ff00000L,sz_l) &amp;&amp; bMp(&amp;x,0x000fffffL,sz_l-4);
<a name="l00192"></a>00192 <span class="preprocessor"># endif</span>
<a name="l00193"></a>00193 <span class="preprocessor"></span>  <span class="keywordflow">else</span>
<a name="l00194"></a>00194     <span class="keywordflow">return</span> bMe(&amp;x,0x7ff00000L,sz_l) &amp;&amp; bMp(&amp;x,0x0000ffffL,sz_l);
<a name="l00195"></a>00195 }
<a name="l00196"></a>00196 <span class="preprocessor">#endif</span>
<a name="l00197"></a>00197 <span class="preprocessor"></span>
<a name="l00198"></a>00198 <span class="comment">// fsm</span>
<a name="l00199"></a>00199 <span class="comment">// On linux noshared builds, with optimisation on, calling &#39;finite&#39; within the</span>
<a name="l00200"></a>00200 <span class="comment">// scope of vnl_math causes vnl_math_isinf to be called. This blows the stack.</span>
<a name="l00201"></a>00201 <span class="comment">// Plausible theory : &#39;finite&#39; is a preprocessor macro, defined in terms of a</span>
<a name="l00202"></a>00202 <span class="comment">// macro called &#39;isinf&#39;.</span>
<a name="l00203"></a>00203 <span class="comment">// Doesn&#39;t seem to be an issue with ICC 8</span>
<a name="l00204"></a>00204 <span class="preprocessor">#if defined(isinf) &amp;&amp; !defined(VCL_ICC_8)</span>
<a name="l00205"></a>00205 <span class="preprocessor"></span><span class="preprocessor"># if defined(__GNUC__) || defined(VCL_METRO_WERKS) || defined(__INTEL_COMPILER)</span>
<a name="l00206"></a>00206 <span class="preprocessor"></span><span class="comment">// I do not know if MW accepts #warning. Comment out the #undef if not.</span>
<a name="l00207"></a>00207 <span class="preprocessor">#  warning macro isinf is defined</span>
<a name="l00208"></a>00208 <span class="preprocessor"></span><span class="preprocessor">#  undef isinf</span>
<a name="l00209"></a>00209 <span class="preprocessor"></span><span class="preprocessor"># else</span>
<a name="l00210"></a>00210 <span class="preprocessor"></span><span class="comment">// do not fail silently</span>
<a name="l00211"></a>00211 <span class="preprocessor">#  error macro isinf is defined</span>
<a name="l00212"></a>00212 <span class="preprocessor"></span><span class="preprocessor"># endif</span>
<a name="l00213"></a>00213 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00214"></a>00214 <span class="preprocessor"></span>
<a name="l00215"></a>00215 <span class="preprocessor">#if VXL_CXX11</span>
<a name="l00216"></a>00216 <span class="preprocessor"></span><span class="comment">//: Return true if x is neither NaN nor Inf.</span>
<a name="l00217"></a>00217 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#a09f42aaef055705440b4d0203f78607c">vnl_math_isfinite</a>(<span class="keywordtype">float</span> x) { <span class="keywordflow">return</span> std::isfinite(x) != 0; }
<a name="l00218"></a>00218 <span class="comment">//: Return true if x is neither NaN nor Inf.</span>
<a name="l00219"></a>00219 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#a09f42aaef055705440b4d0203f78607c">vnl_math_isfinite</a>(<span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> std::isfinite(x) != 0; }
<a name="l00220"></a>00220 <span class="comment">//: Return true if x is neither NaN nor Inf.</span>
<a name="l00221"></a>00221 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#a09f42aaef055705440b4d0203f78607c">vnl_math_isfinite</a>(<span class="keywordtype">long</span> <span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> std::isfinite(x) != 0; }
<a name="l00222"></a>00222 <span class="preprocessor">#elif defined(VCL_BORLAND)</span>
<a name="l00223"></a>00223 <span class="preprocessor"></span><span class="comment">//: Return true if x is neither NaN nor Inf.</span>
<a name="l00224"></a>00224 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#a09f42aaef055705440b4d0203f78607c">vnl_math_isfinite</a>(<span class="keywordtype">float</span> x) { <span class="keywordflow">return</span> _finite(x) != 0; }
<a name="l00225"></a>00225 <span class="comment">//: Return true if x is neither NaN nor Inf.</span>
<a name="l00226"></a>00226 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#a09f42aaef055705440b4d0203f78607c">vnl_math_isfinite</a>(<span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> _finite(x) != 0; }
<a name="l00227"></a>00227 <span class="comment">//: Return true if x is neither NaN nor Inf.</span>
<a name="l00228"></a>00228 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#a09f42aaef055705440b4d0203f78607c">vnl_math_isfinite</a>(<span class="keywordtype">long</span> <span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> _finitel(x) != 0 &amp;&amp; !_isnanl(x); }
<a name="l00229"></a>00229 <span class="preprocessor">#elif !defined(VNL_HAS_NO_FINITE)</span>
<a name="l00230"></a>00230 <span class="preprocessor"></span><span class="comment">//: Return true if x is neither NaN nor Inf.</span>
<a name="l00231"></a>00231 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#a09f42aaef055705440b4d0203f78607c">vnl_math_isfinite</a>(<span class="keywordtype">float</span> x) { <span class="keywordflow">return</span> finitef(x) != 0; }
<a name="l00232"></a>00232 <span class="comment">//: Return true if x is neither NaN nor Inf.</span>
<a name="l00233"></a>00233 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#a09f42aaef055705440b4d0203f78607c">vnl_math_isfinite</a>(<span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> finite(x) != 0; }
<a name="l00234"></a>00234 <span class="comment">//: Return true if x is neither NaN nor Inf.</span>
<a name="l00235"></a>00235 <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#a09f42aaef055705440b4d0203f78607c">vnl_math_isfinite</a>(<span class="keywordtype">long</span> <span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> finitel(x) != 0; }
<a name="l00236"></a>00236 <span class="preprocessor">#else</span>
<a name="l00237"></a>00237 <span class="preprocessor"></span><span class="comment">// Assume IEEE floating point number representation</span>
<a name="l00238"></a><a class="code" href="vnl__math_8h.html#accd8fb21783744d942db11082fd31f9b">00238</a> <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#a09f42aaef055705440b4d0203f78607c">vnl_math_isfinite</a>(<span class="keywordtype">float</span> x) { <span class="keywordflow">return</span> !bMe(&amp;x,0x7f800000L,sz_f) &amp;&amp; bMp(&amp;x,0x7fffffffL,sz_f) != 0x7f7fffffL; }
<a name="l00239"></a><a class="code" href="vnl__math_8h.html#a26f511c9d77bfa33c604ff1cf7d86df0">00239</a> <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#a09f42aaef055705440b4d0203f78607c">vnl_math_isfinite</a>(<span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> !bMe(&amp;x,0x7ff00000L,sz_d); }
<a name="l00240"></a><a class="code" href="vnl__math_8h.html#a971debeedda60d4408659ef4be541963">00240</a> <span class="keywordtype">bool</span> <a class="code" href="classvnl__finite__int.html#a09f42aaef055705440b4d0203f78607c">vnl_math_isfinite</a>(<span class="keywordtype">long</span> <span class="keywordtype">double</span> x)
<a name="l00241"></a>00241 {
<a name="l00242"></a>00242   <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(<span class="keywordtype">long</span> <span class="keywordtype">double</span>) == 8) <span class="keywordflow">return</span> !bMe(&amp;x,0x7ff00000L,sz_l);
<a name="l00243"></a>00243   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(<span class="keywordtype">long</span> <span class="keywordtype">double</span>) &lt;= 12) <span class="keywordflow">return</span> !bMe(&amp;x,0xbfff7fffL,sz_l) &amp;&amp; !bMe(&amp;x,0x4001ffffL,sz_l);
<a name="l00244"></a>00244   <span class="keywordflow">else</span> <span class="keywordflow">return</span> !bMe(&amp;x,0x7ff70000L,sz_l);
<a name="l00245"></a>00245 }
<a name="l00246"></a>00246 <span class="preprocessor">#endif</span>
<a name="l00247"></a>00247 <span class="preprocessor"></span>
<a name="l00248"></a>00248 
<a name="l00249"></a>00249 <span class="preprocessor">#if VXL_CXX11</span>
<a name="l00250"></a>00250 <span class="preprocessor"></span><span class="comment">//: Return true if x is inf</span>
<a name="l00251"></a>00251 <span class="keywordtype">bool</span> <a class="code" href="vnl__math_8cxx.html#a950306d8605191be1c2727067524aeb6">vnl_math_isinf</a>(<span class="keywordtype">float</span> x) { <span class="keywordflow">return</span> std::isinf(x) != 0; }
<a name="l00252"></a>00252 <span class="comment">//: Return true if x is inf</span>
<a name="l00253"></a>00253 <span class="keywordtype">bool</span> <a class="code" href="vnl__math_8cxx.html#a950306d8605191be1c2727067524aeb6">vnl_math_isinf</a>(<span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> std::isinf(x) != 0; }
<a name="l00254"></a>00254 <span class="comment">//: Return true if x is inf</span>
<a name="l00255"></a>00255 <span class="keywordtype">bool</span> <a class="code" href="vnl__math_8cxx.html#a950306d8605191be1c2727067524aeb6">vnl_math_isinf</a>(<span class="keywordtype">long</span> <span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> std::isinf(x) != 0; }
<a name="l00256"></a>00256 <span class="preprocessor">#elif defined(VCL_BORLAND)</span>
<a name="l00257"></a>00257 <span class="preprocessor"></span><span class="comment">//: Return true if x is inf</span>
<a name="l00258"></a>00258 <span class="keywordtype">bool</span> <a class="code" href="vnl__math_8cxx.html#a950306d8605191be1c2727067524aeb6">vnl_math_isinf</a>(<span class="keywordtype">float</span> x) { <span class="keywordflow">return</span> !_finite(x) &amp;&amp; !<a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(x); }
<a name="l00259"></a>00259 <span class="comment">//: Return true if x is inf</span>
<a name="l00260"></a>00260 <span class="keywordtype">bool</span> <a class="code" href="vnl__math_8cxx.html#a950306d8605191be1c2727067524aeb6">vnl_math_isinf</a>(<span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> !_finite(x) &amp;&amp; !<a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(x); }
<a name="l00261"></a>00261 <span class="comment">//: Return true if x is inf</span>
<a name="l00262"></a>00262 <span class="keywordtype">bool</span> <a class="code" href="vnl__math_8cxx.html#a950306d8605191be1c2727067524aeb6">vnl_math_isinf</a>(<span class="keywordtype">long</span> <span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> !_finitel(x) &amp;&amp; !<a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(x); }
<a name="l00263"></a>00263 <span class="preprocessor">#elif !defined(VNL_HAS_NO_FINITE)</span>
<a name="l00264"></a>00264 <span class="preprocessor"></span><span class="comment">//: Return true if x is inf</span>
<a name="l00265"></a>00265 <span class="keywordtype">bool</span> <a class="code" href="vnl__math_8cxx.html#a950306d8605191be1c2727067524aeb6">vnl_math_isinf</a>(<span class="keywordtype">float</span> x) { <span class="keywordflow">return</span> !finitef(x) &amp;&amp; !<a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(x); }
<a name="l00266"></a>00266 <span class="comment">//: Return true if x is inf</span>
<a name="l00267"></a>00267 <span class="keywordtype">bool</span> <a class="code" href="vnl__math_8cxx.html#a950306d8605191be1c2727067524aeb6">vnl_math_isinf</a>(<span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> !finite(x) &amp;&amp; !<a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(x); }
<a name="l00268"></a>00268 <span class="comment">//: Return true if x is inf</span>
<a name="l00269"></a>00269 <span class="keywordtype">bool</span> <a class="code" href="vnl__math_8cxx.html#a950306d8605191be1c2727067524aeb6">vnl_math_isinf</a>(<span class="keywordtype">long</span> <span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> !finitel(x) &amp;&amp; !<a class="code" href="classvnl__finite__int.html#ab1a38357af54e1280a692f27152637e9">vnl_math_isnan</a>(x); }
<a name="l00270"></a>00270 <span class="preprocessor">#else</span>
<a name="l00271"></a>00271 <span class="preprocessor"></span><span class="comment">// Assume IEEE floating point number representation</span>
<a name="l00272"></a><a class="code" href="vnl__math_8h.html#a3d279ebc54dd3c5c70f0df824da84711">00272</a> <span class="keywordtype">bool</span> <a class="code" href="vnl__math_8cxx.html#a950306d8605191be1c2727067524aeb6">vnl_math_isinf</a>(<span class="keywordtype">float</span> x) {<span class="keywordflow">return</span>(bMe(&amp;x,0x7f800000L,sz_f)&amp;&amp;!bMp(&amp;x,0x007fffffL,sz_f))||bMp(&amp;x,0x7fffffffL,sz_f)==0x7f7fffffL;}
<a name="l00273"></a><a class="code" href="vnl__math_8h.html#ad5893fbbc9f7a790d5a118538133e3b6">00273</a> <span class="keywordtype">bool</span> <a class="code" href="vnl__math_8cxx.html#a950306d8605191be1c2727067524aeb6">vnl_math_isinf</a>(<span class="keywordtype">double</span> x) { <span class="keywordflow">return</span> bMe(&amp;x,0x7ff00000L,sz_d) &amp;&amp; !bMp(&amp;x,0x000fffffL,sz_d); }
<a name="l00274"></a><a class="code" href="vnl__math_8h.html#a8c883236d93a953765f809cd4e2e73dd">00274</a> <span class="keywordtype">bool</span> <a class="code" href="vnl__math_8cxx.html#a950306d8605191be1c2727067524aeb6">vnl_math_isinf</a>(<span class="keywordtype">long</span> <span class="keywordtype">double</span> x)
<a name="l00275"></a>00275 {
<a name="l00276"></a>00276   <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(<span class="keywordtype">long</span> <span class="keywordtype">double</span>) == 8) <span class="keywordflow">return</span> bMe(&amp;x,0x7ff00000L,sz_l) &amp;&amp; !bMp(&amp;x,0x000fffffL,sz_l);
<a name="l00277"></a>00277   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(<span class="keywordtype">long</span> <span class="keywordtype">double</span>) &lt;= 12) <span class="keywordflow">return</span> (bMe(&amp;x,0xbfff7fffL,sz_l)||bMe(&amp;x,0x4001ffffL,sz_l))&amp;&amp;!bMp(&amp;x,0x40000000,sz_l-4);
<a name="l00278"></a>00278   <span class="keywordflow">else</span> <span class="keywordflow">return</span> bMe(&amp;x,0x7ff70000L,sz_l) &amp;&amp; !bMp(&amp;x,0x0008ffffL,sz_l);
<a name="l00279"></a>00279 }
<a name="l00280"></a>00280 <span class="preprocessor">#endif</span>
<a name="l00281"></a>00281 <span class="preprocessor"></span>
<a name="l00282"></a>00282 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00283"></a>00283 
<a name="l00284"></a>00284 <span class="comment">//: Type-accessible infinities for use in templates.</span>
<a name="l00285"></a>00285 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; T <a class="code" href="vnl__math_8cxx.html#af40afb0f3171a0e40085d9e63584ea0a" title="Type-accessible infinities for use in templates.">vnl_huge_val</a>(T);
<a name="l00286"></a>00286 <span class="preprocessor">#ifndef VCL_ICC_81</span>
<a name="l00287"></a><a class="code" href="vnl__math_8h.html#a3828f0170220ac1f3099415747020e0a">00287</a> <span class="preprocessor"></span><span class="keywordtype">double</span> <a class="code" href="vnl__math_8cxx.html#af40afb0f3171a0e40085d9e63584ea0a" title="Type-accessible infinities for use in templates.">vnl_huge_val</a>(<span class="keywordtype">double</span>) { <span class="keywordflow">return</span> HUGE_VAL; }
<a name="l00288"></a><a class="code" href="vnl__math_8h.html#a1a2d6c36a695fb0567751d776493947c">00288</a> <span class="keywordtype">float</span>  <a class="code" href="vnl__math_8cxx.html#af40afb0f3171a0e40085d9e63584ea0a" title="Type-accessible infinities for use in templates.">vnl_huge_val</a>(<span class="keywordtype">float</span>)  { <span class="keywordflow">return</span> (<span class="keywordtype">float</span>)HUGE_VAL; }
<a name="l00289"></a>00289 <span class="preprocessor">#else</span>
<a name="l00290"></a>00290 <span class="preprocessor"></span><span class="comment">// workaround ICC warning that 0x1.0p2047 cannot be represented exactly.</span>
<a name="l00291"></a>00291 <span class="keywordtype">double</span> <a class="code" href="vnl__math_8cxx.html#af40afb0f3171a0e40085d9e63584ea0a" title="Type-accessible infinities for use in templates.">vnl_huge_val</a>(<span class="keywordtype">double</span>) { <span class="keywordflow">return</span> <span class="comment">// 2^2047</span>
<a name="l00292"></a>00292 16158503035655503650357438344334975980222051334857742016065172713762\
<a name="l00293"></a>00293 32756943394544659860070576145673184435898046094900974705977957524546\
<a name="l00294"></a>00294 05475440761932241415603154386836504980458750988751948260533980288191\
<a name="l00295"></a>00295 92033784138396109321309878080919047169238085235290822926018152521443\
<a name="l00296"></a>00296 78794577053290430377619956196519276095716669483417121034248739328228\
<a name="l00297"></a>00297 47474280880176631610290389028296655130963542301570751292964320885583\
<a name="l00298"></a>00298 62971801859230928678799175576150822952201848806616643615613562842355\
<a name="l00299"></a>00299 41010486257855086346566173483927129032834896752299863417649931910776\
<a name="l00300"></a>00300 25831947186677718010677166148023226592393024760740967779268055297981\
<a name="l00301"></a>00301 15328.0; }
<a name="l00302"></a>00302 <span class="keywordtype">float</span>  <a class="code" href="vnl__math_8cxx.html#af40afb0f3171a0e40085d9e63584ea0a" title="Type-accessible infinities for use in templates.">vnl_huge_val</a>(<span class="keywordtype">float</span>)  { <span class="keywordflow">return</span> <span class="comment">// 2^255</span>
<a name="l00303"></a>00303 57896044618658097711785492504343953926634992332820282019728792003956\
<a name="l00304"></a>00304 564819968.0f; }
<a name="l00305"></a>00305 <span class="preprocessor">#endif</span>
<a name="l00306"></a>00306 <span class="preprocessor"></span><span class="preprocessor">#ifdef _INT_64BIT_</span>
<a name="l00307"></a>00307 <span class="preprocessor"></span><span class="keywordtype">long</span> <span class="keywordtype">int</span> <a class="code" href="vnl__math_8cxx.html#af40afb0f3171a0e40085d9e63584ea0a" title="Type-accessible infinities for use in templates.">vnl_huge_val</a>(<span class="keywordtype">long</span> <span class="keywordtype">int</span>) { <span class="keywordflow">return</span> 0x7fffffffffffffffL; }
<a name="l00308"></a>00308 <span class="keywordtype">int</span>    <a class="code" href="vnl__math_8cxx.html#af40afb0f3171a0e40085d9e63584ea0a" title="Type-accessible infinities for use in templates.">vnl_huge_val</a>(<span class="keywordtype">int</span>)    { <span class="keywordflow">return</span> 0x7fffffffffffffffL; }
<a name="l00309"></a>00309 <span class="preprocessor">#else</span>
<a name="l00310"></a><a class="code" href="vnl__math_8h.html#a69a8288025ab8d850c43e7114c6bc87f">00310</a> <span class="preprocessor"></span><span class="keywordtype">int</span>    <a class="code" href="vnl__math_8cxx.html#af40afb0f3171a0e40085d9e63584ea0a" title="Type-accessible infinities for use in templates.">vnl_huge_val</a>(<span class="keywordtype">int</span>)    { <span class="keywordflow">return</span> 0x7fffffff; }
<a name="l00311"></a>00311 <span class="preprocessor">#endif</span>
<a name="l00312"></a><a class="code" href="vnl__math_8h.html#a55a6919da6939848e785aff34de37a18">00312</a> <span class="preprocessor"></span><span class="keywordtype">short</span>  <a class="code" href="vnl__math_8cxx.html#af40afb0f3171a0e40085d9e63584ea0a" title="Type-accessible infinities for use in templates.">vnl_huge_val</a>(<span class="keywordtype">short</span>)  { <span class="keywordflow">return</span> 0x7fff; }
<a name="l00313"></a><a class="code" href="vnl__math_8h.html#a87de3b9ee25136a806e73ed9dbc07af8">00313</a> <span class="keywordtype">char</span>   <a class="code" href="vnl__math_8cxx.html#af40afb0f3171a0e40085d9e63584ea0a" title="Type-accessible infinities for use in templates.">vnl_huge_val</a>(<span class="keywordtype">char</span>)   { <span class="keywordflow">return</span> 0x7f; }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00317"></a><a class="code" href="classvnl__math.html#a081623fe3a0f6c115cfbfe834c9157a3">00317</a> <span class="keywordtype">double</span> <a class="code" href="classvnl__math.html#a081623fe3a0f6c115cfbfe834c9157a3" title="Convert an angle to [0, 2Pi) range.">vnl_math::angle_0_to_2pi</a>(<span class="keywordtype">double</span> <a class="code" href="classvnl__vector__fixed.html#ab3b28cc70b59c48b16edfc82b82b9f64">angle</a>)
<a name="l00318"></a>00318 {
<a name="l00319"></a>00319   <span class="keywordtype">double</span> a;
<a name="l00320"></a>00320   <span class="keywordflow">if</span> (angle&gt;=2*vnl_math::pi)
<a name="l00321"></a>00321     a = vcl_fmod (angle,vnl_math::pi*2);
<a name="l00322"></a>00322   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (angle &lt; 0)
<a name="l00323"></a>00323     a = (2*vnl_math::pi+ vcl_fmod (angle,2*vnl_math::pi));
<a name="l00324"></a>00324   <span class="keywordflow">else</span>
<a name="l00325"></a>00325     a= <a class="code" href="vnl__vector_8h.html#a5a00b4b08c55221b747c94325897be7c">angle</a>;
<a name="l00326"></a>00326 
<a name="l00327"></a>00327   <span class="comment">// added by Nhon: these two lines of code is to fix the bug when</span>
<a name="l00328"></a>00328   <span class="comment">// angle = -1.1721201390607859e-016</span>
<a name="l00329"></a>00329   <span class="comment">// then after all the computation, we get</span>
<a name="l00330"></a>00330   <span class="comment">// a = 6.2831853071795862 == 2*vnl_math::pi !!!!!!!</span>
<a name="l00331"></a>00331   <span class="comment">// this situation can happen is when a is very close to zero.</span>
<a name="l00332"></a>00332 
<a name="l00333"></a>00333   <span class="keywordflow">if</span> (!(a&gt;=0 &amp;&amp; a&lt;2*vnl_math::pi)) {
<a name="l00334"></a>00334     a = 0;
<a name="l00335"></a>00335   }
<a name="l00336"></a>00336   <span class="keywordflow">return</span> a;
<a name="l00337"></a>00337 }
</pre></div></div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 1 2013 17:31:01 for core/vnl by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
