<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>core/vil/file_formats/vil_geotiff_header.cxx Source File</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">core/vil/file_formats/vil_geotiff_header.cxx</div>  </div>
</div>
<div class="contents">
<a href="vil__geotiff__header_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &quot;<a class="code" href="vil__geotiff__header_8h.html" title="A header structure for geotiff files.">vil_geotiff_header.h</a>&quot;</span>
<a name="l00002"></a>00002 <span class="comment">//:</span>
<a name="l00003"></a>00003 <span class="comment">// \file</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;vcl_cassert.h&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;vcl_cstdlib.h&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;vcl_iostream.h&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;geo_tiffp.h&gt;</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;geotiffio.h&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;geovalues.h&gt;</span>
<a name="l00010"></a>00010 
<a name="l00011"></a><a class="code" href="classvil__geotiff__header.html#a723e1c2687df66c41b7b188b482ac487">00011</a> <a class="code" href="classvil__geotiff__header.html#a723e1c2687df66c41b7b188b482ac487">vil_geotiff_header::vil_geotiff_header</a>(TIFF* tif) : tif_(tif)
<a name="l00012"></a>00012 {
<a name="l00013"></a>00013   <span class="keywordflow">if</span> (tif) {
<a name="l00014"></a>00014     <a class="code" href="classvil__geotiff__header.html#a714e11099a8c28f9e8565d40d8ba5fd2">gtif_</a> = GTIFNew(tif);
<a name="l00015"></a>00015     <span class="keywordflow">if</span> (<a class="code" href="classvil__geotiff__header.html#a714e11099a8c28f9e8565d40d8ba5fd2">gtif_</a>) {
<a name="l00016"></a>00016       GTIFPrint(<a class="code" href="classvil__geotiff__header.html#a714e11099a8c28f9e8565d40d8ba5fd2">gtif_</a>, 0, 0);
<a name="l00017"></a>00017 
<a name="l00018"></a>00018       <span class="comment">// read the header of the GeoDirectoryKey Tag</span>
<a name="l00019"></a>00019       <span class="keywordtype">int</span> version[3];
<a name="l00020"></a>00020       GTIFDirectoryInfo(<a class="code" href="classvil__geotiff__header.html#a714e11099a8c28f9e8565d40d8ba5fd2">gtif_</a>, version, &amp;<a class="code" href="classvil__geotiff__header.html#a534ac042823317d15cb9ae4de93d0b15">number_of_geokeys_</a>);
<a name="l00021"></a>00021       <a class="code" href="classvil__geotiff__header.html#a36a0645e6740b27e322027d2a01a0523">key_directory_version_</a> = (<span class="keywordtype">unsigned</span> short)version[0];
<a name="l00022"></a>00022       <a class="code" href="classvil__geotiff__header.html#af6806e65dc5b3672d34c493d72a35ea4">key_revision_</a> =          (<span class="keywordtype">unsigned</span> short)version[1];
<a name="l00023"></a>00023       <a class="code" href="classvil__geotiff__header.html#a53d3f38e8daa616ba6b43605f4ffba41">minor_revision_</a> =        (<span class="keywordtype">unsigned</span> short)version[2];
<a name="l00024"></a>00024     }
<a name="l00025"></a>00025   }
<a name="l00026"></a>00026 }
<a name="l00027"></a>00027 
<a name="l00028"></a><a class="code" href="classvil__geotiff__header.html#a628a3c26204d18df61d5cd9f826c4a05">00028</a> <span class="keywordtype">bool</span> <a class="code" href="classvil__geotiff__header.html#a628a3c26204d18df61d5cd9f826c4a05">vil_geotiff_header::gtif_tiepoints</a>(vcl_vector&lt;vcl_vector&lt;double&gt; &gt; &amp;tiepoints)
<a name="l00029"></a>00029 {
<a name="l00030"></a>00030   <span class="keywordtype">double</span>* points=0;
<a name="l00031"></a>00031   <span class="keywordtype">short</span> count;
<a name="l00032"></a>00032   <span class="keywordflow">if</span> (TIFFGetField(<a class="code" href="classvil__geotiff__header.html#ae07019270e3981ef3fd9d91692ee73a7">tif_</a>, GTIFF_TIEPOINTS, &amp;count, &amp;points) &lt; 0)
<a name="l00033"></a>00033     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00034"></a>00034 
<a name="l00035"></a>00035   <span class="comment">// tiepoints are stored as 3d points (I,J,K)-&gt;(X,Y,Z)</span>
<a name="l00036"></a>00036   <span class="comment">// where the point at location (I,J) at raster space with pixel value K</span>
<a name="l00037"></a>00037   <span class="comment">// and (X,Y,Z) is a vector in model space</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039   <span class="comment">// the number of values should be K*6</span>
<a name="l00040"></a>00040   assert((count % 6) == 0);
<a name="l00041"></a>00041   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> i=0; i&lt;count; ) {
<a name="l00042"></a>00042     vcl_vector&lt;double&gt; tiepoint(6);
<a name="l00043"></a>00043     tiepoint[0] = points[i++];
<a name="l00044"></a>00044     tiepoint[1] = points[i++];
<a name="l00045"></a>00045     tiepoint[2] = points[i++];
<a name="l00046"></a>00046     tiepoint[3] = points[i++];
<a name="l00047"></a>00047     tiepoint[4] = points[i++];
<a name="l00048"></a>00048     tiepoint[5] = points[i++];
<a name="l00049"></a>00049     tiepoints.push_back(tiepoint);
<a name="l00050"></a>00050   }
<a name="l00051"></a>00051   <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00052"></a>00052 }
<a name="l00053"></a>00053 
<a name="l00054"></a><a class="code" href="classvil__geotiff__header.html#aa97a736c44fb86084dc7ab660218889c">00054</a> <span class="keywordtype">bool</span> <a class="code" href="classvil__geotiff__header.html#aa97a736c44fb86084dc7ab660218889c">vil_geotiff_header::gtif_pixelscale</a>(<span class="keywordtype">double</span> &amp;scale_x, <span class="keywordtype">double</span> &amp;scale_y, <span class="keywordtype">double</span> &amp;scale_z)
<a name="l00055"></a>00055 {
<a name="l00056"></a>00056   <span class="keywordtype">double</span> *data;
<a name="l00057"></a>00057   <span class="keywordtype">short</span> count;
<a name="l00058"></a>00058   <span class="keywordflow">if</span> (TIFFGetField(<a class="code" href="classvil__geotiff__header.html#ae07019270e3981ef3fd9d91692ee73a7">tif_</a>, GTIFF_PIXELSCALE, &amp;count, &amp;data )) {
<a name="l00059"></a>00059     assert (count == 3);
<a name="l00060"></a>00060     scale_x = data[0];
<a name="l00061"></a>00061     scale_y = data[1];
<a name="l00062"></a>00062     scale_z = data[2];
<a name="l00063"></a>00063     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00064"></a>00064   }
<a name="l00065"></a>00065   <span class="keywordflow">else</span>
<a name="l00066"></a>00066     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00067"></a>00067 }
<a name="l00068"></a>00068 
<a name="l00069"></a><a class="code" href="classvil__geotiff__header.html#adfa92f77c726a14974f2cc795c9f4bdf">00069</a> <span class="keywordtype">bool</span> <a class="code" href="classvil__geotiff__header.html#adfa92f77c726a14974f2cc795c9f4bdf" title="returns the matrix in the argument.">vil_geotiff_header::gtif_trans_matrix</a> (<span class="keywordtype">double</span>* &amp;trans_matrix)
<a name="l00070"></a>00070 {
<a name="l00071"></a>00071   <span class="keywordtype">short</span> count;
<a name="l00072"></a>00072   <span class="keywordflow">if</span> (TIFFGetField(<a class="code" href="classvil__geotiff__header.html#ae07019270e3981ef3fd9d91692ee73a7">tif_</a>, GTIFF_TRANSMATRIX, &amp;count, &amp;trans_matrix )) {
<a name="l00073"></a>00073     assert (count == 16);
<a name="l00074"></a>00074     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00075"></a>00075   }
<a name="l00076"></a>00076   <span class="keywordflow">else</span>
<a name="l00077"></a>00077     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00078"></a>00078 }
<a name="l00079"></a>00079 
<a name="l00080"></a><a class="code" href="classvil__geotiff__header.html#a9e6732e1959470b6141326295727b84e">00080</a> <span class="keywordtype">bool</span> <a class="code" href="classvil__geotiff__header.html#a9e6732e1959470b6141326295727b84e">vil_geotiff_header::gtif_modeltype</a> (modeltype_t&amp; type)
<a name="l00081"></a>00081 {
<a name="l00082"></a>00082   geocode_t model;
<a name="l00083"></a>00083   <span class="keywordflow">if</span> (!GTIFKeyGet(<a class="code" href="classvil__geotiff__header.html#a714e11099a8c28f9e8565d40d8ba5fd2">gtif_</a>, GTModelTypeGeoKey, &amp;model, 0, 1))  {
<a name="l00084"></a>00084     vcl_cerr &lt;&lt; <span class="stringliteral">&quot;NO Model Type defined!!!!\n&quot;</span>;
<a name="l00085"></a>00085     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00086"></a>00086   }
<a name="l00087"></a>00087   <span class="keywordflow">else</span> {
<a name="l00088"></a>00088     type = <span class="keyword">static_cast&lt;</span>modeltype_t<span class="keyword">&gt;</span> (model);
<a name="l00089"></a>00089     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00090"></a>00090   }
<a name="l00091"></a>00091 }
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="classvil__geotiff__header.html#a301864bf16b276f6bed187c0980ef1c2">00093</a> <span class="keywordtype">bool</span> <a class="code" href="classvil__geotiff__header.html#a301864bf16b276f6bed187c0980ef1c2">vil_geotiff_header::gtif_rastertype</a> (rastertype_t&amp; type)
<a name="l00094"></a>00094 {
<a name="l00095"></a>00095   geocode_t raster;
<a name="l00096"></a>00096   <span class="keywordflow">if</span> (!GTIFKeyGet(<a class="code" href="classvil__geotiff__header.html#a714e11099a8c28f9e8565d40d8ba5fd2">gtif_</a>, GTRasterTypeGeoKey, &amp;raster, 0, 1)) {
<a name="l00097"></a>00097     vcl_cerr &lt;&lt; <span class="stringliteral">&quot;NO Raster Type, failure!!!!\n&quot;</span>;
<a name="l00098"></a>00098     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00099"></a>00099   }
<a name="l00100"></a>00100   <span class="keywordflow">else</span> {
<a name="l00101"></a>00101     type = <span class="keyword">static_cast&lt;</span>rastertype_t<span class="keyword">&gt;</span> (raster);
<a name="l00102"></a>00102     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00103"></a>00103   }
<a name="l00104"></a>00104 }
<a name="l00105"></a>00105 
<a name="l00106"></a><a class="code" href="classvil__geotiff__header.html#a949ef22515177f19d2776f2e41adaddd">00106</a> <span class="keywordtype">bool</span> <a class="code" href="classvil__geotiff__header.html#a949ef22515177f19d2776f2e41adaddd">vil_geotiff_header::geounits</a> (geounits_t&amp; units)
<a name="l00107"></a>00107 {
<a name="l00108"></a>00108   <span class="keywordtype">short</span> nGeogUOMLinear;
<a name="l00109"></a>00109   <span class="keywordflow">if</span> (!GTIFKeyGet(<a class="code" href="classvil__geotiff__header.html#a714e11099a8c28f9e8565d40d8ba5fd2">gtif_</a>, GeogLinearUnitsGeoKey, &amp;nGeogUOMLinear, 0, 1 )) {
<a name="l00110"></a>00110     vcl_cerr &lt;&lt; <span class="stringliteral">&quot;NO GEOUNITS, failure!!!!\n&quot;</span>;
<a name="l00111"></a>00111     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00112"></a>00112   }
<a name="l00113"></a>00113   <span class="keywordflow">else</span> {
<a name="l00114"></a>00114     units = <span class="keyword">static_cast&lt;</span>geounits_t<span class="keyword">&gt;</span> (nGeogUOMLinear);
<a name="l00115"></a>00115     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00116"></a>00116   }
<a name="l00117"></a>00117 }
<a name="l00118"></a>00118 
<a name="l00119"></a><a class="code" href="classvil__geotiff__header.html#ac23531eb5df98fd32bdf508d3c95b89d">00119</a> <span class="keywordtype">bool</span> <a class="code" href="classvil__geotiff__header.html#ac23531eb5df98fd32bdf508d3c95b89d" title="returns the Zone and the Hemisphere (0 for N, 1 for S);.">vil_geotiff_header::PCS_WGS84_UTM_zone</a>(<span class="keywordtype">int</span> &amp;zone, <a class="code" href="classvil__geotiff__header.html#a28cd3662cb22f412bf16f27f1b1f6221">GTIF_HEMISPH</a> &amp;hemisph) <span class="comment">// hemisph is O for N, 1 for S</span>
<a name="l00120"></a>00120 {
<a name="l00121"></a>00121   modeltype_t type;
<a name="l00122"></a>00122   <span class="keywordflow">if</span> (<a class="code" href="classvil__geotiff__header.html#a9e6732e1959470b6141326295727b84e">gtif_modeltype</a>(type) &amp;&amp; type == ModelTypeProjected)
<a name="l00123"></a>00123   {
<a name="l00124"></a>00124     <span class="keywordtype">void</span> *value;
<a name="l00125"></a>00125     <span class="keywordtype">int</span> size;
<a name="l00126"></a>00126     <span class="keywordtype">int</span> length;
<a name="l00127"></a>00127     tagtype_t ttype;
<a name="l00128"></a>00128     <a class="code" href="classvil__geotiff__header.html#a2bbfe925b7c894c318974309337b1d09" title="&lt;key&gt; : key id.">get_key_value</a>(ProjectedCSTypeGeoKey, &amp;value, size, length, ttype);
<a name="l00129"></a>00129 
<a name="l00130"></a>00130     <span class="comment">// WGS84 / UTM northern hemisphere:  326zz where zz is UTM zone number</span>
<a name="l00131"></a>00131     <span class="comment">// WGS84 / UTM southern hemisphere:  327zz where zz is UTM zone number</span>
<a name="l00132"></a>00132     <span class="comment">// we are looking for a short value, only one</span>
<a name="l00133"></a>00133     assert ((length == 1) &amp;&amp; (ttype == TYPE_SHORT));
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     <span class="keywordtype">short</span> *val = <span class="keyword">static_cast&lt;</span><span class="keywordtype">short</span>*<span class="keyword">&gt;</span> (value);
<a name="l00136"></a>00136     <span class="keywordflow">if</span> ((*val &lt; PCS_WGS84_UTM_zone_1N ) || ((*val &gt; PCS_WGS84_UTM_zone_60S ))) {
<a name="l00137"></a>00137       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00138"></a>00138     }
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 <span class="preprocessor">#if 0</span>
<a name="l00141"></a>00141 <span class="preprocessor"></span>     <span class="keywordtype">int</span> zone;
<a name="l00142"></a>00142      <span class="keywordtype">int</span> hemisph; <span class="comment">// O for N, 1 for S</span>
<a name="l00143"></a>00143 <span class="preprocessor">#endif // 0</span>
<a name="l00144"></a>00144 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ((*val &gt;= PCS_WGS84_UTM_zone_1N) &amp;&amp; (*val &lt;= PCS_WGS84_UTM_zone_60N)) {
<a name="l00145"></a>00145       zone = *val - 32600;
<a name="l00146"></a>00146       hemisph = <a class="code" href="classvil__geotiff__header.html#a28cd3662cb22f412bf16f27f1b1f6221a40cecfea4e33e02028e937c2c3bda319">NORTH</a>;
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*val &gt;= PCS_WGS84_UTM_zone_1S) &amp;&amp; (*val &lt;= PCS_WGS84_UTM_zone_60S)) {
<a name="l00149"></a>00149       zone = *val - 32700;
<a name="l00150"></a>00150       hemisph = <a class="code" href="classvil__geotiff__header.html#a28cd3662cb22f412bf16f27f1b1f6221a82920dd47279b0c33b15eafb31e3ca53">SOUTH</a>;
<a name="l00151"></a>00151     }
<a name="l00152"></a>00152     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00153"></a>00153   }
<a name="l00154"></a>00154   <span class="keywordflow">else</span> {
<a name="l00155"></a>00155     hemisph = <a class="code" href="classvil__geotiff__header.html#a28cd3662cb22f412bf16f27f1b1f6221a42d3777f1357167ef34f268b9393055a">UNDEF</a>;
<a name="l00156"></a>00156     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00157"></a>00157   }
<a name="l00158"></a>00158 }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 <span class="comment">//: returns true if in geographic coords, linear units are in meters and angular units are in degrees</span>
<a name="l00161"></a><a class="code" href="classvil__geotiff__header.html#a97f14bcc616bd9e0bd7cec12e8f9eee4">00161</a> <span class="keywordtype">bool</span> <a class="code" href="classvil__geotiff__header.html#a97f14bcc616bd9e0bd7cec12e8f9eee4" title="returns true if in geographic coords, linear units are in meters and angular units are in degrees...">vil_geotiff_header::GCS_WGS84_MET_DEG</a>()
<a name="l00162"></a>00162 {
<a name="l00163"></a>00163   modeltype_t type;
<a name="l00164"></a>00164   <span class="keywordflow">if</span> (<a class="code" href="classvil__geotiff__header.html#a9e6732e1959470b6141326295727b84e">gtif_modeltype</a>(type) &amp;&amp; type == ModelTypeGeographic) {
<a name="l00165"></a>00165     <span class="keywordtype">void</span> *value; <span class="keywordtype">int</span> size; <span class="keywordtype">int</span> length; tagtype_t ttype;
<a name="l00166"></a>00166     
<a name="l00167"></a>00167     <a class="code" href="classvil__geotiff__header.html#a2bbfe925b7c894c318974309337b1d09" title="&lt;key&gt; : key id.">get_key_value</a>(GeogLinearUnitsGeoKey, &amp;value, size, length, ttype);
<a name="l00168"></a>00168     assert ((length == 1) &amp;&amp; (ttype == TYPE_SHORT));
<a name="l00169"></a>00169     <span class="keywordtype">short</span> *val = <span class="keyword">static_cast&lt;</span><span class="keywordtype">short</span>*<span class="keyword">&gt;</span> (value);
<a name="l00170"></a>00170 
<a name="l00171"></a>00171     <span class="keywordflow">if</span> (*val != Linear_Meter) {
<a name="l00172"></a>00172       vcl_cerr &lt;&lt; <span class="stringliteral">&quot;Linear units are not in Meters!\n&quot;</span>;
<a name="l00173"></a>00173       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00174"></a>00174     }
<a name="l00175"></a>00175 
<a name="l00176"></a>00176     <a class="code" href="classvil__geotiff__header.html#a2bbfe925b7c894c318974309337b1d09" title="&lt;key&gt; : key id.">get_key_value</a>(GeogAngularUnitsGeoKey, &amp;value, size, length, ttype);
<a name="l00177"></a>00177     assert ((length == 1) &amp;&amp; (ttype == TYPE_SHORT));
<a name="l00178"></a>00178     val = <span class="keyword">static_cast&lt;</span><span class="keywordtype">short</span>*<span class="keyword">&gt;</span> (value);
<a name="l00179"></a>00179 
<a name="l00180"></a>00180     <span class="keywordflow">if</span> (*val != Angular_Degree) {
<a name="l00181"></a>00181       vcl_cerr &lt;&lt; <span class="stringliteral">&quot;Angular units are not in Degrees!\n&quot;</span>;
<a name="l00182"></a>00182       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00186"></a>00186   }
<a name="l00187"></a>00187   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00188"></a>00188 }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 <span class="comment">//: returns the Zone and the Hemisphere (0 for N, 1 for S);</span>
<a name="l00191"></a><a class="code" href="classvil__geotiff__header.html#af8d017686c727cc036fd5b882278cf6e">00191</a> <span class="keywordtype">bool</span> <a class="code" href="classvil__geotiff__header.html#af8d017686c727cc036fd5b882278cf6e" title="returns the Zone and the Hemisphere (0 for N, 1 for S);.">vil_geotiff_header::PCS_NAD83_UTM_zone</a>(<span class="keywordtype">int</span> &amp;zone, <a class="code" href="classvil__geotiff__header.html#a28cd3662cb22f412bf16f27f1b1f6221">GTIF_HEMISPH</a> &amp;hemisph)
<a name="l00192"></a>00192 {
<a name="l00193"></a>00193   modeltype_t type;
<a name="l00194"></a>00194   <span class="keywordflow">if</span> (<a class="code" href="classvil__geotiff__header.html#a9e6732e1959470b6141326295727b84e">gtif_modeltype</a>(type) &amp;&amp; type == ModelTypeProjected)
<a name="l00195"></a>00195   {
<a name="l00196"></a>00196     <span class="keywordtype">void</span> *value;
<a name="l00197"></a>00197     <span class="keywordtype">int</span> size;
<a name="l00198"></a>00198     <span class="keywordtype">int</span> length;
<a name="l00199"></a>00199     tagtype_t ttype;
<a name="l00200"></a>00200     <a class="code" href="classvil__geotiff__header.html#a2bbfe925b7c894c318974309337b1d09" title="&lt;key&gt; : key id.">get_key_value</a>(ProjectedCSTypeGeoKey, &amp;value, size, length, ttype);
<a name="l00201"></a>00201 
<a name="l00202"></a>00202     assert ((length == 1) &amp;&amp; (ttype == TYPE_SHORT));
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     <span class="keywordtype">short</span> *val = <span class="keyword">static_cast&lt;</span><span class="keywordtype">short</span>*<span class="keyword">&gt;</span> (value);
<a name="l00205"></a>00205     <span class="keywordflow">if</span> ((*val &lt; PCS_NAD83_UTM_zone_3N ) || ((*val &gt; PCS_NAD83_Missouri_West ))) {
<a name="l00206"></a>00206       vcl_cerr &lt;&lt; <span class="stringliteral">&quot;NOT in RANGE PCS_NAD83_UTM_zone_3N and PCS_NAD83_Missouri_West!\n&quot;</span>;
<a name="l00207"></a>00207       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00208"></a>00208     }
<a name="l00209"></a>00209     zone = *val - 26900;
<a name="l00210"></a>00210     hemisph = <a class="code" href="classvil__geotiff__header.html#a28cd3662cb22f412bf16f27f1b1f6221a40cecfea4e33e02028e937c2c3bda319">NORTH</a>;
<a name="l00211"></a>00211     
<a name="l00212"></a>00212     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00213"></a>00213   }
<a name="l00214"></a>00214   <span class="keywordflow">else</span> {
<a name="l00215"></a>00215     hemisph = <a class="code" href="classvil__geotiff__header.html#a28cd3662cb22f412bf16f27f1b1f6221a42d3777f1357167ef34f268b9393055a">UNDEF</a>;
<a name="l00216"></a>00216     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00217"></a>00217   }
<a name="l00218"></a>00218 }
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 
<a name="l00221"></a><a class="code" href="classvil__geotiff__header.html#a2bbfe925b7c894c318974309337b1d09">00221</a> <span class="keywordtype">bool</span> <a class="code" href="classvil__geotiff__header.html#a2bbfe925b7c894c318974309337b1d09" title="&lt;key&gt; : key id.">vil_geotiff_header::get_key_value</a>(geokey_t key, <span class="keywordtype">void</span>** value,
<a name="l00222"></a>00222                                        <span class="keywordtype">int</span>&amp; size, <span class="keywordtype">int</span>&amp; length, tagtype_t&amp; type)
<a name="l00223"></a>00223 {
<a name="l00224"></a>00224   length = GTIFKeyInfo(<a class="code" href="classvil__geotiff__header.html#a714e11099a8c28f9e8565d40d8ba5fd2">gtif_</a>, key, &amp;size, &amp;type);
<a name="l00225"></a>00225 
<a name="l00226"></a>00226   <span class="comment">// check if it is a valid key id</span>
<a name="l00227"></a>00227   <span class="keywordflow">if</span> (length == 0) {
<a name="l00228"></a>00228     <span class="comment">// key is not defined</span>
<a name="l00229"></a>00229     vcl_cerr &lt;&lt; <span class="stringliteral">&quot;KeyID=&quot;</span> &lt;&lt; (<span class="keywordtype">short</span> int)key &lt;&lt; <span class="stringliteral">&quot; is not valid\n&quot;</span>;
<a name="l00230"></a>00230     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00231"></a>00231   }
<a name="l00232"></a>00232   <span class="keywordflow">else</span> {
<a name="l00233"></a>00233     *value = vcl_malloc(size*length);
<a name="l00234"></a>00234     GTIFKeyGet(<a class="code" href="classvil__geotiff__header.html#a714e11099a8c28f9e8565d40d8ba5fd2">gtif_</a>, key, *value, 0, length);
<a name="l00235"></a>00235     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00236"></a>00236   }
<a name="l00237"></a>00237 }
</pre></div></div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 1 2013 17:31:46 for core/vil by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
