<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>core/vil/file_formats/vil_viffheader.cxx Source File</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">core/vil/file_formats/vil_viffheader.cxx</div>  </div>
</div>
<div class="contents">
<a href="vil__viffheader_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//:</span>
<a name="l00002"></a>00002 <span class="comment">// \file</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include &quot;<a class="code" href="vil__viffheader_8h.html">vil_viffheader.h</a>&quot;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="comment">//: Construct an image header</span>
<a name="l00008"></a>00008 <span class="comment">// \param ncols - vil_image::ni()</span>
<a name="l00009"></a>00009 <span class="comment">// \param nrows - vil_image::nj()</span>
<a name="l00010"></a>00010 <span class="comment">// \param storage_type - similar to vil_image::pixel_format()</span>
<a name="l00011"></a>00011 <span class="comment">// \param num_bands - similar to vil_image::n_planes()</span>
<a name="l00012"></a><a class="code" href="structvil__viff__xvimage.html#aa3bf9d258c154f019970d5261d17ac76">00012</a> <a class="code" href="structvil__viff__xvimage.html#a21fa1932e8bc584b1c154d64bef808fb">vil_viff_xvimage::vil_viff_xvimage</a>(
<a name="l00013"></a>00013   <span class="keywordtype">unsigned</span> ncols, <span class="keywordtype">unsigned</span> nrows,
<a name="l00014"></a>00014   <a class="code" href="vil__viffheader_8h.html#a60061f2831b06a35abe29d74f29bf32d">vil_viff_data_storage</a> storage_type,
<a name="l00015"></a>00015   <span class="keywordtype">unsigned</span> num_bands)
<a name="l00016"></a>00016 {
<a name="l00017"></a>00017   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> VIL_VIFF_COMMENT_LENGTH = 512L;
<a name="l00018"></a>00018 
<a name="l00019"></a>00019   <a class="code" href="structvil__viff__xvimage.html#a4a386feed28d5dfc8bf83ef681fdfa1d">identifier</a> = (char)XV_FILE_MAGIC_NUM;
<a name="l00020"></a>00020   <a class="code" href="structvil__viff__xvimage.html#a4b216742873d38d992c1dd892d88a309">file_type</a> = XV_FILE_TYPE_XVIFF;
<a name="l00021"></a>00021   <a class="code" href="structvil__viff__xvimage.html#a439bf53e2f1285f9d2fc5053044856fc">release</a> = XV_IMAGE_REL_NUM;
<a name="l00022"></a>00022   <a class="code" href="structvil__viff__xvimage.html#a918bc9ab9239c9039a2e56086528503f">version</a> = XV_IMAGE_VER_NUM;
<a name="l00023"></a>00023   <a class="code" href="structvil__viff__xvimage.html#afcf572b54573603d93e622d1fdf390fa">machine_dep</a> = VFF_DEP_IEEEORDER; <span class="comment">/* assume IEEE byte order */</span>
<a name="l00024"></a>00024   memset(  <a class="code" href="structvil__viff__xvimage.html#afc5dcb6db3e0149f20a25c083848404d">reserve</a>, 0, VIFF_HEADERSIZE-21*<span class="keyword">sizeof</span>(vxl_sint_32)-520*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>)-4*<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));
<a name="l00025"></a>00025   memset(  <a class="code" href="structvil__viff__xvimage.html#a29b033589adfe5bcf2191511405ad2d1">trash</a>, 0, 3L);
<a name="l00026"></a>00026   memset(  <a class="code" href="structvil__viff__xvimage.html#ab1e45d40192abcefb21390b4f59b308b">comment</a>, 0, VIL_VIFF_COMMENT_LENGTH);
<a name="l00027"></a>00027   strcpy(  <a class="code" href="structvil__viff__xvimage.html#ab1e45d40192abcefb21390b4f59b308b">comment</a>, <span class="stringliteral">&quot;vil_viff image writer output&quot;</span>); <span class="comment">// This string needs to be shorter than 511 chars.</span>
<a name="l00028"></a>00028   <a class="code" href="structvil__viff__xvimage.html#ae28b7480ae49bac7e1918b300a324445">row_size</a> = ncols;
<a name="l00029"></a>00029   <a class="code" href="structvil__viff__xvimage.html#a0e2fee436a2037565fb7e2419e8f72ab">col_size</a> = nrows;
<a name="l00030"></a>00030   <a class="code" href="structvil__viff__xvimage.html#a00cfcf64728ca158fb11df729eee8452">subrow_size</a> = 0; <span class="comment">/* Don&#39;t care, just avoid uninitialised memory. */</span>
<a name="l00031"></a>00031   <a class="code" href="structvil__viff__xvimage.html#a2f675dd5859f28acf223573dfb612d72">startx</a> = VFF_NOTSUB;
<a name="l00032"></a>00032   <a class="code" href="structvil__viff__xvimage.html#adcd5499ee970e18896770b6d070ce13f">starty</a> = VFF_NOTSUB;
<a name="l00033"></a>00033   <a class="code" href="structvil__viff__xvimage.html#a7aca7f93c11eaacf4afe2966aba46c26">pixsizx</a> = 1.0;
<a name="l00034"></a>00034   <a class="code" href="structvil__viff__xvimage.html#ab6985f0884c04e54b784b588008e7f59">pixsizy</a> = 1.0;
<a name="l00035"></a>00035   <a class="code" href="structvil__viff__xvimage.html#a6ac33785bfb8c27ccefc2bf18611954d">location_type</a> = VFF_LOC_IMPLICIT;
<a name="l00036"></a>00036   <a class="code" href="structvil__viff__xvimage.html#a7e661b17085f311b189b3555f5bc5ac6">location_dim</a> = 0;
<a name="l00037"></a>00037   <a class="code" href="structvil__viff__xvimage.html#ade6bcc5005d25255de3b01e34450e3c5">location</a> = NULL;
<a name="l00038"></a>00038   <a class="code" href="structvil__viff__xvimage.html#a902075cc4a43207b97cbe45da682abc2">num_of_images</a> = 1;
<a name="l00039"></a>00039   <a class="code" href="structvil__viff__xvimage.html#a64a223684951b6890e65389419ed76e9">num_data_bands</a> = num_bands;
<a name="l00040"></a>00040   <a class="code" href="structvil__viff__xvimage.html#af767abd8010f1fc0b0ce9cc0cfe1ab59">data_storage_type</a> = storage_type;
<a name="l00041"></a>00041   <a class="code" href="structvil__viff__xvimage.html#a9a6921c0d5cfccbe59edcff54a10137f">data_encode_scheme</a> = VFF_DES_RAW;
<a name="l00042"></a>00042   <a class="code" href="structvil__viff__xvimage.html#ab313fd1d736db35112180dd0d1fc8daa">map_scheme</a> = VFF_MS_NONE;
<a name="l00043"></a>00043   <a class="code" href="structvil__viff__xvimage.html#adf61dea3fd3344d174a6b52ab49dc57a">map_storage_type</a> = VFF_MAPTYP_NONE;
<a name="l00044"></a>00044   <a class="code" href="structvil__viff__xvimage.html#a3ad0d9696cb9a6f18e7c19463cac2075">maps</a> = NULL;
<a name="l00045"></a>00045   <a class="code" href="structvil__viff__xvimage.html#a4250ad24a6e7ef799f4965d33dd74b50">map_row_size</a> = 0;
<a name="l00046"></a>00046   <a class="code" href="structvil__viff__xvimage.html#a6e7d251d6d75bf49bc362e548594b0e1">map_col_size</a> = 0;
<a name="l00047"></a>00047   <a class="code" href="structvil__viff__xvimage.html#aab2e01002eeabe6d366f7962bac8e84f">map_subrow_size</a> = 0;
<a name="l00048"></a>00048   <a class="code" href="structvil__viff__xvimage.html#a2d5d4c1e4ef43351f7b33ac71b3835b9">map_enable</a> = VFF_MAP_OPTIONAL;
<a name="l00049"></a>00049   <a class="code" href="structvil__viff__xvimage.html#ae38e3f1f80ec52ac6db9c409f3263bd4">maps_per_cycle</a> = 0;      <span class="comment">/* Don&#39;t care */</span>
<a name="l00050"></a>00050   <a class="code" href="structvil__viff__xvimage.html#ad2277a4ebf79a77c86d1e6f1ea7ef06e">color_space_model</a> = VFF_CM_NONE;
<a name="l00051"></a>00051   <a class="code" href="structvil__viff__xvimage.html#ac1e00b065fd60919b27d73260cfa9983">ispare1</a> = 0;
<a name="l00052"></a>00052   <a class="code" href="structvil__viff__xvimage.html#a514f851bf2cb86faad9d68a62198816b">ispare2</a> = 0;
<a name="l00053"></a>00053   <a class="code" href="structvil__viff__xvimage.html#a0d26ccbdc89a12a52c6cd80c854f65cf">fspare1</a> = 0;
<a name="l00054"></a>00054   <a class="code" href="structvil__viff__xvimage.html#a5f229355d0ed46101919da12bc74ef72">fspare2</a> = 0;
<a name="l00055"></a>00055 
<a name="l00056"></a>00056   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> image_data_n_bytes;
<a name="l00057"></a>00057   <span class="keywordflow">switch</span> (storage_type)
<a name="l00058"></a>00058   {
<a name="l00059"></a>00059     <span class="keywordflow">case</span> <a class="code" href="vil__viffheader_8h.html#a60061f2831b06a35abe29d74f29bf32da6ce34e069fd4157e95d791cc3bb36fed">VFF_TYP_BIT</a>:       image_data_n_bytes = (ncols+7)/8; <span class="keywordflow">break</span>;
<a name="l00060"></a>00060     <span class="keywordflow">case</span> <a class="code" href="vil__viffheader_8h.html#a60061f2831b06a35abe29d74f29bf32da02df9dd34e9b2652a0b2db1f4be5f743">VFF_TYP_2_BYTE</a>:    image_data_n_bytes = ncols*2; <span class="keywordflow">break</span>;
<a name="l00061"></a>00061     <span class="keywordflow">case</span> <a class="code" href="vil__viffheader_8h.html#a60061f2831b06a35abe29d74f29bf32da95b2f03f47ae34347407613823c17d82">VFF_TYP_4_BYTE</a>:
<a name="l00062"></a>00062     <span class="keywordflow">case</span> <a class="code" href="vil__viffheader_8h.html#a60061f2831b06a35abe29d74f29bf32daaaff46d639dcfe68f3eef709e7ea40e7">VFF_TYP_FLOAT</a>:     image_data_n_bytes = ncols*4; <span class="keywordflow">break</span>;
<a name="l00063"></a>00063     <span class="keywordflow">case</span> <a class="code" href="vil__viffheader_8h.html#a60061f2831b06a35abe29d74f29bf32da2319139043782a671a85797c5b4fe89f">VFF_TYP_DOUBLE</a>:
<a name="l00064"></a>00064     <span class="keywordflow">case</span> <a class="code" href="vil__viffheader_8h.html#a60061f2831b06a35abe29d74f29bf32da39920dbd884282e71e0c61744c27bd1d">VFF_TYP_COMPLEX</a>:   image_data_n_bytes = ncols*8; <span class="keywordflow">break</span>;
<a name="l00065"></a>00065     <span class="keywordflow">case</span> <a class="code" href="vil__viffheader_8h.html#a60061f2831b06a35abe29d74f29bf32da4b38cda6e7ecceab25a0c529966f0f83">VFF_TYP_DCOMPLEX</a>:  image_data_n_bytes = ncols*16; <span class="keywordflow">break</span>;
<a name="l00066"></a>00066     <span class="keywordflow">default</span>:                image_data_n_bytes = ncols*255; <span class="keywordflow">break</span>;
<a name="l00067"></a>00067   }
<a name="l00068"></a>00068   image_data_n_bytes *= nrows*<a class="code" href="structvil__viff__xvimage.html#a64a223684951b6890e65389419ed76e9">num_data_bands</a>;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 
<a name="l00071"></a>00071   <a class="code" href="structvil__viff__xvimage.html#a8a524195ba179da38499d6ee7ababa2b">imagedata</a> = 0;
<a name="l00072"></a>00072 }
<a name="l00073"></a>00073 
<a name="l00074"></a><a class="code" href="structvil__viff__xvimage.html#a21fa1932e8bc584b1c154d64bef808fb">00074</a> <a class="code" href="structvil__viff__xvimage.html#a21fa1932e8bc584b1c154d64bef808fb">vil_viff_xvimage::vil_viff_xvimage</a>()
<a name="l00075"></a>00075 {
<a name="l00076"></a>00076   memset(<span class="keyword">this</span>,0, <span class="keyword">sizeof</span>(<a class="code" href="structvil__viff__xvimage.html">vil_viff_xvimage</a>));
<a name="l00077"></a>00077 }
<a name="l00078"></a>00078 
</pre></div></div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 1 2013 17:31:47 for core/vil by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
