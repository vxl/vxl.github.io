<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on May, 1 2013 by texi2html 1.76 -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<head>
<title>VXL: C. Coding Standards</title>

<meta name="description" content="VXL: C. Coding Standards">
<meta name="keywords" content="VXL: C. Coding Standards">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.76">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="coding-standards"></a>
<a name="SEC206"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="book_16.html#SEC205" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC207" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="book_16.html#SEC196" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="book.html#SEC_Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="book_18.html#SEC213" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="book.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[<a href="book_20.html#SEC255" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="book_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="appendix"> C. Coding Standards </h1>



<hr size="6">
<a name="SEC207"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC206" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC208" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC206" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC206" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="book_18.html#SEC213" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="book.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[<a href="book_20.html#SEC255" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="book_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> C.1 Coding Standards </h2>

<p>As has been mentioned before, it is VXL's philosophy that any rules should
be pragmatic. The following is a list of standards that have either been
explicitly agreed, or implicitly observed, and are here to make our lives
easier. If they are making life harder, then we will change them.
</p>
<p>Of course, these standards only apply to code in the VXL repository.
Although some of they may be useful, there is absolutely no need for users
of VXL to follow them at all.
</p>
<ul>
<li> See <a href="book_1.html#VXL_005fPhilosophy">VXL Philosophy</a>.
  </li><li> See <a href="book_3.html#VCL_005fRequirements">VCL Requirements</a>.
  </li><li> See <a href="book_16.html#CMake">CMake Build System</a>.
</li></ul>

<ul>
<li> All code should build, preferably warning-free, on the platforms
  on our dashboard. This is probably the single most important coding
  standard. If your commit breaks an existing build, you are responsible for
  fixing it as quickly as possible. If you don't understand the error,
  contact the relevant platform's maintainer for help.
  </li><li> The code should have good coverage with regression testing, and no
  reported memory leaks, etc.
  </li><li> Anyone who is modifying code should keep a watch on the
  <code>vxl-maintainers</code> email list.
</li></ul>


<hr size="6">
<a name="SEC208"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC207" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC209" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC206" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC206" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="book_18.html#SEC213" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="book.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[<a href="book_20.html#SEC255" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="book_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> C.2 Style Guide </h2>


<p>The following v<em>x</em>l coding standards were originally agreed at the Zurich
meeting in March 2001. They are mandatory for libraries in the core module.
Even if you are not writing code which you expect to enter vxl/core, then it
is still worth following these coding standards, as they have been designed
to minimise confusing and help avoid potential problems.
</p>
<ul>
<li> All global scope identifiers are lowercase with underscores separating
  words. (Rejected <code>vxl_Image_template</code> by vote Zurich, March 2001.)

</li><li> Each class, file, function and member variable should have a one
  line Doxygen description (brief line) in addition to the optional long
  description. See <code>core/doc/vxl_doc_rules.*</code> for further information.
  Each library should have a file in its directory called
  <code>introduction_doxy.txt</code>, containing at least the following:
  <table><tr><td>&nbsp;</td><td><pre class="example">/*! \mainpage wibble: Succinct Description of wibble.
*/
  </pre></td></tr></table>

</li><li> Private member variables should have a underscore as a suffix,
    e.g. <code>value_</code>. (An underscore as a prefix <code>_value</code> is not
    allowed by the C++ standard. Rejected by vote: prefix &quot;m_&quot;, e.g.
    <code>m_value</code>.)

</li><li> Accessor functions for a variable <code>x_</code> should be
  called <code>x()</code> and <code>set_x()</code>. In particular
<table><tr><td>&nbsp;</td><td><pre class="example">     T x;
     ...
     void set_x(T x); // or const T&amp;, or whatever
     T x();
</pre></td></tr></table><p>  (Using <code>get_x()</code> is redundant and simply causes extra typing.)
  <code>set_x()</code> should return void.
  (It should never return the old value, as this
  can be highly confusing.)
</p><table><tr><td>&nbsp;</td><td><pre class="example">     void x(T val) { x_ = val; }  // WRONG!
</pre></td></tr></table>
</li><li> Any forward declarations in a library <code>val</code> should
  be consolidated in <code>val_fwd.h</code> at the top level of the library.
  However, there is no requirement to provide forward declarations.

</li><li> A file may have more than one class, provided they &quot;belong&quot;. The
  goal of the filename=class name is to make it easy to find
  class/function declarations and definitions. As long as this holds,
  a file may declare more than one class.

</li><li> One tab (0x08) *always* expands to 8 spaces

</li><li> Indentation:
  <ul>
<li> may use any number of indent spaces (&gt;=2), but must be consistent.
  </li><li> we rejected proposal to fix the number of indent spaces
  </li><li> may only use spaces for indentation (i.e. no tab characters, which
    means 10 spaces of indentation may *not* be replaced by one tab
    and two spaces). (Reason: Visual Studio (and other editors) allow
    the developer to set tab=n. Most people have done this to their
    own taste. These environments convert TAB to n spaces, instead of 8.)
  </li><li> When editing other people's sources, you must use the same
    indentation as they have.
  </li></ul>

</li><li> Maximum number of characters per line: 132. (Number extracted
  primarily from vtk guidelines). 80 character lines preferred when
  possible.

</li><li> Source file endings:
  <ul>
<li> C source files should end <code>.c</code>
  </li><li> C++ ordinary source files should end in <code>.cxx</code>
  </li><li> Header files should end in <code>.h</code>
  </li><li> C++ Template implementation code should end in <code>.txx</code>
  </li></ul>
<p>  (These choices minimise problems and maximise sensible default behaviour over
  many compilers. Agreed by consensus on vxl-maintainers May 2002.)
</p></li></ul>


<hr size="6">
<a name="SEC209"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC208" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC210" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC206" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC206" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="book_18.html#SEC213" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="book.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[<a href="book_20.html#SEC255" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="book_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> C.3 How to contribute a new class or library </h2>

<p>If you have computer vision code that fits neatly into VXL platform, or a
VXL-friendly interface to an external library, the VXL community would
welcome your contribution.
</p>
<p>For a single class, or few functions, it is worth seeing which existing VXL
library your code might neatly fit into. Whole libraries should be added to
a subdirectory of the contrib directory. See <a href="book_15.html#struct_005fother_005fpackages"><code>vxl/contrib</code></a>. Get yourself an account on SourceForge, and we'll give
you commit rights to the Subversion vxl repository.
</p>
<p>It isn't expected that your code meet the Style Guide or Coding Standards on
its first commit to the repository. But you will have to put some effort
into making your code build cleanly on the dashboard as soon as possible.
You should aim for your code to meet the coding standards and style guide
over time.
</p>
<hr size="6">
<a name="SEC210"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC209" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC211" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC206" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC206" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="book_18.html#SEC213" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="book.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[<a href="book_20.html#SEC255" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="book_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> C.4 How to elevate a library to the core. </h2>

<ul>
<li> All the &quot;should&quot;s in the above standards, will need to be treated
  as &quot;must&quot;s,  unless there is a good reason.

  </li><li> A second institution or company, must be happily using your library.
  (It is unclear whether that second institution needs to be a well known
  member of the VXL community.) The second institution may well be
  the one pushing for the library's elevation to the core.

  </li><li> There must be a texinfo chapter for the VXL book, that provides a
  beginners introduction and tutorial to the library.

  </li><li> There must be a designated owner for the library, who is responsible
  for co-ordinating changes to that library.

</li></ul>

<hr size="6">
<a name="SEC211"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC210" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC212" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC206" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC206" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="book_18.html#SEC213" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="book.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[<a href="book_20.html#SEC255" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="book_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> C.5 On the Use of Templates </h2>

<p>VXL makes heavy use of the C++ template mechanism. In order to ensure
efficient compilation and linking a scheme has been adopted in which the
declaration of each templated class is placed in a <code>.h</code> file, and its
definition (implementation) is separated into a <code>.txx</code> file. The latter
is only read a small number of times, when a particular instantiation of a
template is created.
</p>
<p>Each specialisation of the templated class must be compiled explicitly. This
is usually done by creating an explicit instantiation in a file in the
Templates subdirectory.
</p>
<p>For example, <code>vgl_point_2d&lt;T&gt;</code> has a header file,
<code>vgl/vgl_point_2d.h</code>, and an implementation in
<code>vgl/vgl_point_2d.txx</code>.  At the end of the latter is a macro which can
be used to explicitly instantiation a particular specialisation of
<code>vgl_point_2d</code>, together with all the associated templated functions:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">File: vgl/vgl_point_2d.txx:
...
#define VGL_POINT_2D_INSTANTIATE(T) \ template class vgl_point_2d&lt;T &gt;; \
template vcl_ostream&amp; operator&lt;&lt;(vcl_ostream&amp;, const vgl_point_2d&lt;T &gt;&amp;); \
template vcl_istream&amp; operator&gt;&gt;(vcl_istream&amp;, vgl_point_2d&lt;T &gt;&amp;); \
</pre></td></tr></table>
<p>To instantiate a a <code>vgl_point_2d&lt;double&gt;</code> there is a file in the a
<code>vgl/Templates</code> directory:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">File: vgl/Templates/vgl_point_2d+double-.cxx:

// Instantiation of vgl_point_2d&lt;double&gt;
#include &lt;vgl/vgl_point_2d.txx&gt;
VGL_POINT_2D_INSTANTIATE(double);
</pre></td></tr></table>
<p>If you decided to use an unusual specialization, eg
<code>vgl_point_2d&lt;my_sponge&gt;</code>, your code should compile cleanly, but would
not link unless somewhere you explicitly instantiate the class and compile
it somewhere suitable using a call:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">  VGL_POINT_2D_INSTANTIATE(my_sponge);
</pre></td></tr></table>
<p>When you write a new templated class (or function), you should put the
implementation in a suitable <code>.txx</code>, together with an appropriate
<code>INSTANTIATE</code> macro.  Study examples in existing classes for more
details.
</p>



<hr size="6">
<a name="SEC212"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC211" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="book_18.html#SEC213" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC206" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC206" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="book_18.html#SEC213" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="book.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[<a href="book_20.html#SEC255" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="book_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> C.6 Frequently Asked Questions </h2>


<dl compact="compact">
<dt> Question 1</dt>
<dd>
<blockquote><p>  Can I import a useful third-party library into <code>vxl/v3p</code>?
</p></blockquote>

<p>The general rule is that v3p is for third-party libraries that are need by
VXL core libraries. Getting libraries in v3p working on all platforms is a
difficult and tedious task, so we want to have no more than necessary.
</p>
</dd>
<dt> Question 2</dt>
<dd>
<blockquote><p>  I have a FindFoo.cmake module that is imports the very useful Foo library.
  Where can I put it?
</p></blockquote>

<p>You should submit it to the CMake project, where it will see wider use than
just the VXL community. For very special cases, such as a new library needed
by something in core, you can temporarily put it in
<code>config\cmake\Modules\NewCMake</code>. However you should also submit it to
CMake, and remove it from the VXL repository as soon as it becomes available
in a CMake distribution.
</p>
</dd>
</dl>

<hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC206" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="book_18.html#SEC213" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="book.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[<a href="book_20.html#SEC255" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="book_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated on <i>May, 1 2013</i> using <a href="http://texi2html.cvshome.org/"><i>texi2html 1.76</i></a>.
 </font>
 <br>

</p>
</body>
</html>
