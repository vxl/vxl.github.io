<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>contrib/brl/bbas/imesh/imesh_mesh.cxx Source File</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">contrib/brl/bbas/imesh/imesh_mesh.cxx</div>  </div>
</div>
<div class="contents">
<a href="imesh__mesh_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// This is brl/bbas/imesh/imesh_mesh.cxx</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include &quot;<a class="code" href="imesh__mesh_8h.html" title="An indexed face set mesh.">imesh_mesh.h</a>&quot;</span>
<a name="l00003"></a>00003 <span class="comment">//:</span>
<a name="l00004"></a>00004 <span class="comment">// \file</span>
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__polygon_8h.html">vgl/vgl_polygon.h</a>&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__area_8h.html">vgl/vgl_area.h</a>&gt;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;vcl_iostream.h&gt;</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="comment">//: Copy Constructor</span>
<a name="l00012"></a><a class="code" href="classimesh__mesh.html#a1d230e9f72dd8894c13bdb496e65035c">00012</a> <a class="code" href="classimesh__mesh.html#ababfd30c2ec900ce9746f59ce0a78392" title="Default Constructor.">imesh_mesh::imesh_mesh</a>(<span class="keyword">const</span> <a class="code" href="classimesh__mesh.html" title="A simple mesh.">imesh_mesh</a>&amp; other)
<a name="l00013"></a>00013   : vbl_ref_count(),
<a name="l00014"></a>00014     verts_((other.verts_.get()) ? other.verts_-&gt;clone() : 0),
<a name="l00015"></a>00015     faces_((other.faces_.get()) ? other.faces_-&gt;clone() : 0),
<a name="l00016"></a>00016     half_edges_(other.half_edges_),
<a name="l00017"></a>00017     tex_coords_(other.tex_coords_),
<a name="l00018"></a>00018     tex_source_(other.tex_source_),
<a name="l00019"></a>00019     valid_tex_faces_(other.valid_tex_faces_),
<a name="l00020"></a>00020     tex_coord_status_(other.tex_coord_status_)
<a name="l00021"></a>00021 {
<a name="l00022"></a>00022 }
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="comment">//: Assignment operator</span>
<a name="l00026"></a><a class="code" href="classimesh__mesh.html#a503b69b2ceee165c58e842cf05c50995">00026</a> <a class="code" href="classimesh__mesh.html" title="A simple mesh.">imesh_mesh</a>&amp; <a class="code" href="classimesh__mesh.html#a503b69b2ceee165c58e842cf05c50995" title="Assignment operator.">imesh_mesh::operator=</a>(<a class="code" href="classimesh__mesh.html" title="A simple mesh.">imesh_mesh</a> <span class="keyword">const</span>&amp; other)
<a name="l00027"></a>00027 {
<a name="l00028"></a>00028   <span class="keywordflow">if</span> (<span class="keyword">this</span> != &amp;other) {
<a name="l00029"></a>00029     <a class="code" href="classimesh__mesh.html#a78ede2eae7cc6c1d444ea40a8018591f">verts_</a> = vcl_auto_ptr&lt;imesh_vertex_array_base&gt;((other.<a class="code" href="classimesh__mesh.html#a78ede2eae7cc6c1d444ea40a8018591f">verts_</a>.get()) ?
<a name="l00030"></a>00030                                                    other.<a class="code" href="classimesh__mesh.html#a78ede2eae7cc6c1d444ea40a8018591f">verts_</a>-&gt;clone() : 0);
<a name="l00031"></a>00031     <a class="code" href="classimesh__mesh.html#ad416e714b1800ea8866250edbdb2c69d">faces_</a> = vcl_auto_ptr&lt;imesh_face_array_base&gt;((other.<a class="code" href="classimesh__mesh.html#ad416e714b1800ea8866250edbdb2c69d">faces_</a>.get()) ?
<a name="l00032"></a>00032                                                  other.<a class="code" href="classimesh__mesh.html#ad416e714b1800ea8866250edbdb2c69d">faces_</a>-&gt;clone() : 0);
<a name="l00033"></a>00033     <a class="code" href="classimesh__mesh.html#a90c35d474c74d8eacd9bcfebe5f6e8cc">half_edges_</a> = other.<a class="code" href="classimesh__mesh.html#a90c35d474c74d8eacd9bcfebe5f6e8cc">half_edges_</a>;
<a name="l00034"></a>00034     <a class="code" href="classimesh__mesh.html#ac918f45a6354a265a2096a91b959c379" title="vector of texture coordinates.">tex_coords_</a> = other.<a class="code" href="classimesh__mesh.html#ac918f45a6354a265a2096a91b959c379" title="vector of texture coordinates.">tex_coords_</a>;
<a name="l00035"></a>00035     <a class="code" href="classimesh__mesh.html#aed493ea026bb11c23c854f6e9eb24bf5" title="indicate which faces have texture data.">valid_tex_faces_</a> = other.<a class="code" href="classimesh__mesh.html#aed493ea026bb11c23c854f6e9eb24bf5" title="indicate which faces have texture data.">valid_tex_faces_</a>;
<a name="l00036"></a>00036     <a class="code" href="classimesh__mesh.html#aec13dc1fc16d3f645fc8190d11cd88fc" title="the type of texture coordinates.">tex_coord_status_</a> = other.<a class="code" href="classimesh__mesh.html#aec13dc1fc16d3f645fc8190d11cd88fc" title="the type of texture coordinates.">tex_coord_status_</a>;
<a name="l00037"></a>00037   }
<a name="l00038"></a>00038   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00039"></a>00039 }
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="comment">//: Merge the data from another mesh into this one</span>
<a name="l00043"></a>00043 <span class="comment">//  Duplicates are not removed</span>
<a name="l00044"></a><a class="code" href="classimesh__mesh.html#ab6545cffab339f1ecb017cba143ff313">00044</a> <span class="keywordtype">void</span> <a class="code" href="classimesh__mesh.html#ab6545cffab339f1ecb017cba143ff313" title="Merge the data from another mesh into this one.">imesh_mesh::merge</a>(<span class="keyword">const</span> <a class="code" href="classimesh__mesh.html" title="A simple mesh.">imesh_mesh</a>&amp; other)
<a name="l00045"></a>00045 {
<a name="l00046"></a>00046   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> num_v = this-&gt;<a class="code" href="classimesh__mesh.html#ada3a543c59a612878479ca3a7a61331b" title="Return the number of vertices.">num_verts</a>();
<a name="l00047"></a>00047   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> num_e = this-&gt;<a class="code" href="classimesh__mesh.html#a2a6684bd85324da7861f03ecb67af43f" title="Return the number of edges.">num_edges</a>();
<a name="l00048"></a>00048   <a class="code" href="classimesh__mesh.html#ad416e714b1800ea8866250edbdb2c69d">faces_</a> = <a class="code" href="imesh__face_8cxx.html#ac5a99b9a43d563821be52535cbbaed7a" title="Merge the two face arrays.">imesh_merge</a>(*this-&gt;<a class="code" href="classimesh__mesh.html#ad416e714b1800ea8866250edbdb2c69d">faces_</a>,*other.<a class="code" href="classimesh__mesh.html#ad416e714b1800ea8866250edbdb2c69d">faces_</a>,<a class="code" href="classimesh__mesh.html#a78ede2eae7cc6c1d444ea40a8018591f">verts_</a>-&gt;size());
<a name="l00049"></a>00049   <a class="code" href="classimesh__mesh.html#a78ede2eae7cc6c1d444ea40a8018591f">verts_</a>-&gt;append(*other.<a class="code" href="classimesh__mesh.html#a78ede2eae7cc6c1d444ea40a8018591f">verts_</a>);
<a name="l00050"></a>00050 
<a name="l00051"></a>00051   <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classimesh__mesh.html#ab12f3001dfa1a43bca90aee0a7a40161" title="Returns texture coordinate availability.">has_tex_coords</a>() == <a class="code" href="classimesh__mesh.html#a21e233470b6ce89ff07187e5af06e06eaca0196ac657ac68e4cbf4a3049769604">TEX_COORD_NONE</a>)
<a name="l00052"></a>00052   {
<a name="l00053"></a>00053     vcl_vector&lt;vgl_point_2d&lt;double&gt; &gt; tex;
<a name="l00054"></a>00054     <span class="keywordflow">if</span> (other.<a class="code" href="classimesh__mesh.html#ab12f3001dfa1a43bca90aee0a7a40161" title="Returns texture coordinate availability.">has_tex_coords</a>() == <a class="code" href="classimesh__mesh.html#a21e233470b6ce89ff07187e5af06e06eaf02d743da2ea49ab2c7808f246bf8c61">TEX_COORD_ON_VERT</a>) {
<a name="l00055"></a>00055       tex = vcl_vector&lt;vgl_point_2d&lt;double&gt; &gt;(num_v, <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/classvgl__point__2d.html">vgl_point_2d&lt;double&gt;</a>(0,0));
<a name="l00056"></a>00056     }
<a name="l00057"></a>00057     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (other.<a class="code" href="classimesh__mesh.html#ab12f3001dfa1a43bca90aee0a7a40161" title="Returns texture coordinate availability.">has_tex_coords</a>() == <a class="code" href="classimesh__mesh.html#a21e233470b6ce89ff07187e5af06e06ea9ab6960ed9d4d72e4bff968d471c7779">TEX_COORD_ON_CORNER</a>) {
<a name="l00058"></a>00058       tex = vcl_vector&lt;vgl_point_2d&lt;double&gt; &gt;(2*num_e, <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/classvgl__point__2d.html">vgl_point_2d&lt;double&gt;</a>(0,0));
<a name="l00059"></a>00059     }
<a name="l00060"></a>00060 
<a name="l00061"></a>00061     tex.insert(tex.end(), other.<a class="code" href="classimesh__mesh.html#a65e903b14ba2f870d227e6f8eafe9f4a" title="Return the texture coordinates.">tex_coords</a>().begin(), other.<a class="code" href="classimesh__mesh.html#a65e903b14ba2f870d227e6f8eafe9f4a" title="Return the texture coordinates.">tex_coords</a>().end());
<a name="l00062"></a>00062     this-&gt;<a class="code" href="classimesh__mesh.html#a0201d40492ca8a37c3e2f7d6c5d85303" title="Set the texture coordinates.">set_tex_coords</a>(tex);
<a name="l00063"></a>00063   }
<a name="l00064"></a>00064   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classimesh__mesh.html#ab12f3001dfa1a43bca90aee0a7a40161" title="Returns texture coordinate availability.">has_tex_coords</a>() == other.<a class="code" href="classimesh__mesh.html#ab12f3001dfa1a43bca90aee0a7a40161" title="Returns texture coordinate availability.">has_tex_coords</a>())
<a name="l00065"></a>00065   {
<a name="l00066"></a>00066     this-&gt;<a class="code" href="classimesh__mesh.html#ac918f45a6354a265a2096a91b959c379" title="vector of texture coordinates.">tex_coords_</a>.insert(this-&gt;<a class="code" href="classimesh__mesh.html#ac918f45a6354a265a2096a91b959c379" title="vector of texture coordinates.">tex_coords_</a>.end(),
<a name="l00067"></a>00067                              other.<a class="code" href="classimesh__mesh.html#a65e903b14ba2f870d227e6f8eafe9f4a" title="Return the texture coordinates.">tex_coords</a>().begin(),
<a name="l00068"></a>00068                              other.<a class="code" href="classimesh__mesh.html#a65e903b14ba2f870d227e6f8eafe9f4a" title="Return the texture coordinates.">tex_coords</a>().end());
<a name="l00069"></a>00069   }
<a name="l00070"></a>00070 
<a name="l00071"></a>00071   <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classimesh__mesh.html#a85de014d83c0515a79c59ee8bf2bfb5e" title="Returns true if the mesh has computed half edges.">has_half_edges</a>() &amp;&amp; other.<a class="code" href="classimesh__mesh.html#a85de014d83c0515a79c59ee8bf2bfb5e" title="Returns true if the mesh has computed half edges.">has_half_edges</a>())
<a name="l00072"></a>00072     this-&gt;<a class="code" href="classimesh__mesh.html#a390c9b51d9f4830fcba38055efcbc871" title="Construct the half edges graph structure.">build_edge_graph</a>();
<a name="l00073"></a>00073   <span class="keywordflow">else</span>
<a name="l00074"></a>00074     this-&gt;<a class="code" href="classimesh__mesh.html#a90c35d474c74d8eacd9bcfebe5f6e8cc">half_edges_</a>.<a class="code" href="classimesh__half__edge__set.html#a48da4f970104a9126a0d0a1aca740220" title="clear the edges.">clear</a>();
<a name="l00075"></a>00075 }
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="comment">//: Set the texture coordinates</span>
<a name="l00079"></a><a class="code" href="classimesh__mesh.html#a0201d40492ca8a37c3e2f7d6c5d85303">00079</a> <span class="keywordtype">void</span> <a class="code" href="classimesh__mesh.html#a0201d40492ca8a37c3e2f7d6c5d85303" title="Set the texture coordinates.">imesh_mesh::set_tex_coords</a>(<span class="keyword">const</span> vcl_vector&lt;<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/classvgl__point__2d.html">vgl_point_2d&lt;double&gt;</a> &gt;&amp; tc)
<a name="l00080"></a>00080 {
<a name="l00081"></a>00081   <span class="keywordflow">if</span> (tc.size() == this-&gt;<a class="code" href="classimesh__mesh.html#ada3a543c59a612878479ca3a7a61331b" title="Return the number of vertices.">num_verts</a>())
<a name="l00082"></a>00082     <a class="code" href="classimesh__mesh.html#aec13dc1fc16d3f645fc8190d11cd88fc" title="the type of texture coordinates.">tex_coord_status_</a> = <a class="code" href="classimesh__mesh.html#a21e233470b6ce89ff07187e5af06e06eaf02d743da2ea49ab2c7808f246bf8c61">TEX_COORD_ON_VERT</a>;
<a name="l00083"></a>00083   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tc.size() == 2*this-&gt;<a class="code" href="classimesh__mesh.html#a2a6684bd85324da7861f03ecb67af43f" title="Return the number of edges.">num_edges</a>())
<a name="l00084"></a>00084     <a class="code" href="classimesh__mesh.html#aec13dc1fc16d3f645fc8190d11cd88fc" title="the type of texture coordinates.">tex_coord_status_</a> = <a class="code" href="classimesh__mesh.html#a21e233470b6ce89ff07187e5af06e06ea9ab6960ed9d4d72e4bff968d471c7779">TEX_COORD_ON_CORNER</a>;
<a name="l00085"></a>00085   <span class="keywordflow">else</span>
<a name="l00086"></a>00086     <a class="code" href="classimesh__mesh.html#aec13dc1fc16d3f645fc8190d11cd88fc" title="the type of texture coordinates.">tex_coord_status_</a> = <a class="code" href="classimesh__mesh.html#a21e233470b6ce89ff07187e5af06e06eaca0196ac657ac68e4cbf4a3049769604">TEX_COORD_NONE</a>;
<a name="l00087"></a>00087 
<a name="l00088"></a>00088   <a class="code" href="classimesh__mesh.html#ac918f45a6354a265a2096a91b959c379" title="vector of texture coordinates.">tex_coords_</a> = tc;
<a name="l00089"></a>00089 }
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 <span class="comment">//: Construct the half edges graph structure</span>
<a name="l00093"></a><a class="code" href="classimesh__mesh.html#a390c9b51d9f4830fcba38055efcbc871">00093</a> <span class="keywordtype">void</span> <a class="code" href="classimesh__mesh.html#a390c9b51d9f4830fcba38055efcbc871" title="Construct the half edges graph structure.">imesh_mesh::build_edge_graph</a>()
<a name="l00094"></a>00094 {
<a name="l00095"></a>00095   <span class="keyword">const</span> <a class="code" href="classimesh__face__array__base.html" title="Abstract base class for a collection of faces.">imesh_face_array_base</a>&amp; <a class="code" href="classimesh__mesh.html#a0c318307ea669c54b7fe8f92b9f06df9" title="Access the vector of faces.">faces</a> = this-&gt;<a class="code" href="classimesh__mesh.html#a0c318307ea669c54b7fe8f92b9f06df9" title="Access the vector of faces.">faces</a>();
<a name="l00096"></a>00096   vcl_vector&lt;vcl_vector&lt;unsigned int&gt; &gt; face_list(faces.<a class="code" href="classimesh__face__array__base.html#a6a292832ec511f425df11e4d97daf4b0" title="returns the number of faces.">size</a>());
<a name="l00097"></a>00097   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> f=0; f&lt;faces.<a class="code" href="classimesh__face__array__base.html#a6a292832ec511f425df11e4d97daf4b0" title="returns the number of faces.">size</a>(); ++f) {
<a name="l00098"></a>00098     face_list[f].resize(faces.<a class="code" href="classimesh__face__array__base.html#ae12f7c7a3a39fa76e9278da82d74854c" title="returns the number of vertices in face">num_verts</a>(f));
<a name="l00099"></a>00099     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>=0; <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>&lt;faces.<a class="code" href="classimesh__face__array__base.html#ae12f7c7a3a39fa76e9278da82d74854c" title="returns the number of vertices in face">num_verts</a>(f); ++<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>)
<a name="l00100"></a>00100       face_list[f][<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>] =  <a class="code" href="classimesh__mesh.html#a0c318307ea669c54b7fe8f92b9f06df9" title="Access the vector of faces.">faces</a>(f,<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>);
<a name="l00101"></a>00101   }
<a name="l00102"></a>00102 
<a name="l00103"></a>00103   <a class="code" href="classimesh__mesh.html#a90c35d474c74d8eacd9bcfebe5f6e8cc">half_edges_</a>.<a class="code" href="classimesh__half__edge__set.html#aafd29b87fdfe3494c62a229eee8e8a51" title="Build the half edges from an indexed face set.">build_from_ifs</a>(face_list);
<a name="l00104"></a>00104 }
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 <span class="comment">//: Compute vertex normals</span>
<a name="l00108"></a><a class="code" href="classimesh__mesh.html#a2a83d2086e86701c067e82d51d4654e1">00108</a> <span class="keywordtype">void</span> <a class="code" href="classimesh__mesh.html#a2a83d2086e86701c067e82d51d4654e1" title="Compute vertex normals.">imesh_mesh::compute_vertex_normals</a>()
<a name="l00109"></a>00109 {
<a name="l00110"></a>00110   <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classimesh__mesh.html#a85de014d83c0515a79c59ee8bf2bfb5e" title="Returns true if the mesh has computed half edges.">has_half_edges</a>())
<a name="l00111"></a>00111     this-&gt;<a class="code" href="classimesh__mesh.html#a390c9b51d9f4830fcba38055efcbc871" title="Construct the half edges graph structure.">build_edge_graph</a>();
<a name="l00112"></a>00112 
<a name="l00113"></a>00113   <span class="keyword">const</span> <a class="code" href="classimesh__half__edge__set.html" title="A collection of indexed half edges.">imesh_half_edge_set</a>&amp; <a class="code" href="classimesh__mesh.html#a33e77f683b5001cf3db0852519d84e55" title="Return the half edge set.">half_edges</a> = this-&gt;<a class="code" href="classimesh__mesh.html#a33e77f683b5001cf3db0852519d84e55" title="Return the half edge set.">half_edges</a>();
<a name="l00114"></a>00114   <a class="code" href="classimesh__vertex__array.html" title="An array of vertices of dimension d.">imesh_vertex_array&lt;3&gt;</a>&amp; verts = this-&gt;vertices&lt;3&gt;();
<a name="l00115"></a>00115 
<a name="l00116"></a>00116   vcl_vector&lt;vgl_vector_3d&lt;double&gt; &gt; normals(this-&gt;<a class="code" href="classimesh__mesh.html#ada3a543c59a612878479ca3a7a61331b" title="Return the number of vertices.">num_verts</a>(),
<a name="l00117"></a>00117                                              <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/classvgl__vector__3d.html">vgl_vector_3d&lt;double&gt;</a>(0,0,0));
<a name="l00118"></a>00118   vcl_vector&lt;unsigned int&gt; f_count(this-&gt;<a class="code" href="classimesh__mesh.html#ada3a543c59a612878479ca3a7a61331b" title="Return the number of vertices.">num_verts</a>(),0);
<a name="l00119"></a>00119 
<a name="l00120"></a>00120   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> he=0; he &lt; half_edges.<a class="code" href="classimesh__half__edge__set.html#adf2088cdbaf11c5d9b23ffb71aad3462" title="number of half edges.">size</a>(); ++he) {
<a name="l00121"></a>00121     <a class="code" href="classimesh__half__edge__set_1_1f__const__iterator.html" title="A const iterator of half edges adjacent to a face.">imesh_half_edge_set::f_const_iterator</a> fi(he,half_edges);
<a name="l00122"></a>00122     <span class="keywordflow">if</span> (fi-&gt;is_boundary())
<a name="l00123"></a>00123       <span class="keywordflow">continue</span>;
<a name="l00124"></a>00124     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__homg__line__2d_8txx.html#ad49b25478287e1337feef22ecbeed231">vp</a> = fi-&gt;vert_index();
<a name="l00125"></a>00125     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a> = (++fi)-&gt;vert_index();
<a name="l00126"></a>00126     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> vn = (++fi)-&gt;vert_index();
<a name="l00127"></a>00127     normals[v] += <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#aa065437a44aac165249f81b940f1bda4">normalized</a>(<a class="code" href="imesh__vertex_8cxx.html#a7c5f6d24cc3d3a3135464fb59b6375de" title="compute the vector normal to the plane defined by 3 vertices.">imesh_tri_normal</a>(verts[v],verts[vn],verts[vp]));
<a name="l00128"></a>00128     ++f_count[v];
<a name="l00129"></a>00129   }
<a name="l00130"></a>00130 
<a name="l00131"></a>00131   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>=0; <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>&lt;verts.<a class="code" href="classimesh__vertex__array.html#a89539d3e40b411109649389c7a2fd6fa" title="returns the number of vertices.">size</a>(); ++<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>)
<a name="l00132"></a>00132   {
<a name="l00133"></a>00133     normals[<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>] /= f_count[<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>];
<a name="l00134"></a>00134     <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#ac4986a4b72b1d54b872d5863ac35d3e8">normalize</a>(normals[<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>]);
<a name="l00135"></a>00135     <span class="keywordflow">if</span> (normals[v].<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a31c7db8164e71d411a1a821525102dc3">length</a>() &lt; 0.5)
<a name="l00136"></a>00136       vcl_cout &lt;&lt; <span class="stringliteral">&quot;normal &quot;</span>&lt;&lt;v&lt;&lt;<span class="stringliteral">&quot; is &quot;</span>&lt;&lt;normals[v] &lt;&lt;vcl_endl;
<a name="l00137"></a>00137   }
<a name="l00138"></a>00138 
<a name="l00139"></a>00139   verts.<a class="code" href="classimesh__vertex__array__base.html#a760b7aaad7f3c86ef34c4bbf1dd71849" title="Set the vertex normals.">set_normals</a>(normals);
<a name="l00140"></a>00140 }
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 
<a name="l00143"></a>00143 <span class="comment">//: Compute vertex normals using face normals</span>
<a name="l00144"></a><a class="code" href="classimesh__mesh.html#a4ea60fa50c53fdf90395337790f496fd">00144</a> <span class="keywordtype">void</span> <a class="code" href="classimesh__mesh.html#a4ea60fa50c53fdf90395337790f496fd" title="Compute vertex normals using face normals.">imesh_mesh::compute_vertex_normals_from_faces</a>()
<a name="l00145"></a>00145 {
<a name="l00146"></a>00146   <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classimesh__mesh.html#a85de014d83c0515a79c59ee8bf2bfb5e" title="Returns true if the mesh has computed half edges.">has_half_edges</a>())
<a name="l00147"></a>00147     this-&gt;<a class="code" href="classimesh__mesh.html#a390c9b51d9f4830fcba38055efcbc871" title="Construct the half edges graph structure.">build_edge_graph</a>();
<a name="l00148"></a>00148 
<a name="l00149"></a>00149   <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classimesh__mesh.html#ad416e714b1800ea8866250edbdb2c69d">faces_</a>-&gt;has_normals())
<a name="l00150"></a>00150     this-&gt;<a class="code" href="classimesh__mesh.html#a2c6809dc5958f910ac7bd28821c3644f" title="Compute face normals.">compute_face_normals</a>();
<a name="l00151"></a>00151 
<a name="l00152"></a>00152   <span class="keyword">const</span> vcl_vector&lt;vgl_vector_3d&lt;double&gt; &gt;&amp; fnormals = <a class="code" href="classimesh__mesh.html#ad416e714b1800ea8866250edbdb2c69d">faces_</a>-&gt;normals();
<a name="l00153"></a>00153 
<a name="l00154"></a>00154   <span class="keyword">const</span> <a class="code" href="classimesh__half__edge__set.html" title="A collection of indexed half edges.">imesh_half_edge_set</a>&amp; <a class="code" href="classimesh__mesh.html#a33e77f683b5001cf3db0852519d84e55" title="Return the half edge set.">half_edges</a> = this-&gt;<a class="code" href="classimesh__mesh.html#a33e77f683b5001cf3db0852519d84e55" title="Return the half edge set.">half_edges</a>();
<a name="l00155"></a>00155   <a class="code" href="classimesh__vertex__array.html" title="An array of vertices of dimension d.">imesh_vertex_array&lt;3&gt;</a>&amp; verts = this-&gt;vertices&lt;3&gt;();
<a name="l00156"></a>00156 
<a name="l00157"></a>00157   vcl_vector&lt;vgl_vector_3d&lt;double&gt; &gt; normals(this-&gt;<a class="code" href="classimesh__mesh.html#ada3a543c59a612878479ca3a7a61331b" title="Return the number of vertices.">num_verts</a>(),
<a name="l00158"></a>00158                                              <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/classvgl__vector__3d.html">vgl_vector_3d&lt;double&gt;</a>(0,0,0));
<a name="l00159"></a>00159   vcl_vector&lt;unsigned int&gt; f_count(this-&gt;<a class="code" href="classimesh__mesh.html#ada3a543c59a612878479ca3a7a61331b" title="Return the number of vertices.">num_verts</a>(),0);
<a name="l00160"></a>00160 
<a name="l00161"></a>00161   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> he=0; he &lt; half_edges.<a class="code" href="classimesh__half__edge__set.html#adf2088cdbaf11c5d9b23ffb71aad3462" title="number of half edges.">size</a>(); ++he) {
<a name="l00162"></a>00162     <span class="keyword">const</span> <a class="code" href="classimesh__half__edge.html">imesh_half_edge</a>&amp; half_edge = half_edges[he];
<a name="l00163"></a>00163     <span class="keywordflow">if</span> (half_edge.<a class="code" href="classimesh__half__edge.html#aa7a92ed72f27baf2b971b92c1e3f2e96">is_boundary</a>())
<a name="l00164"></a>00164       <span class="keywordflow">continue</span>;
<a name="l00165"></a>00165     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a> = half_edge.<a class="code" href="classimesh__half__edge.html#a742a932a858768410de90c3ce24d2a34" title="return the vertex index.">vert_index</a>();
<a name="l00166"></a>00166     normals[v] += <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#aa065437a44aac165249f81b940f1bda4">normalized</a>(fnormals[half_edge.<a class="code" href="classimesh__half__edge.html#a59ad8ae5a99bd56dd8065dec24022149" title="return the face index.">face_index</a>()]);
<a name="l00167"></a>00167     ++f_count[v];
<a name="l00168"></a>00168   }
<a name="l00169"></a>00169 
<a name="l00170"></a>00170   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>=0; <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>&lt;verts.<a class="code" href="classimesh__vertex__array.html#a89539d3e40b411109649389c7a2fd6fa" title="returns the number of vertices.">size</a>(); ++<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>)
<a name="l00171"></a>00171   {
<a name="l00172"></a>00172     normals[<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>] /= f_count[<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>];
<a name="l00173"></a>00173     <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#ac4986a4b72b1d54b872d5863ac35d3e8">normalize</a>(normals[<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>]);
<a name="l00174"></a>00174     <span class="keywordflow">if</span> (normals[v].<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#a31c7db8164e71d411a1a821525102dc3">length</a>() &lt; 0.5)
<a name="l00175"></a>00175       vcl_cout &lt;&lt; <span class="stringliteral">&quot;normal &quot;</span>&lt;&lt;v&lt;&lt;<span class="stringliteral">&quot; is &quot;</span>&lt;&lt;normals[v] &lt;&lt;vcl_endl;
<a name="l00176"></a>00176   }
<a name="l00177"></a>00177 
<a name="l00178"></a>00178   verts.<a class="code" href="classimesh__vertex__array__base.html#a760b7aaad7f3c86ef34c4bbf1dd71849" title="Set the vertex normals.">set_normals</a>(normals);
<a name="l00179"></a>00179 }
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 
<a name="l00182"></a>00182 <span class="comment">//: Compute face normals</span>
<a name="l00183"></a><a class="code" href="classimesh__mesh.html#a2c6809dc5958f910ac7bd28821c3644f">00183</a> <span class="keywordtype">void</span> <a class="code" href="classimesh__mesh.html#a2c6809dc5958f910ac7bd28821c3644f" title="Compute face normals.">imesh_mesh::compute_face_normals</a>(<span class="keywordtype">bool</span> norm)
<a name="l00184"></a>00184 {
<a name="l00185"></a>00185   <a class="code" href="classimesh__face__array__base.html" title="Abstract base class for a collection of faces.">imesh_face_array_base</a>&amp; <a class="code" href="classimesh__mesh.html#a0c318307ea669c54b7fe8f92b9f06df9" title="Access the vector of faces.">faces</a> = this-&gt;<a class="code" href="classimesh__mesh.html#a0c318307ea669c54b7fe8f92b9f06df9" title="Access the vector of faces.">faces</a>();
<a name="l00186"></a>00186   <span class="keyword">const</span> <a class="code" href="classimesh__vertex__array.html" title="An array of vertices of dimension d.">imesh_vertex_array&lt;3&gt;</a>&amp; verts = this-&gt;vertices&lt;3&gt;();
<a name="l00187"></a>00187 
<a name="l00188"></a>00188   vcl_vector&lt;vgl_vector_3d&lt;double&gt; &gt; normals(this-&gt;<a class="code" href="classimesh__mesh.html#a540685cabad7ef1eed056e7965175476" title="Return the number of faces.">num_faces</a>(),
<a name="l00189"></a>00189                                              <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/classvgl__vector__3d.html">vgl_vector_3d&lt;double&gt;</a>(0,0,0));
<a name="l00190"></a>00190 
<a name="l00191"></a>00191   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;faces.<a class="code" href="classimesh__face__array__base.html#a6a292832ec511f425df11e4d97daf4b0" title="returns the number of faces.">size</a>(); ++i) {
<a name="l00192"></a>00192     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> num_v = faces.<a class="code" href="classimesh__face__array__base.html#ae12f7c7a3a39fa76e9278da82d74854c" title="returns the number of vertices in face">num_verts</a>(i);
<a name="l00193"></a>00193     <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/classvgl__vector__3d.html">vgl_vector_3d&lt;double&gt;</a>&amp; n = normals[i];
<a name="l00194"></a>00194     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j=2; j&lt;num_v; ++j) {
<a name="l00195"></a>00195       n += <a class="code" href="imesh__vertex_8cxx.html#a7c5f6d24cc3d3a3135464fb59b6375de" title="compute the vector normal to the plane defined by 3 vertices.">imesh_tri_normal</a>(verts[<a class="code" href="classimesh__mesh.html#a0c318307ea669c54b7fe8f92b9f06df9" title="Access the vector of faces.">faces</a>(i,0)],
<a name="l00196"></a>00196                             verts[<a class="code" href="classimesh__mesh.html#a0c318307ea669c54b7fe8f92b9f06df9" title="Access the vector of faces.">faces</a>(i,j-1)],
<a name="l00197"></a>00197                             verts[<a class="code" href="classimesh__mesh.html#a0c318307ea669c54b7fe8f92b9f06df9" title="Access the vector of faces.">faces</a>(i,j)]);
<a name="l00198"></a>00198     }
<a name="l00199"></a>00199     <span class="keywordflow">if</span> (norm)
<a name="l00200"></a>00200       <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__vector__2d_8h.html#ac4986a4b72b1d54b872d5863ac35d3e8">normalize</a>(n);
<a name="l00201"></a>00201   }
<a name="l00202"></a>00202 
<a name="l00203"></a>00203   faces.<a class="code" href="classimesh__face__array__base.html#ae86edfa252243aa350eb31728f8504ca" title="Set the face normals.">set_normals</a>(normals);
<a name="l00204"></a>00204 }
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 <span class="comment">//: Map a barycentric coordinate (u,v) on triangle \param tri into texture space</span>
<a name="l00208"></a><a class="code" href="classimesh__mesh.html#ae08c6797098c62c29997570cba9f8e42">00208</a> <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/classvgl__point__2d.html">vgl_point_2d&lt;double&gt;</a> <a class="code" href="classimesh__mesh.html#ae08c6797098c62c29997570cba9f8e42" title="Map a barycentric coordinate (u,v) on triangle.">imesh_mesh::texture_map</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tri,
<a name="l00209"></a>00209                                              <span class="keywordtype">double</span> u, <span class="keywordtype">double</span> v)<span class="keyword"> const</span>
<a name="l00210"></a>00210 <span class="keyword"></span>{
<a name="l00211"></a>00211   <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/classvgl__point__2d.html">vgl_point_2d&lt;double&gt;</a> tex(0,0);
<a name="l00212"></a>00212   <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classimesh__mesh.html#aec13dc1fc16d3f645fc8190d11cd88fc" title="the type of texture coordinates.">tex_coord_status_</a> == <a class="code" href="classimesh__mesh.html#a21e233470b6ce89ff07187e5af06e06eaf02d743da2ea49ab2c7808f246bf8c61">TEX_COORD_ON_VERT</a>)
<a name="l00213"></a>00213   {
<a name="l00214"></a>00214     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> v1 = (*faces_)(tri,0);
<a name="l00215"></a>00215     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> v2 = (*faces_)(tri,1);
<a name="l00216"></a>00216     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> v3 = (*faces_)(tri,2);
<a name="l00217"></a>00217     tex += (1-u-v)*<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/classvgl__vector__2d.html">vgl_vector_2d&lt;double&gt;</a>(<a class="code" href="classimesh__mesh.html#ac918f45a6354a265a2096a91b959c379" title="vector of texture coordinates.">tex_coords_</a>[v1].x(),<a class="code" href="classimesh__mesh.html#ac918f45a6354a265a2096a91b959c379" title="vector of texture coordinates.">tex_coords_</a>[v1].y());
<a name="l00218"></a>00218     tex += u*<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/classvgl__vector__2d.html">vgl_vector_2d&lt;double&gt;</a>(<a class="code" href="classimesh__mesh.html#ac918f45a6354a265a2096a91b959c379" title="vector of texture coordinates.">tex_coords_</a>[v2].x(),<a class="code" href="classimesh__mesh.html#ac918f45a6354a265a2096a91b959c379" title="vector of texture coordinates.">tex_coords_</a>[v2].y());
<a name="l00219"></a>00219     tex += v*<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/classvgl__vector__2d.html">vgl_vector_2d&lt;double&gt;</a>(<a class="code" href="classimesh__mesh.html#ac918f45a6354a265a2096a91b959c379" title="vector of texture coordinates.">tex_coords_</a>[v3].x(),<a class="code" href="classimesh__mesh.html#ac918f45a6354a265a2096a91b959c379" title="vector of texture coordinates.">tex_coords_</a>[v3].y());
<a name="l00220"></a>00220   }
<a name="l00221"></a>00221   <span class="keywordflow">return</span> tex;
<a name="l00222"></a>00222 }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224 
<a name="l00225"></a>00225 <span class="comment">//: Set the vector indicating which faces have texture</span>
<a name="l00226"></a><a class="code" href="classimesh__mesh.html#a7be62e5f6ad8e19ef766d7580bef67fc">00226</a> <span class="keywordtype">void</span> <a class="code" href="classimesh__mesh.html#a7be62e5f6ad8e19ef766d7580bef67fc" title="Set the vector indicating which faces have texture.">imesh_mesh::set_valid_tex_faces</a>(<span class="keyword">const</span> vcl_vector&lt;bool&gt;&amp; valid)
<a name="l00227"></a>00227 {
<a name="l00228"></a>00228   <span class="keywordflow">if</span> (valid.size() == this-&gt;<a class="code" href="classimesh__mesh.html#a540685cabad7ef1eed056e7965175476" title="Return the number of faces.">num_faces</a>() &amp;&amp; <a class="code" href="classimesh__mesh.html#ab12f3001dfa1a43bca90aee0a7a40161" title="Returns texture coordinate availability.">has_tex_coords</a>())
<a name="l00229"></a>00229     <a class="code" href="classimesh__mesh.html#aed493ea026bb11c23c854f6e9eb24bf5" title="indicate which faces have texture data.">valid_tex_faces_</a> = valid;
<a name="l00230"></a>00230 }
<a name="l00231"></a>00231 
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 <span class="comment">//: Label all faces with positive (counter clockwise orientation) area as valid</span>
<a name="l00234"></a>00234 <span class="comment">//  This requirement refers to the texture map coordinates</span>
<a name="l00235"></a><a class="code" href="classimesh__mesh.html#a65d7b3c986f495d725a8fed6d51934d6">00235</a> <span class="keywordtype">void</span> <a class="code" href="classimesh__mesh.html#a65d7b3c986f495d725a8fed6d51934d6" title="Label all faces with positive (counter clockwise orientation) area as valid.">imesh_mesh::label_ccw_tex_faces_valid</a>()
<a name="l00236"></a>00236 {
<a name="l00237"></a>00237   <span class="keywordflow">switch</span> (<a class="code" href="classimesh__mesh.html#aec13dc1fc16d3f645fc8190d11cd88fc" title="the type of texture coordinates.">tex_coord_status_</a>)
<a name="l00238"></a>00238   {
<a name="l00239"></a>00239     <span class="keywordflow">case</span> <a class="code" href="classimesh__mesh.html#a21e233470b6ce89ff07187e5af06e06eaf02d743da2ea49ab2c7808f246bf8c61">TEX_COORD_ON_VERT</a>:
<a name="l00240"></a>00240     {
<a name="l00241"></a>00241       <a class="code" href="classimesh__mesh.html#aed493ea026bb11c23c854f6e9eb24bf5" title="indicate which faces have texture data.">valid_tex_faces_</a>.resize(this-&gt;<a class="code" href="classimesh__mesh.html#a540685cabad7ef1eed056e7965175476" title="Return the number of faces.">num_faces</a>());
<a name="l00242"></a>00242       <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/classvgl__polygon.html">vgl_polygon&lt;double&gt;</a> face(1);
<a name="l00243"></a>00243       <a class="code" href="classimesh__face__array__base.html" title="Abstract base class for a collection of faces.">imesh_face_array_base</a>&amp; <a class="code" href="classimesh__mesh.html#a0c318307ea669c54b7fe8f92b9f06df9" title="Access the vector of faces.">faces</a> = this-&gt;<a class="code" href="classimesh__mesh.html#a0c318307ea669c54b7fe8f92b9f06df9" title="Access the vector of faces.">faces</a>();
<a name="l00244"></a>00244       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> f=0; f&lt;<a class="code" href="classimesh__mesh.html#a540685cabad7ef1eed056e7965175476" title="Return the number of faces.">num_faces</a>(); ++f)
<a name="l00245"></a>00245       {
<a name="l00246"></a>00246         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> num_v = faces.<a class="code" href="classimesh__face__array__base.html#ae12f7c7a3a39fa76e9278da82d74854c" title="returns the number of vertices in face">num_verts</a>(f);
<a name="l00247"></a>00247         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;num_v; ++i) {
<a name="l00248"></a>00248           face.<a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/classvgl__polygon.html#a9b39a894706d91feb59fcdf05f8f879a">push_back</a>(<a class="code" href="classimesh__mesh.html#ac918f45a6354a265a2096a91b959c379" title="vector of texture coordinates.">tex_coords_</a>[<a class="code" href="classimesh__mesh.html#a0c318307ea669c54b7fe8f92b9f06df9" title="Access the vector of faces.">faces</a>(f,i)]);
<a name="l00249"></a>00249         }
<a name="l00250"></a>00250         <a class="code" href="classimesh__mesh.html#aed493ea026bb11c23c854f6e9eb24bf5" title="indicate which faces have texture data.">valid_tex_faces_</a>[f] = <a class="codeRef" doxygen="core_vgl.tag:../../../../../core/vgl/html" href="../../../../../core/vgl/html/vgl__area_8h.html#a0f0a4fe3360951a9ec4aee214471335e">vgl_area_signed</a>(face) &gt; 0;
<a name="l00251"></a>00251       }
<a name="l00252"></a>00252       <span class="keywordflow">break</span>;
<a name="l00253"></a>00253     }
<a name="l00254"></a>00254     <span class="keywordflow">case</span> <a class="code" href="classimesh__mesh.html#a21e233470b6ce89ff07187e5af06e06ea9ab6960ed9d4d72e4bff968d471c7779">TEX_COORD_ON_CORNER</a>:
<a name="l00255"></a>00255       vcl_cerr &lt;&lt; <span class="stringliteral">&quot;imesh_mesh::label_ccw_tex_faces_valid()&quot;</span>
<a name="l00256"></a>00256                &lt;&lt; <span class="stringliteral">&quot; not implemented for TEX_COORD_ON_CORNER\n&quot;</span>;
<a name="l00257"></a>00257       <span class="keywordflow">break</span>;
<a name="l00258"></a>00258     <span class="keywordflow">default</span>:
<a name="l00259"></a>00259       <span class="keywordflow">break</span>;
<a name="l00260"></a>00260   }
<a name="l00261"></a>00261 }
<a name="l00262"></a>00262 
<a name="l00263"></a>00263 <span class="comment">//Smart Pointer IO</span>
<a name="l00264"></a><a class="code" href="imesh__mesh_8h.html#a9425202cc34fd9999b56c4801ec8a0e9">00264</a> <span class="keywordtype">void</span> <a class="code" href="imesh__mesh_8cxx.html#a24a03a2ff30d5003896f0e7fbecf5405" title="Binary write boxm2_scene scene to stream.">vsl_b_write</a>(<a class="codeRef" doxygen="core_vsl.tag:../../../../../core/vsl/html" href="../../../../../core/vsl/html/classvsl__b__ostream.html">vsl_b_ostream</a>&amp; <span class="comment">/*os*/</span>, <a class="code" href="imesh__mesh_8h.html#aaed8c4c0442568d988d28ff33fa0b98c">imesh_mesh_sptr</a>&amp;) {}
<a name="l00265"></a><a class="code" href="imesh__mesh_8h.html#a00923612a6f9c74007c333f090072fee">00265</a> <span class="keywordtype">void</span> <a class="code" href="imesh__mesh_8cxx.html#a24a03a2ff30d5003896f0e7fbecf5405" title="Binary write boxm2_scene scene to stream.">vsl_b_write</a>(<a class="codeRef" doxygen="core_vsl.tag:../../../../../core/vsl/html" href="../../../../../core/vsl/html/classvsl__b__ostream.html">vsl_b_ostream</a>&amp; <span class="comment">/*os*/</span>, <a class="code" href="imesh__mesh_8h.html#aaed8c4c0442568d988d28ff33fa0b98c">imesh_mesh_sptr</a> <span class="keyword">const</span>&amp;) {}
<a name="l00266"></a>00266 
<a name="l00267"></a>00267 <span class="comment">//: Binary load boxm scene from stream.</span>
<a name="l00268"></a><a class="code" href="imesh__mesh_8h.html#acf0417aa96f248b081427907d8b99d9c">00268</a> <span class="keywordtype">void</span> <a class="code" href="imesh__mesh_8cxx.html#a4bc7db16932476e5d4def88f3658f68b" title="Binary load boxm scene from stream.">vsl_b_read</a>(<a class="codeRef" doxygen="core_vsl.tag:../../../../../core/vsl/html" href="../../../../../core/vsl/html/classvsl__b__istream.html">vsl_b_istream</a>&amp; <span class="comment">/*is*/</span>, <a class="code" href="imesh__mesh_8h.html#aaed8c4c0442568d988d28ff33fa0b98c">imesh_mesh_sptr</a>&amp;) {}
<a name="l00269"></a><a class="code" href="imesh__mesh_8h.html#a2ac89d9904282255961f8bb3a8da1137">00269</a> <span class="keywordtype">void</span> <a class="code" href="imesh__mesh_8cxx.html#a4bc7db16932476e5d4def88f3658f68b" title="Binary load boxm scene from stream.">vsl_b_read</a>(<a class="codeRef" doxygen="core_vsl.tag:../../../../../core/vsl/html" href="../../../../../core/vsl/html/classvsl__b__istream.html">vsl_b_istream</a>&amp; <span class="comment">/*is*/</span>, <a class="code" href="imesh__mesh_8h.html#aaed8c4c0442568d988d28ff33fa0b98c">imesh_mesh_sptr</a> <span class="keyword">const</span>&amp;) {}
</pre></div></div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Thu May 2 2013 08:52:55 for contrib/brl/bbas/imesh by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
