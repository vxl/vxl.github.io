<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>contrib/brl/bbas/bgui3d/bgui3d_translate_event.cxx Source File</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">contrib/brl/bbas/bgui3d/bgui3d_translate_event.cxx</div>  </div>
</div>
<div class="contents">
<a href="bgui3d__translate__event_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// This is brl/bbas/bgui3d/bgui3d_translate_event.cxx</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include &quot;<a class="code" href="bgui3d__translate__event_8h.html" title="translates vgui events into Coin3d events">bgui3d_translate_event.h</a>&quot;</span>
<a name="l00003"></a>00003 <span class="comment">//:</span>
<a name="l00004"></a>00004 <span class="comment">// \file</span>
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;Inventor/events/SoKeyboardEvent.h&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;Inventor/events/SoMouseButtonEvent.h&gt;</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;Inventor/events/SoLocation2Event.h&gt;</span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;<a class="codeRef" doxygen="core_vul.tag:../../../../../core/vul/html" href="../../../../../core/vul/html/vul__get__timestamp_8h.html">vul/vul_get_timestamp.h</a>&gt;</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="comment">//: Translate a \p vgui_event to an \p SoEvent*</span>
<a name="l00013"></a>00013 SoEvent*
<a name="l00014"></a><a class="code" href="bgui3d__translate__event_8h.html#a4fb9c87c1d9c9c111c70c04660bf19ea">00014</a> <a class="code" href="bgui3d__translate__event_8cxx.html#a4fb9c87c1d9c9c111c70c04660bf19ea" title="Translate a vgui_event to an SoEvent*.">bgui3d_translate_event</a>(<span class="keyword">const</span> <a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/classvgui__event.html">vgui_event</a>&amp; v_event)
<a name="l00015"></a>00015 {
<a name="l00016"></a>00016   SoEvent* i_event = NULL;
<a name="l00017"></a>00017   <span class="keywordflow">switch</span> (v_event.<a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/classvgui__event.html#af5db6f33f7177e79edd7ca43a6fdfae8">type</a>)
<a name="l00018"></a>00018   {
<a name="l00019"></a>00019    <span class="keywordflow">case</span> <a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/vgui__event_8h.html#ac6ee6befb4f2322850a8195269dcc6a2ac6d5531b8f31c4ce81a1637cd8f46c04">vgui_BUTTON_DOWN</a>: {
<a name="l00020"></a>00020     SoMouseButtonEvent * temp = <span class="keyword">new</span> SoMouseButtonEvent;
<a name="l00021"></a>00021     temp-&gt;setButton(SoMouseButtonEvent::Button(v_event.<a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/classvgui__event.html#a61855f439e07fbb2472b6511995db6ba">button</a>));
<a name="l00022"></a>00022     temp-&gt;setState(SoButtonEvent::DOWN);
<a name="l00023"></a>00023     i_event = temp;
<a name="l00024"></a>00024     <span class="keywordflow">break</span>; }
<a name="l00025"></a>00025    <span class="keywordflow">case</span> <a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/vgui__event_8h.html#ac6ee6befb4f2322850a8195269dcc6a2a91f2d2e72c037b14d72e81ba40aba4cb">vgui_BUTTON_UP</a>: {
<a name="l00026"></a>00026     SoMouseButtonEvent * temp = <span class="keyword">new</span> SoMouseButtonEvent;
<a name="l00027"></a>00027     temp-&gt;setButton(SoMouseButtonEvent::Button(v_event.<a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/classvgui__event.html#a61855f439e07fbb2472b6511995db6ba">button</a>));
<a name="l00028"></a>00028     temp-&gt;setState(SoButtonEvent::UP);
<a name="l00029"></a>00029     i_event = temp;
<a name="l00030"></a>00030     <span class="keywordflow">break</span>; }
<a name="l00031"></a>00031    <span class="keywordflow">case</span> <a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/vgui__event_8h.html#ac6ee6befb4f2322850a8195269dcc6a2a0feb87dd8d759159b34df8d1c42b7af2">vgui_MOTION</a>:
<a name="l00032"></a>00032     i_event = <span class="keyword">new</span> SoLocation2Event;
<a name="l00033"></a>00033     <span class="keywordflow">break</span>;
<a name="l00034"></a>00034    <span class="keywordflow">case</span> <a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/vgui__event_8h.html#ac6ee6befb4f2322850a8195269dcc6a2a54f90eaed6a395b090818aebc4bddc8b">vgui_KEY_PRESS</a>: {
<a name="l00035"></a>00035     SoKeyboardEvent * temp = <span class="keyword">new</span> SoKeyboardEvent;
<a name="l00036"></a>00036     temp-&gt;setKey(SoKeyboardEvent::Key(v_event.<a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/classvgui__event.html#ad65db37f3dc5e36ee2fe2e6790e1c45e">key</a>));
<a name="l00037"></a>00037     temp-&gt;setState(SoButtonEvent::DOWN);
<a name="l00038"></a>00038     i_event = temp;
<a name="l00039"></a>00039     <span class="keywordflow">break</span>; }
<a name="l00040"></a>00040    <span class="keywordflow">case</span> <a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/vgui__event_8h.html#ac6ee6befb4f2322850a8195269dcc6a2a872d4fff558a75a2eb5b9ba8301638f9">vgui_KEY_RELEASE</a>: {
<a name="l00041"></a>00041     SoKeyboardEvent * temp = <span class="keyword">new</span> SoKeyboardEvent;
<a name="l00042"></a>00042     temp-&gt;setKey(SoKeyboardEvent::Key(v_event.<a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/classvgui__event.html#ad65db37f3dc5e36ee2fe2e6790e1c45e">key</a>));
<a name="l00043"></a>00043     temp-&gt;setState(SoButtonEvent::UP);
<a name="l00044"></a>00044     i_event = temp;
<a name="l00045"></a>00045     <span class="keywordflow">break</span>; }
<a name="l00046"></a>00046    <span class="keywordflow">default</span>:
<a name="l00047"></a>00047     i_event = <span class="keyword">new</span> SoEvent;
<a name="l00048"></a>00048     <span class="keywordflow">break</span>;
<a name="l00049"></a>00049   }
<a name="l00050"></a>00050 
<a name="l00051"></a>00051   <span class="comment">// Compute the absolute timestamp since vgui_events only store</span>
<a name="l00052"></a>00052   <span class="comment">// time relative to the start of the application</span>
<a name="l00053"></a>00053   <span class="keywordtype">int</span> secs_now, msecs_now;
<a name="l00054"></a>00054   <a class="codeRef" doxygen="core_vul.tag:../../../../../core/vul/html" href="../../../../../core/vul/html/vul__get__timestamp_8cxx.html#a7d4e310775b4fa523810867827e31fb6">vul_get_timestamp</a>(secs_now, msecs_now);
<a name="l00055"></a>00055   <span class="comment">// adjust for time since this event was constructed (usually very small)</span>
<a name="l00056"></a>00056   <span class="keywordtype">long</span> usecs_now = long(msecs_now)*1000 + v_event.<a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/classvgui__event.html#a2d8b2d68901fedcfebd0dd1a5e584b2e">usecs_since</a>(<a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/classvgui__event.html">vgui_event</a>());
<a name="l00057"></a>00057   i_event-&gt;setTime(SbTime(secs_now, usecs_now));
<a name="l00058"></a>00058 
<a name="l00059"></a>00059   i_event-&gt;setPosition(SbVec2s(v_event.<a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/classvgui__event.html#a8085bedbdc4d966a4164a3fefbcf0c2d">wx</a>,v_event.<a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/classvgui__event.html#a370b62c8ed92379315bfe9eb56fa3173">wy</a>));
<a name="l00060"></a>00060 
<a name="l00061"></a>00061   <span class="keywordflow">switch</span> (v_event.<a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/classvgui__event.html#a631f98b610474fbdf86457588fcb5bc6">modifier</a>)
<a name="l00062"></a>00062   {
<a name="l00063"></a>00063    <span class="keywordflow">case</span> <a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/vgui__modifier_8h.html#a80dfa51d33517cda79e611b6ea3ad4aaa2fc35cdb923f85c067a641f7c529802c">vgui_CTRL</a>:
<a name="l00064"></a>00064     i_event-&gt;setCtrlDown(<span class="keyword">true</span>);
<a name="l00065"></a>00065     <span class="keywordflow">break</span>;
<a name="l00066"></a>00066    <span class="keywordflow">case</span> <a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/vgui__modifier_8h.html#a80dfa51d33517cda79e611b6ea3ad4aaae132b305b79b800f09bb6c3c69daeeb8">vgui_SHIFT</a>:
<a name="l00067"></a>00067     i_event-&gt;setShiftDown(<span class="keyword">true</span>);
<a name="l00068"></a>00068     <span class="keywordflow">break</span>;
<a name="l00069"></a>00069    <span class="keywordflow">case</span> <a class="codeRef" doxygen="core_vgui.tag:../../../../../core/vgui/html" href="../../../../../core/vgui/html/vgui__modifier_8h.html#a80dfa51d33517cda79e611b6ea3ad4aaac69d6d405d66d32a7f5e0e4967254388">vgui_ALT</a>:
<a name="l00070"></a>00070     i_event-&gt;setAltDown(<span class="keyword">true</span>);
<a name="l00071"></a>00071     <span class="keywordflow">break</span>;
<a name="l00072"></a>00072    <span class="keywordflow">default</span>:
<a name="l00073"></a>00073     <span class="keywordflow">break</span>;
<a name="l00074"></a>00074   }
<a name="l00075"></a>00075 
<a name="l00076"></a>00076   <span class="keywordflow">return</span> i_event;
<a name="l00077"></a>00077 }
</pre></div></div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Thu May 2 2013 08:52:43 for contrib/brl/bbas/bgui3d by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
