<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>contrib/brl/bseg/sdet/sdet_edgel_regions.h Source File</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">contrib/brl/bseg/sdet/sdet_edgel_regions.h</div>  </div>
</div>
<div class="contents">
<a href="sdet__edgel__regions_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// This is brl/bseg/sdet/sdet_edgel_regions.h</span>
<a name="l00002"></a>00002 <span class="preprocessor">#ifndef sdet_edgel_regions_h_</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#define sdet_edgel_regions_h_</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="comment">//:</span>
<a name="l00005"></a>00005 <span class="comment">// \file</span>
<a name="l00006"></a>00006 <span class="comment">// \brief generation of regions bounded by sdet_edgel chains</span>
<a name="l00007"></a>00007 <span class="comment">// \verbatim</span>
<a name="l00008"></a>00008 <span class="comment">//     Inputs:  vil1_image, vector&lt;vtol_edge_2d_sptr&gt;</span>
<a name="l00009"></a>00009 <span class="comment">//     Output: vector&lt;gevd_intensity_face_sptr&gt;</span>
<a name="l00010"></a>00010 <span class="comment">// \endverbatim</span>
<a name="l00011"></a>00011 <span class="comment">//  The idea is to generate regions by inserting boundaries into an</span>
<a name="l00012"></a>00012 <span class="comment">//  array.  The boundaries are defined by a set of edgel chains and</span>
<a name="l00013"></a>00013 <span class="comment">//  a boundary location is inserted at each edgel.  The array is</span>
<a name="l00014"></a>00014 <span class="comment">//  assumed to have a boundary at the perimeter of the ROI.</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">//  The array is scanned with a 2x2 neighborhood to form connected</span>
<a name="l00017"></a>00017 <span class="comment">//  components in the usual way. Each of the connected component labels are</span>
<a name="l00018"></a>00018 <span class="comment">//  reduced to the lowest equivalent label id by a transitive closure</span>
<a name="l00019"></a>00019 <span class="comment">//  on the equivalence table.</span>
<a name="l00020"></a>00020 <span class="comment">//</span>
<a name="l00021"></a>00021 <span class="comment">// A second scan of the label array is made to determine adjacency to</span>
<a name="l00022"></a>00022 <span class="comment">//  a given edge.  This process is enabled by a companion class,</span>
<a name="l00023"></a>00023 <span class="comment">//  the gevd_region_edge which has storage for two labels, corresponding to</span>
<a name="l00024"></a>00024 <span class="comment">//  each side of the edge.</span>
<a name="l00025"></a>00025 <span class="comment">//</span>
<a name="l00026"></a>00026 <span class="comment">//  The region edges are then used to collect the input edges which are</span>
<a name="l00027"></a>00027 <span class="comment">//  adjacent to a given region.  The set of edges adjacent to a region</span>
<a name="l00028"></a>00028 <span class="comment">//  are used to construct a multiply-connected sub-class of vtol_face_2d, the</span>
<a name="l00029"></a>00029 <span class="comment">//  vtol_intensity_face.  The vtol_intensity_face contains a</span>
<a name="l00030"></a>00030 <span class="comment">//  vdgl_digtial_region which holds arrays of pixel coordinates and values</span>
<a name="l00031"></a>00031 <span class="comment">//  within the face boundaries.</span>
<a name="l00032"></a>00032 <span class="comment">//</span>
<a name="l00033"></a>00033 <span class="comment">// \author Author J. L. Mundy - January 14, 1999</span>
<a name="l00034"></a>00034 <span class="comment">// \verbatim</span>
<a name="l00035"></a>00035 <span class="comment">// Modifications</span>
<a name="l00036"></a>00036 <span class="comment">//  25 April 2000 - collinsr@cs.rpi.edu - switched region_edges_</span>
<a name="l00037"></a>00037 <span class="comment">//                  to key on the Id() rather than the pointer value</span>
<a name="l00038"></a>00038 <span class="comment">//                  to avoid different hash tables (and different</span>
<a name="l00039"></a>00039 <span class="comment">//                  segmentations) for identical inputs (leaving the</span>
<a name="l00040"></a>00040 <span class="comment">//                  question of why the hash table order matters for</span>
<a name="l00041"></a>00041 <span class="comment">//                  another day)</span>
<a name="l00042"></a>00042 <span class="comment">// 24 April 2002 - Peter Vanroose - replaced GetLeftLabel and GetRightLabel</span>
<a name="l00043"></a>00043 <span class="comment">//                  by GetLabel, in accordance with sdet_region_edge change</span>
<a name="l00044"></a>00044 <span class="comment">//</span>
<a name="l00045"></a>00045 <span class="comment">// 19 November 2002 - J.L. Mundy moved to brl for further evolution</span>
<a name="l00046"></a>00046 <span class="comment">// 09 January 2003  - J.L. Mundy implemented expanded array resolution</span>
<a name="l00047"></a>00047 <span class="comment">//                    for more accurate connection neighborhoods</span>
<a name="l00048"></a>00048 <span class="comment">// \endverbatim</span>
<a name="l00049"></a>00049 <span class="comment">//</span>
<a name="l00050"></a>00050 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &lt;vcl_vector.h&gt;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &lt;vcl_map.h&gt;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &lt;<a class="codeRef" doxygen="core_vbl.tag:../../../../../core/vbl/html" href="../../../../../core/vbl/html/vbl__array__2d_8h.html">vbl/vbl_array_2d.h</a>&gt;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &lt;vil1/vil1_image.h&gt;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &lt;<a class="codeRef" doxygen="core_vil.tag:../../../../../core/vil/html" href="../../../../../core/vil/html/vil__image__resource_8h.html">vil/vil_image_resource.h</a>&gt;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &lt;<a class="codeRef" doxygen="contrib_gel_vtol.tag:../../../../../contrib/gel/vtol/html" href="../../../../../contrib/gel/vtol/html/vtol__edge__2d__sptr_8h.html">vtol/vtol_edge_2d_sptr.h</a>&gt;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &lt;gevd/gevd_bufferxy.h&gt;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &lt;<a class="codeRef" doxygen="contrib_gel_vtol.tag:../../../../../contrib/gel/vtol/html" href="../../../../../contrib/gel/vtol/html/vtol__intensity__face__sptr_8h.html">vtol/vtol_intensity_face_sptr.h</a>&gt;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &lt;<a class="code" href="sdet__region__edge__sptr_8h.html">sdet/sdet_region_edge_sptr.h</a>&gt;</span>
<a name="l00060"></a><a class="code" href="classsdet__edgel__regions.html">00060</a> 
<a name="l00061"></a>00061 <span class="keyword">class </span><a class="code" href="classsdet__edgel__regions.html">sdet_edgel_regions</a>
<a name="l00062"></a>00062 {
<a name="l00063"></a><a class="code" href="classsdet__edgel__regions.html#a799594c269b5eba3b5a5a3661c976f5ca82381b61253837b61f527cefb5d7dbd5">00063</a>  <span class="keyword">public</span>:
<a name="l00064"></a>00064   <span class="keyword">enum</span> <a class="code" href="classsdet__edgel__regions.html#a799594c269b5eba3b5a5a3661c976f5c">RegionLabel</a> {<a class="code" href="classsdet__edgel__regions.html#a799594c269b5eba3b5a5a3661c976f5ca82381b61253837b61f527cefb5d7dbd5">UNLABELED</a>=0, <a class="code" href="classsdet__edgel__regions.html#a799594c269b5eba3b5a5a3661c976f5cacdca00f3bf01eae8eeced98c49e84ae6">EDGE</a>, <a class="code" href="classsdet__edgel__regions.html#a799594c269b5eba3b5a5a3661c976f5ca34cfb1b2edf248c13a5dde67a1d11357">LABEL</a>};
<a name="l00065"></a>00065   <span class="comment">//Constructors/Destructors</span>
<a name="l00066"></a>00066   <a class="code" href="classsdet__edgel__regions.html#a43afd1ad6f8506fe75e498066d3d0030">sdet_edgel_regions</a>(<span class="keywordtype">int</span> array_scale=2, <span class="keywordtype">bool</span> verbose = <span class="keyword">false</span>,
<a name="l00067"></a>00067                      <span class="keywordtype">bool</span> debug = <span class="keyword">false</span>);
<a name="l00068"></a>00068   <a class="code" href="classsdet__edgel__regions.html#a71413068729db81bf920087cdf095eb5">~sdet_edgel_regions</a>();
<a name="l00069"></a>00069   <span class="comment">//Main process method</span>
<a name="l00070"></a>00070   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#a6d7fb0bb018dfece0254420fef593036" title="The key process loop.">compute_edgel_regions</a>(vil1_image <span class="keyword">const</span>&amp; image,
<a name="l00071"></a>00071                              vcl_vector&lt;vtol_edge_2d_sptr&gt;&amp; sgrp,
<a name="l00072"></a>00072                              vcl_vector&lt;vtol_intensity_face_sptr&gt;&amp; faces);
<a name="l00073"></a>00073 
<a name="l00074"></a>00074   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#a6d7fb0bb018dfece0254420fef593036" title="The key process loop.">compute_edgel_regions</a>(<a class="codeRef" doxygen="core_vil.tag:../../../../../core/vil/html" href="../../../../../core/vil/html/classvil__smart__ptr.html">vil_image_resource_sptr</a> <span class="keyword">const</span>&amp; image,
<a name="l00075"></a>00075                              vcl_vector&lt;vtol_edge_2d_sptr&gt;&amp; sgrp,
<a name="l00076"></a>00076                              vcl_vector&lt;vtol_intensity_face_sptr&gt;&amp; faces);
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 
<a name="l00079"></a>00079   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#a6d7fb0bb018dfece0254420fef593036" title="The key process loop.">compute_edgel_regions</a>(gevd_bufferxy* buf,
<a name="l00080"></a>00080                              vcl_vector&lt;vtol_edge_2d_sptr&gt;&amp; sgrp,
<a name="l00081"></a>00081                              vcl_vector&lt;vtol_intensity_face_sptr&gt;&amp; faces);
<a name="l00082"></a><a class="code" href="classsdet__edgel__regions.html#a888a41cea32deaca861bd26d739214d6">00082</a>   <span class="comment">//Acessors</span>
<a name="l00083"></a><a class="code" href="classsdet__edgel__regions.html#a02a521862d3e0708a3f2b05ddf23e29f">00083</a>   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a888a41cea32deaca861bd26d739214d6">SetVerbose</a>() { <a class="code" href="classsdet__edgel__regions.html#a36c7b2e4879094aaa0955740c77395fc">verbose_</a> = <span class="keyword">true</span>; }
<a name="l00084"></a><a class="code" href="classsdet__edgel__regions.html#af896259c19fa1537d840d2e6099ef688">00084</a>   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a02a521862d3e0708a3f2b05ddf23e29f">ClearVerbose</a>() { <a class="code" href="classsdet__edgel__regions.html#a36c7b2e4879094aaa0955740c77395fc">verbose_</a> = <span class="keyword">false</span>; }
<a name="l00085"></a><a class="code" href="classsdet__edgel__regions.html#aeada2542402708986d2ed56b934c32d2">00085</a>   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#af896259c19fa1537d840d2e6099ef688">SetDebug</a>() { <a class="code" href="classsdet__edgel__regions.html#a08d51b51e3a4879be1c022416d2d6cd9">debug_</a> = <span class="keyword">true</span>; }
<a name="l00086"></a>00086   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#aeada2542402708986d2ed56b934c32d2">ClearDebug</a>() { <a class="code" href="classsdet__edgel__regions.html#a08d51b51e3a4879be1c022416d2d6cd9">debug_</a> = <span class="keyword">false</span>; }
<a name="l00087"></a>00087 <span class="preprocessor">#if 0</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span>  <span class="keywordtype">void</span> set_magnification(<span class="keywordtype">float</span> magnification) { magnification_=magnification; }
<a name="l00089"></a>00089 <span class="preprocessor">#endif // 0</span>
<a name="l00090"></a><a class="code" href="classsdet__edgel__regions.html#ac27cf222cef893c8915588c5aa71a066">00090</a> <span class="preprocessor"></span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#a80eab4c00b0038d5ef4a1400652b1344" title="Get the most basic label equivalent to a given label.">BaseLabel</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> label);
<a name="l00091"></a><a class="code" href="classsdet__edgel__regions.html#a5672b210f0e48a4428525f73892e450e">00091</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#ac27cf222cef893c8915588c5aa71a066">GetMaxRegionLabel</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classsdet__edgel__regions.html#a1109dd7a8c843ff8624e44fc24b4dcb1">max_region_label_</a>; }
<a name="l00092"></a><a class="code" href="classsdet__edgel__regions.html#a74dd471d82337a9080afff210a73b4d7">00092</a>   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a5672b210f0e48a4428525f73892e450e">SetMaxRegionLabel</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> label) { <a class="code" href="classsdet__edgel__regions.html#a1109dd7a8c843ff8624e44fc24b4dcb1">max_region_label_</a> = label; }
<a name="l00093"></a><a class="code" href="classsdet__edgel__regions.html#a99e2913e16f8d0a0e7165a02c631c3d5">00093</a>   <a class="codeRef" doxygen="core_vbl.tag:../../../../../core/vbl/html" href="../../../../../core/vbl/html/classvbl__array__2d.html">vbl_array_2d&lt;unsigned int&gt;</a> <span class="keyword">const</span>&amp; <a class="code" href="classsdet__edgel__regions.html#a74dd471d82337a9080afff210a73b4d7">GetRegionArray</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classsdet__edgel__regions.html#afb98298b439ea783e0841cf7ecc1f71c">region_label_array_</a>; }
<a name="l00094"></a><a class="code" href="classsdet__edgel__regions.html#a8bdbe8735479990a51b502c5e1cb558b">00094</a>   <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#a99e2913e16f8d0a0e7165a02c631c3d5">GetXSize</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classsdet__edgel__regions.html#ae68f8877413fbd9108636e4b003fde35">xend_</a> - <a class="code" href="classsdet__edgel__regions.html#aa509d36a01bf255b0b3b9c92ba29b654">xo_</a> + 1; }
<a name="l00095"></a>00095   <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#a8bdbe8735479990a51b502c5e1cb558b">GetYSize</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classsdet__edgel__regions.html#aa248f8de70f6fa66e8d354287c3b1454">yend_</a> - <a class="code" href="classsdet__edgel__regions.html#aad6a4b0ecc6b9eda9235c949e378e31b">yo_</a> + 1; }
<a name="l00096"></a>00096 
<a name="l00097"></a>00097   vil1_image <a class="code" href="classsdet__edgel__regions.html#a88a28d11b850789ebd02c07e6bcb22ea" title="Return label image (255/0) indicating edgels.">GetEdgeImage</a>(vcl_vector&lt;vtol_edge_2d_sptr&gt;&amp; edgels);
<a name="l00098"></a>00098 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00099"></a>00099 <span class="preprocessor"></span>  topo_debug_data_ref get_topo_debug_data() { <span class="keywordflow">return</span> debug_data_; }
<a name="l00100"></a>00100 <span class="preprocessor">#endif</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span>  <span class="comment">// Utilities (especially for testing)</span>
<a name="l00102"></a>00102   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#abd42175abbb938186e66c50ea571c5e2" title="assign equivalence of region label b to region label a.">InsertRegionEquivalence</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> label_b, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> label_a);
<a name="l00103"></a>00103   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#aa5568e6a4263d6ce703e585556fe58a6" title="Form equivalence classes by transitive closure on each label.">GrowEquivalenceClasses</a>();
<a name="l00104"></a>00104   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#ae795a9ffa14d9a19e00b4d21cb867818" title="Populate the label_map_ to reflect the equivalences between labels.">PropagateEquivalence</a>();
<a name="l00105"></a>00105   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#a4bd4db78de3fcb938f472bb5a1995056" title="Get the a region label for an edge used to construct the boundaries.">GetLabel</a>(<a class="codeRef" doxygen="core_vbl.tag:../../../../../core/vbl/html" href="../../../../../core/vbl/html/classvbl__smart__ptr.html">vtol_edge_2d_sptr</a> e, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nr) <span class="keyword">const</span>;
<a name="l00106"></a>00106   <span class="comment">// Debug print methods</span>
<a name="l00107"></a>00107   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a66b4b7bc5d3c8c776f2e11a78d54e730" title="Print the region label array.">print_region_array</a>();
<a name="l00108"></a>00108   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#ae8caad4c9cd08091e4ac3d6435e7b804" title="Print the contents of the forward equivalence index.">print_region_equivalence</a>();
<a name="l00109"></a>00109   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a9d294fc2763a3cc5b9adb817889eb9e0" title="Print the contents of the reverse equivalence index.">print_reverse_region_equivalence</a>();
<a name="l00110"></a>00110   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#adde70e1e8557df0b5d27f0ed63584608" title="Print the reduced equivalence relation.">print_base_equivalence</a>();
<a name="l00111"></a>00111   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#af6afe04b04d8f70b75f09e60de801bc4" title="Print the fitted intensity data for all faces.">print_intensity_data</a>();
<a name="l00112"></a>00112  <span class="keyword">protected</span>:
<a name="l00113"></a>00113   <span class="comment">// Utilities</span>
<a name="l00114"></a>00114   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#a54d09af05dbd6cb430269f07373dc2bc" title="Check if the vtol_edge list sg (spatial group) contains edge(s).">GroupContainsEdges</a>(vcl_vector&lt;vtol_edge_2d_sptr&gt;&amp; sg);
<a name="l00115"></a>00115   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#a502b73615de439dc972b6534fb7adf32" title="Initialize the region label array.">InitRegionArray</a>(vcl_vector&lt;vtol_edge_2d_sptr&gt;&amp; sg);
<a name="l00116"></a>00116   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classsdet__edgel__regions.html#a7ad296e12b1c894992d8e0d77dc228a3" title="Get code for a given label.">label_code</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> label);
<a name="l00117"></a>00117   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#ab601bb3aaf1b2278207c777a6ddacfea" title="Add a new pair to the forward equivalence list.">add_to_forward</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> key, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value);
<a name="l00118"></a>00118   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#a1490e6ea3f2e307ea46c298fc8f19c02" title="Add a new pair to the reverse equivalence list.">add_to_reverse</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> key, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value);
<a name="l00119"></a>00119   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classsdet__edgel__regions.html#a4bcf26a9940314a36e82ca257cd0b50f" title="Encode a 2x2 neighborhood with the state of the region array for a given location.">EncodeNeighborhood</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ul, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ur,
<a name="l00120"></a>00120                                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ll, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lr);
<a name="l00121"></a>00121   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#ae103e0518c6c3b8d08da5fa430e4fe9a" title="Propagate connected components.">UpdateConnectedNeighborhood</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y);
<a name="l00122"></a>00122   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#aaa21fe0f428342b970b1542cbdd11515" title="After connected components have been generated pass over the array and assign region labels to the sd...">AssignEdgeLabels</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y);
<a name="l00123"></a>00123   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a95984bcf87a73e54662c62d0b0e2fc41" title="Scan the region_label_array_ and apply the region equivalence map.">ApplyRegionEquivalence</a>();
<a name="l00124"></a>00124   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#a1edf82e668b3d6bd5a9f93b619b5f073" title="Bounds check on region_label_array_.">out_of_bounds</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y);
<a name="l00125"></a>00125   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a79270653ed12502a2f3eebcf3a799177" title="Insert an Edge into the adjacency list for a region.">insert_adjacency</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> region, <a class="codeRef" doxygen="core_vbl.tag:../../../../../core/vbl/html" href="../../../../../core/vbl/html/classvbl__smart__ptr.html">vtol_edge_2d_sptr</a> e);
<a name="l00126"></a>00126   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a4899cb1098aab415916f8366e0835f35" title="Get the edges adjacent to each region.">CollectEdges</a>();
<a name="l00127"></a>00127   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a3452d14c999b56bc16d794e10c187fce" title="Trace through the topology network keeping regions on the left.">CollectFaceEdges</a>();
<a name="l00128"></a>00128   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#ae0080e3018127653ef9c0551c6c3b4a2" title="Construct face(s) from edge(s) in the face_edge_index_ array.">ConstructFaces</a>();
<a name="l00129"></a>00129   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a8a4c4e83fd8d1aa4ed2bd5baccb8a08d" title="Accumulate intensity statistics from each region and update the vtol_intensity_face parameters...">AccumulateMeans</a>();
<a name="l00130"></a>00130   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a4b00fe5ecc78b48342ed7f1f18828fe5" title="Insert region pixels into the vtol_intensity_face arrays.">AccumulateRegionData</a>();
<a name="l00131"></a>00131   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a44ca3bd14d3ac0a9a76c7522a85372da" title="Do both a scatter matrix update and insertion into the region pixel arrays of each intensity face...">InsertFaceData</a>();
<a name="l00132"></a>00132   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#a9966f980042dac3b64cb65ff8e15ffb4" title="The region array can be offset from the corner of the ROI.">X</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x);
<a name="l00133"></a>00133   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#af4d058ca8f9a87eed04f2338618e2e23" title="The region array can be offset from the corner of the ROI.">Y</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y);
<a name="l00134"></a>00134   <span class="keywordtype">float</span> <a class="code" href="classsdet__edgel__regions.html#ad5597ce769eb8039b2beb214ffc290fb" title="Transforms the image x coordinate to the array coordinate with a scale factor.">Xf</a>(<span class="keywordtype">float</span> x);
<a name="l00135"></a>00135   <span class="keywordtype">float</span> <a class="code" href="classsdet__edgel__regions.html#a4c7e0fdbe29bcd7d36764f6285a575b4">Yf</a>(<span class="keywordtype">float</span> y);
<a name="l00136"></a>00136   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#abe6eabc6945b4c042e3caa6e41df3a63" title="A utility for inserting an edgel into the region_label_array_.">insert_edgel</a>(<span class="keywordtype">float</span> pre_x, <span class="keywordtype">float</span> pre_y, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y,
<a name="l00137"></a>00137                     <a class="codeRef" doxygen="core_vbl.tag:../../../../../core/vbl/html" href="../../../../../core/vbl/html/classvbl__smart__ptr.html">sdet_region_edge_sptr</a> <span class="keyword">const</span>&amp; e);
<a name="l00138"></a>00138   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a1304ecdb826dc2ac664c9d010b856b2b" title="This is the fundamental assignment of label equivalence.">insert_equivalence</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ll, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ur, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; lr);
<a name="l00139"></a>00139   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#af663502b7c7ceafa2933cd6495cb60cc" title="Find the set of labels equivalent to label from a given hash table and merge into equivalence_set_...">merge_equivalence</a>(vcl_map&lt;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>, vcl_vector&lt;unsigned int&gt;* &gt;&amp; tab,
<a name="l00140"></a>00140                          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cur_label,
<a name="l00141"></a>00141                          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> label);
<a name="l00142"></a>00142   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#a7e44979cb28902172fadb8473480dcaa" title="Find the next label not accounted for in the current equivalence set.">get_next_label</a>(vcl_vector&lt;unsigned int&gt;* labels,
<a name="l00143"></a>00143                       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; label);
<a name="l00144"></a>00144   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a9d4a24c70ebc8c2da637e5cc5d281a96" title="A collision is defined by the condition where a region is bounded by two different edges at adjacent ...">print_edge_colis</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y,
<a name="l00145"></a>00145                         <a class="codeRef" doxygen="core_vbl.tag:../../../../../core/vbl/html" href="../../../../../core/vbl/html/classvbl__smart__ptr.html">sdet_region_edge_sptr</a> <span class="keyword">const</span> &amp; r1,
<a name="l00146"></a>00146                         <a class="codeRef" doxygen="core_vbl.tag:../../../../../core/vbl/html" href="../../../../../core/vbl/html/classvbl__smart__ptr.html">sdet_region_edge_sptr</a> <span class="keyword">const</span> &amp; r2);
<a name="l00147"></a>00147 
<a name="l00148"></a>00148   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#a1c22c70b49f7763d12bcbf935d5ca095" title="Remove hairs from region boundary.">remove_hairs</a>(vcl_vector&lt;vtol_edge_2d_sptr&gt;&amp; edges);
<a name="l00149"></a>00149 
<a name="l00150"></a>00150   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#a6eb5089f1341f65e08a4736013a4c3e8" title="get a row from a BufferXY.">get_buffer_row</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> row);
<a name="l00151"></a>00151   <span class="keywordtype">void</span> <a class="code" href="classsdet__edgel__regions.html#ac27a39da4a596e8324627a0a8c5ef36f" title="Get an image row.">get_image_row</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> row);
<a name="l00152"></a>00152   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classsdet__edgel__regions.html#ab755d7afb74837912f9d744b86310312" title="Get the intensity of a single pixel.">get_intensity</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x);
<a name="l00153"></a>00153   <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#a43c28d8b43e41f8cca1884050e6d7d8b">bytes_per_pix</a>();
<a name="l00154"></a>00154 
<a name="l00155"></a>00155   <span class="comment">//to be used after image or buf are set</span>
<a name="l00156"></a>00156   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#a6d7fb0bb018dfece0254420fef593036" title="The key process loop.">compute_edgel_regions</a>(vcl_vector&lt;vtol_edge_2d_sptr&gt;&amp; sgrp,
<a name="l00157"></a>00157                              vcl_vector&lt;vtol_intensity_face_sptr&gt;&amp; faces);
<a name="l00158"></a>00158 
<a name="l00159"></a><a class="code" href="classsdet__edgel__regions.html#a36c7b2e4879094aaa0955740c77395fc">00159</a>   <span class="comment">//members</span>
<a name="l00160"></a><a class="code" href="classsdet__edgel__regions.html#a08d51b51e3a4879be1c022416d2d6cd9">00160</a>   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#a36c7b2e4879094aaa0955740c77395fc">verbose_</a>;
<a name="l00161"></a><a class="code" href="classsdet__edgel__regions.html#ab880819d3ad47697b9a9be86ab3799e4">00161</a>   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#a08d51b51e3a4879be1c022416d2d6cd9">debug_</a>;
<a name="l00162"></a><a class="code" href="classsdet__edgel__regions.html#a52c1ed7e1b23f7c2d4e09a7d31322764">00162</a>   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#ab880819d3ad47697b9a9be86ab3799e4">image_source_</a>;
<a name="l00163"></a><a class="code" href="classsdet__edgel__regions.html#a42e9df071a34a2ab12547a443cd1aae9">00163</a>   <span class="keywordtype">bool</span> <a class="code" href="classsdet__edgel__regions.html#a52c1ed7e1b23f7c2d4e09a7d31322764">buf_source_</a>;
<a name="l00164"></a><a class="code" href="classsdet__edgel__regions.html#aa3dbb71d64b88c69a45e21a20598c127">00164</a>   <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#a42e9df071a34a2ab12547a443cd1aae9">s_</a>;<span class="comment">//resolution factor for label, edge arrays</span>
<a name="l00165"></a><a class="code" href="classsdet__edgel__regions.html#a44c4f3c4dab6757e6613f10c7f6845a4">00165</a>   vil1_image <a class="code" href="classsdet__edgel__regions.html#aa3dbb71d64b88c69a45e21a20598c127">image_</a>;
<a name="l00166"></a><a class="code" href="classsdet__edgel__regions.html#a6b3225e67aac7e9136f447ac7a7483e1">00166</a>   gevd_bufferxy* <a class="code" href="classsdet__edgel__regions.html#a44c4f3c4dab6757e6613f10c7f6845a4">buf_</a>;
<a name="l00167"></a><a class="code" href="classsdet__edgel__regions.html#afb98298b439ea783e0841cf7ecc1f71c">00167</a>   <a class="codeRef" doxygen="core_vbl.tag:../../../../../core/vbl/html" href="../../../../../core/vbl/html/classvbl__array__2d.html">vbl_array_2d&lt;sdet_region_edge_sptr&gt;</a> <a class="code" href="classsdet__edgel__regions.html#a6b3225e67aac7e9136f447ac7a7483e1">edge_boundary_array_</a>;
<a name="l00168"></a><a class="code" href="classsdet__edgel__regions.html#a8b45d9a73ad8733720789548d0d01e16">00168</a>   <a class="codeRef" doxygen="core_vbl.tag:../../../../../core/vbl/html" href="../../../../../core/vbl/html/classvbl__array__2d.html">vbl_array_2d&lt;unsigned int&gt;</a> <a class="code" href="classsdet__edgel__regions.html#afb98298b439ea783e0841cf7ecc1f71c">region_label_array_</a>;
<a name="l00169"></a><a class="code" href="classsdet__edgel__regions.html#a1109dd7a8c843ff8624e44fc24b4dcb1">00169</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#a8b45d9a73ad8733720789548d0d01e16">min_region_label_</a>;
<a name="l00170"></a><a class="code" href="classsdet__edgel__regions.html#a30e67f2b98be926ea71373fb309599a2">00170</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#a1109dd7a8c843ff8624e44fc24b4dcb1">max_region_label_</a>;
<a name="l00171"></a><a class="code" href="classsdet__edgel__regions.html#ac05accf5d55ef73f98c87093084c1d54">00171</a>   <span class="keywordtype">float</span> <a class="code" href="classsdet__edgel__regions.html#a30e67f2b98be926ea71373fb309599a2">Xob_</a>;<span class="comment">//buffer X origin in original image</span>
<a name="l00172"></a><a class="code" href="classsdet__edgel__regions.html#aa509d36a01bf255b0b3b9c92ba29b654">00172</a>   <span class="keywordtype">float</span> <a class="code" href="classsdet__edgel__regions.html#ac05accf5d55ef73f98c87093084c1d54">Yob_</a>;<span class="comment">//buffer Y origin in original image</span>
<a name="l00173"></a><a class="code" href="classsdet__edgel__regions.html#aad6a4b0ecc6b9eda9235c949e378e31b">00173</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#aa509d36a01bf255b0b3b9c92ba29b654">xo_</a>;                    <span class="comment">//X index of starting array element</span>
<a name="l00174"></a><a class="code" href="classsdet__edgel__regions.html#ae68f8877413fbd9108636e4b003fde35">00174</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#aad6a4b0ecc6b9eda9235c949e378e31b">yo_</a>;                    <span class="comment">//Y index of starting array element</span>
<a name="l00175"></a><a class="code" href="classsdet__edgel__regions.html#aa248f8de70f6fa66e8d354287c3b1454">00175</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#ae68f8877413fbd9108636e4b003fde35">xend_</a>;                  <span class="comment">//X index of ending array element</span>
<a name="l00176"></a><a class="code" href="classsdet__edgel__regions.html#accacd427e88961091d0a3e22603d911e">00176</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#aa248f8de70f6fa66e8d354287c3b1454">yend_</a>;                  <span class="comment">//Y index of ending array element</span>
<a name="l00177"></a><a class="code" href="classsdet__edgel__regions.html#a97feed4821a9b7cc44016d920b2bc0a5">00177</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#accacd427e88961091d0a3e22603d911e">xs_</a>;
<a name="l00178"></a>00178   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classsdet__edgel__regions.html#a97feed4821a9b7cc44016d920b2bc0a5">ys_</a>;
<a name="l00179"></a><a class="code" href="classsdet__edgel__regions.html#a7da7f59dfb83bd9fb379cbd06ae6352c">00179</a>   <span class="comment">//Region label equivalency hash tables</span>
<a name="l00180"></a><a class="code" href="classsdet__edgel__regions.html#a24e3045a62df2dd528f96e7727b4b893">00180</a>   vcl_map&lt;unsigned int, vcl_vector&lt;unsigned int&gt;* &gt; <a class="code" href="classsdet__edgel__regions.html#a7da7f59dfb83bd9fb379cbd06ae6352c">region_pairs_forward_</a>;
<a name="l00181"></a><a class="code" href="classsdet__edgel__regions.html#a04a9fbf0faad1812ac29a40adadcc664">00181</a>   vcl_map&lt;unsigned int, vcl_vector&lt;unsigned int&gt;* &gt; <a class="code" href="classsdet__edgel__regions.html#a24e3045a62df2dd528f96e7727b4b893">region_pairs_reverse_</a>;
<a name="l00182"></a><a class="code" href="classsdet__edgel__regions.html#acb3f0d6d8f89991565cbf8c064d587f8">00182</a>   vcl_map&lt;unsigned int, vcl_vector&lt;unsigned int&gt;* &gt; <a class="code" href="classsdet__edgel__regions.html#a04a9fbf0faad1812ac29a40adadcc664">equivalence_set_</a>;
<a name="l00183"></a>00183   vcl_map&lt;unsigned int, unsigned int &gt; <a class="code" href="classsdet__edgel__regions.html#acb3f0d6d8f89991565cbf8c064d587f8">label_map_</a>;
<a name="l00184"></a><a class="code" href="classsdet__edgel__regions.html#a6639f3f712a0c8e5373782c81e5f2b58">00184</a>   <span class="comment">//hash table for Edge&lt;-&gt;sdet_region_edge relationship</span>
<a name="l00185"></a><a class="code" href="classsdet__edgel__regions.html#add026804173de1ba0de6e8590d9c66ab">00185</a>   vcl_map&lt;int, sdet_region_edge_sptr&gt; <a class="code" href="classsdet__edgel__regions.html#a6639f3f712a0c8e5373782c81e5f2b58">region_edges_</a>;
<a name="l00186"></a>00186   vcl_map&lt;unsigned int, vcl_vector&lt;vtol_edge_2d_sptr&gt;* &gt; <a class="code" href="classsdet__edgel__regions.html#add026804173de1ba0de6e8590d9c66ab">region_edge_adjacency_</a>;
<a name="l00187"></a><a class="code" href="classsdet__edgel__regions.html#a04e5008f56a862ec7530aacf28500f9d">00187</a>   <span class="comment">//Final output vtol_intensity_face(s) and relation to corresponding region label</span>
<a name="l00188"></a><a class="code" href="classsdet__edgel__regions.html#a9f5b7f5171bbb98c3f1912dbee4ccc8e">00188</a>   vcl_vector&lt;vtol_intensity_face_sptr&gt;* <a class="code" href="classsdet__edgel__regions.html#a04e5008f56a862ec7530aacf28500f9d">faces_</a>;
<a name="l00189"></a><a class="code" href="classsdet__edgel__regions.html#a145b8a065cdb2d6a4e71d5f790c80921">00189</a>   <a class="codeRef" doxygen="core_vbl.tag:../../../../../core/vbl/html" href="../../../../../core/vbl/html/classvbl__smart__ptr.html">vtol_intensity_face_sptr</a>* <a class="code" href="classsdet__edgel__regions.html#a9f5b7f5171bbb98c3f1912dbee4ccc8e">intensity_face_index_</a>;
<a name="l00190"></a><a class="code" href="classsdet__edgel__regions.html#a910bf505d534560550ee1a053473545d">00190</a>   vcl_vector&lt;vtol_edge_2d_sptr&gt;** <a class="code" href="classsdet__edgel__regions.html#a145b8a065cdb2d6a4e71d5f790c80921">face_edge_index_</a>;
<a name="l00191"></a>00191   vcl_vector&lt;vtol_edge_2d_sptr&gt;* <a class="code" href="classsdet__edgel__regions.html#a910bf505d534560550ee1a053473545d">failed_insertions_</a>; <span class="comment">//Short edges that fail</span>
<a name="l00192"></a>00192 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00193"></a>00193 <span class="preprocessor"></span>  topo_debug_data_ref debug_data_;
<a name="l00194"></a><a class="code" href="classsdet__edgel__regions.html#a2d4efc00d6ba25c86272568337b386dd">00194</a> <span class="preprocessor">#endif</span>
<a name="l00195"></a><a class="code" href="classsdet__edgel__regions.html#adc6c07c24e5b89c5955adca4bb2d1994">00195</a> <span class="preprocessor"></span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="classsdet__edgel__regions.html#a2d4efc00d6ba25c86272568337b386dd">ubuf_</a>;
<a name="l00196"></a>00196   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>* <a class="code" href="classsdet__edgel__regions.html#adc6c07c24e5b89c5955adca4bb2d1994">sbuf_</a>;
<a name="l00197"></a>00197 };
<a name="l00198"></a>00198 
<a name="l00199"></a>00199 <span class="preprocessor">#endif // sdet_edgel_regions_h_</span>
</pre></div></div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Thu May 2 2013 08:53:32 for contrib/brl/bseg/sdet by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
