<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>m23d_ortho_flexible_builder Class Reference</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">m23d_ortho_flexible_builder Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="m23d_ortho_flexible_builder" -->
<p>Algorithm to estimate 3D shape basis from multiple 2D views.  
 <a href="classm23d__ortho__flexible__builder.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>&gt;</code></p>

<p><a href="classm23d__ortho__flexible__builder-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a0b7e4dd1254a435e0e99c0d91ccc75a6">reconstruct</a> (const vcl_vector&lt; vcl_vector&lt; <a class="elRef" doxygen="core_vgl.tag:../../../../core/vgl/html" href="../../../../core/vgl/html/classvgl__point__2d.html">vgl_point_2d</a>&lt; double &gt; &gt; &gt; &amp;pt_vec_list, const unsigned &amp;n_modes)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reconstruct structure from set of 2d pts.  <a href="#a0b7e4dd1254a435e0e99c0d91ccc75a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a067e851c88572f4b84fa0070de5a9908">partial_reconstruct</a> (const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;P2D, unsigned n_modes)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reconstruct approximate structure of 3D points given multiple 2D views.  <a href="#a067e851c88572f4b84fa0070de5a9908"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#abd1c7b7641cad7626628b3d36016b677">reconstruct_with_first_as_basis</a> (const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;P2D, unsigned n_modes)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reconstruct structure of 3D points given multiple 2D views.  <a href="#abd1c7b7641cad7626628b3d36016b677"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a806b45b2b87fbff3ac8ace3087163da8">reconstruct</a> (const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;P2D, unsigned n_modes)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reconstruct structure of 3D points given multiple 2D views.  <a href="#a806b45b2b87fbff3ac8ace3087163da8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#ab9e16abe17b18aebaf917d68c65a1ffd">shape_3d</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return 3(m+1) x np matrix, each column containing modes for one 3D point.  <a href="#ab9e16abe17b18aebaf917d68c65a1ffd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a6d81f0b66e58ae68b091f7cb52b2863b">projections</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The 2ns x 3(m+1) projection matrix.  <a href="#a6d81f0b66e58ae68b091f7cb52b2863b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a7d0e5b1e119077419ad870442267cc25">centred_views</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Centred version of the 2D views supplied to <a class="el" href="classm23d__ortho__flexible__builder.html#a0b7e4dd1254a435e0e99c0d91ccc75a6" title="Reconstruct structure from set of 2d pts.">reconstruct()</a>.  <a href="#a7d0e5b1e119077419ad870442267cc25"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#aff633e18e8bfdd742c3a55246c350e22">pure_projections</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The 2ns x 3 matrix. Each 2x3 block is the projection for a given view.  <a href="#aff633e18e8bfdd742c3a55246c350e22"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a643c06acf4d08dd975d565c28a15c8b6">coeffs</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">ns x (m+1) matrix, each row of which contains the weights for a shape.  <a href="#a643c06acf4d08dd975d565c28a15c8b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a970d5dcd0a6881d0e777214b7717aabc">refine</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Refine estimates of projection and structure.  <a href="#a970d5dcd0a6881d0e777214b7717aabc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a1d4e2931c544dcccdca06f792f06ab94">correct_coord_frame</a> (<a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;P, <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;B)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply rotation matrices to each 3 columns of P (and inverse to rows of B).  <a href="#a1d4e2931c544dcccdca06f792f06ab94"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#ab8a9d739d11c949eb15c524aa04a8bd1">compute_correction</a> (const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;M1, <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;G)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute correction matrix so that M1.G has suitable projection properties.  <a href="#ab8a9d739d11c949eb15c524aa04a8bd1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#acc1332cb2eb3d2b608fe8e0c0287eb33">mean_shape</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return mean 3D shape as a 3 x np matrix.  <a href="#acc1332cb2eb3d2b608fe8e0c0287eb33"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#afdd34789b83683f3b0ce085d546284b8">shape</a> (unsigned i) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return 3D shape i as a 3 x np matrix.  <a href="#afdd34789b83683f3b0ce085d546284b8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__vector.html">vnl_vector</a>&lt; double &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#ae0a6335e1117292b9a822df684f088f3">mean_coeffs</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Mean coefficients.  <a href="#ae0a6335e1117292b9a822df684f088f3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a89ebb9ddcab519e7679c4dbf87c13644">get_shape_3d_pts</a> (vcl_vector&lt; <a class="elRef" doxygen="core_vgl.tag:../../../../core/vgl/html" href="../../../../core/vgl/html/classvgl__point__3d.html">vgl_point_3d</a>&lt; double &gt; &gt; &amp;pts) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return 3d pts given 3*np matrix.  <a href="#a89ebb9ddcab519e7679c4dbf87c13644"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#aec47fc24aa364ace9c7ea6283ef87dfd">set_view_data</a> (const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;P2D)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Take copy of 2D points and remove CoG from each.  <a href="#aec47fc24aa364ace9c7ea6283ef87dfd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a41193172ee1af51872433fedc1b5f25f">initial_decomposition</a> (unsigned n_modes)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Decompose centred view data to get initial estimate of shape/projection.  <a href="#a41193172ee1af51872433fedc1b5f25f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a3ef36aacad1a214af36196a78dcc8897">disambiguate_z</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Disambiguate the ambiguity in the sign of the z ordinates.  <a href="#a3ef36aacad1a214af36196a78dcc8897"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a70075be5c878f2fce75035b4fe9e3ad5">make_pure_projections</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Modify projection matrices so they are scaled orthographic projections.  <a href="#a70075be5c878f2fce75035b4fe9e3ad5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#adeb4871fbc10b6c483f13f72362eaf15">compute_mean</a> (<a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;mean_shape, <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__vector.html">vnl_vector</a>&lt; double &gt; &amp;mean_coeffs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the mean 3D shape.  <a href="#adeb4871fbc10b6c483f13f72362eaf15"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a05fb408bd7e71f32ca0e5913ef249290">mat_to_3d_pts</a> (vcl_vector&lt; <a class="elRef" doxygen="core_vgl.tag:../../../../core/vgl/html" href="../../../../core/vgl/html/classvgl__point__3d.html">vgl_point_3d</a>&lt; double &gt; &gt; &amp;pts, const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;M) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return 3d pts given 3*np matrix.  <a href="#a05fb408bd7e71f32ca0e5913ef249290"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a101954e3dfc51cb04e0b810636216a07">P3D_</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">3(1+m) x np matrix, each column containing one 3D point.  <a href="#a101954e3dfc51cb04e0b810636216a07"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a3e73d18745867740e4d9b37ba65901a1">P_</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The 2ns x 3(1+m) projection matrix.  <a href="#a3e73d18745867740e4d9b37ba65901a1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vcl_vector&lt; <a class="elRef" doxygen="core_vgl.tag:../../../../core/vgl/html" href="../../../../core/vgl/html/classvgl__point__2d.html">vgl_point_2d</a><br class="typebreak"/>
&lt; double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a939fa037294396a3fdebaa05d50423b8">cog_</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The CoG of each shape supplied to <a class="el" href="classm23d__ortho__flexible__builder.html#a0b7e4dd1254a435e0e99c0d91ccc75a6" title="Reconstruct structure from set of 2d pts.">reconstruct()</a>.  <a href="#a939fa037294396a3fdebaa05d50423b8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#acae9744d5c8246124b01bdf668758fbc">P2Dc_</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Centred version of the 2D views supplied to <a class="el" href="classm23d__ortho__flexible__builder.html#a0b7e4dd1254a435e0e99c0d91ccc75a6" title="Reconstruct structure from set of 2d pts.">reconstruct()</a>.  <a href="#acae9744d5c8246124b01bdf668758fbc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#aa79c6157e9d22fb7e3da3eb11c71c43b">pure_P_</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The 2ns x 3 matrix. Each 2x3 block is the projection for a given view.  <a href="#aa79c6157e9d22fb7e3da3eb11c71c43b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#ac5fe5e82c1c46644991559a80f34c23d">coeffs_</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">ns x (m+1) matrix, each row of which contains the weights for a shape.  <a href="#ac5fe5e82c1c46644991559a80f34c23d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a94eac51c4978aa78b503b2f7c13b29a5">mean_shape_</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Mean 3D shape as a 3 x np matrix.  <a href="#a94eac51c4978aa78b503b2f7c13b29a5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__vector.html">vnl_vector</a>&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classm23d__ortho__flexible__builder.html#a4ac7b202c206912b5b121423543fd9db">mean_coeffs_</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Mean coefficients.  <a href="#a4ac7b202c206912b5b121423543fd9db"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Algorithm to estimate 3D shape basis from multiple 2D views. </p>
<p>ses the method of Xiao, Chai and Kanade (CVPR 2004). Generates projection matrix, P, and 3D point matrix P3D, such that P2D = P.P3D. Uncertainty in projection is constrained by setting the projection for the first shape to the identity (1 0 0; 0 1 0)</p>
<p>The ambiguity in the sign of the z ordinates is fixed by arranging that the first non-zero z ordinate should be negative.</p>
<p>Note that the 2D point sets will be normalised so that their CoG is at the origin. The resulting 3D shape bases will also have their CoG at the origin. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00029">29</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a7d0e5b1e119077419ad870442267cc25"></a><!-- doxytag: member="m23d_ortho_flexible_builder::centred_views" ref="a7d0e5b1e119077419ad870442267cc25" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt;double&gt;&amp; m23d_ortho_flexible_builder::centred_views </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Centred version of the 2D views supplied to <a class="el" href="classm23d__ortho__flexible__builder.html#a0b7e4dd1254a435e0e99c0d91ccc75a6" title="Reconstruct structure from set of 2d pts.">reconstruct()</a>. </p>
<p>Each 2D shape has been translated so that its CoG is at the origin </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00131">131</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<a class="anchor" id="a643c06acf4d08dd975d565c28a15c8b6"></a><!-- doxytag: member="m23d_ortho_flexible_builder::coeffs" ref="a643c06acf4d08dd975d565c28a15c8b6" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt;double&gt;&amp; m23d_ortho_flexible_builder::coeffs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ns x (m+1) matrix, each row of which contains the weights for a shape. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00138">138</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab8a9d739d11c949eb15c524aa04a8bd1"></a><!-- doxytag: member="m23d_ortho_flexible_builder::compute_correction" ref="ab8a9d739d11c949eb15c524aa04a8bd1" args="(const vnl_matrix&lt; double &gt; &amp;M1, vnl_matrix&lt; double &gt; &amp;G)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void m23d_ortho_flexible_builder::compute_correction </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>M1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>G</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compute correction matrix so that M1.G has suitable projection properties. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00356">356</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="adeb4871fbc10b6c483f13f72362eaf15"></a><!-- doxytag: member="m23d_ortho_flexible_builder::compute_mean" ref="adeb4871fbc10b6c483f13f72362eaf15" args="(vnl_matrix&lt; double &gt; &amp;mean_shape, vnl_vector&lt; double &gt; &amp;mean_coeffs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void m23d_ortho_flexible_builder::compute_mean </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>mean_shape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__vector.html">vnl_vector</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>mean_coeffs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compute the mean 3D shape. </p>
<p>Compute the mean 3D shape using the current co-effs. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00573">573</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="a1d4e2931c544dcccdca06f792f06ab94"></a><!-- doxytag: member="m23d_ortho_flexible_builder::correct_coord_frame" ref="a1d4e2931c544dcccdca06f792f06ab94" args="(vnl_matrix&lt; double &gt; &amp;P, vnl_matrix&lt; double &gt; &amp;B)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void m23d_ortho_flexible_builder::correct_coord_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>P</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>B</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Apply rotation matrices to each 3 columns of P (and inverse to rows of B). </p>
<p>Matrix selected so that projection matrices in each 3 cols have same effective rotation. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00387">387</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="a3ef36aacad1a214af36196a78dcc8897"></a><!-- doxytag: member="m23d_ortho_flexible_builder::disambiguate_z" ref="a3ef36aacad1a214af36196a78dcc8897" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void m23d_ortho_flexible_builder::disambiguate_z </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disambiguate the ambiguity in the sign of the z ordinates. </p>
<p>First non-zero element should be negative. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00169">169</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="a89ebb9ddcab519e7679c4dbf87c13644"></a><!-- doxytag: member="m23d_ortho_flexible_builder::get_shape_3d_pts" ref="a89ebb9ddcab519e7679c4dbf87c13644" args="(vcl_vector&lt; vgl_point_3d&lt; double &gt; &gt; &amp;pts) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void m23d_ortho_flexible_builder::get_shape_3d_pts </td>
          <td>(</td>
          <td class="paramtype">vcl_vector&lt; <a class="elRef" doxygen="core_vgl.tag:../../../../core/vgl/html" href="../../../../core/vgl/html/classvgl__point__3d.html">vgl_point_3d</a>&lt; double &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>pts</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return 3d pts given 3*np matrix. </p>
<p>Get back 3d pts rotated and shifted for each frame. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00602">602</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="a41193172ee1af51872433fedc1b5f25f"></a><!-- doxytag: member="m23d_ortho_flexible_builder::initial_decomposition" ref="a41193172ee1af51872433fedc1b5f25f" args="(unsigned n_modes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void m23d_ortho_flexible_builder::initial_decomposition </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>n_modes</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Decompose centred view data to get initial estimate of shape/projection. </p>
<p>Uncertain up to an affine transformation </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00147">147</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="a70075be5c878f2fce75035b4fe9e3ad5"></a><!-- doxytag: member="m23d_ortho_flexible_builder::make_pure_projections" ref="a70075be5c878f2fce75035b4fe9e3ad5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void m23d_ortho_flexible_builder::make_pure_projections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Modify projection matrices so they are scaled orthographic projections. </p>
<p>P = s(I|0)*R </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00479">479</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="a05fb408bd7e71f32ca0e5913ef249290"></a><!-- doxytag: member="m23d_ortho_flexible_builder::mat_to_3d_pts" ref="a05fb408bd7e71f32ca0e5913ef249290" args="(vcl_vector&lt; vgl_point_3d&lt; double &gt; &gt; &amp;pts, const vnl_matrix&lt; double &gt; &amp;M) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void m23d_ortho_flexible_builder::mat_to_3d_pts </td>
          <td>(</td>
          <td class="paramtype">vcl_vector&lt; <a class="elRef" doxygen="core_vgl.tag:../../../../core/vgl/html" href="../../../../core/vgl/html/classvgl__point__3d.html">vgl_point_3d</a>&lt; double &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>pts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>M</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return 3d pts given 3*np matrix. </p>
<p>Return 3d rigid pts, i.e., aligned with first frame. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00642">642</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="ae0a6335e1117292b9a822df684f088f3"></a><!-- doxytag: member="m23d_ortho_flexible_builder::mean_coeffs" ref="ae0a6335e1117292b9a822df684f088f3" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__vector.html">vnl_vector</a>&lt;double&gt;&amp; m23d_ortho_flexible_builder::mean_coeffs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Mean coefficients. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00160">160</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<a class="anchor" id="acc1332cb2eb3d2b608fe8e0c0287eb33"></a><!-- doxytag: member="m23d_ortho_flexible_builder::mean_shape" ref="acc1332cb2eb3d2b608fe8e0c0287eb33" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt;double&gt;&amp; m23d_ortho_flexible_builder::mean_shape </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return mean 3D shape as a 3 x np matrix. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00154">154</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<a class="anchor" id="a067e851c88572f4b84fa0070de5a9908"></a><!-- doxytag: member="m23d_ortho_flexible_builder::partial_reconstruct" ref="a067e851c88572f4b84fa0070de5a9908" args="(const vnl_matrix&lt; double &gt; &amp;P2D, unsigned n_modes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void m23d_ortho_flexible_builder::partial_reconstruct </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>P2D</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>n_modes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reconstruct approximate structure of 3D points given multiple 2D views. </p>
<p>Reconstruct structure of 3D points given multiple 2D views.</p>
<p>Data assumed to be scaled orthographic projections The result is stored in the <a class="el" href="classm23d__ortho__flexible__builder.html#ab9e16abe17b18aebaf917d68c65a1ffd" title="Return 3(m+1) x np matrix, each column containing modes for one 3D point.">shape_3d()</a> matrix. The estimated projection matrices are stored in the <a class="el" href="classm23d__ortho__flexible__builder.html#a6d81f0b66e58ae68b091f7cb52b2863b" title="The 2ns x 3(m+1) projection matrix.">projections()</a> matrix However, the projection matrices are not necessarily consistent. Call <a class="el" href="classm23d__ortho__flexible__builder.html#a970d5dcd0a6881d0e777214b7717aabc" title="Refine estimates of projection and structure.">refine()</a> to ensure consistancy, (or use reconstruct(P2D,n_modes) This is exposed to aid testing and debugging. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">P2D</td><td>2ns x np matrix. Rows contain alternating x's and y's from 2D shapes</td></tr>
  </table>
  </dd>
</dl>
<p>Data assumed to be scaled orthographic projections The result is stored in the <a class="el" href="classm23d__ortho__flexible__builder.html#ab9e16abe17b18aebaf917d68c65a1ffd" title="Return 3(m+1) x np matrix, each column containing modes for one 3D point.">shape_3d()</a> matrix. The estimated projection matrices are stored in the <a class="el" href="classm23d__ortho__flexible__builder.html#a6d81f0b66e58ae68b091f7cb52b2863b" title="The 2ns x 3(m+1) projection matrix.">projections()</a> matrix </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">P2D</td><td>2ns x np matrix. Rows contain alternating x's and y's from 2D shapes </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00193">193</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="a6d81f0b66e58ae68b091f7cb52b2863b"></a><!-- doxytag: member="m23d_ortho_flexible_builder::projections" ref="a6d81f0b66e58ae68b091f7cb52b2863b" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt;double&gt;&amp; m23d_ortho_flexible_builder::projections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The 2ns x 3(m+1) projection matrix. </p>
<p>Each 2x3 sub-matrix is a scaled orthographic projection matrix </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00127">127</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<a class="anchor" id="aff633e18e8bfdd742c3a55246c350e22"></a><!-- doxytag: member="m23d_ortho_flexible_builder::pure_projections" ref="aff633e18e8bfdd742c3a55246c350e22" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt;double&gt;&amp; m23d_ortho_flexible_builder::pure_projections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The 2ns x 3 matrix. Each 2x3 block is the projection for a given view. </p>
<p>Each 2x3 sub-matrix is a scaled orthographic projection matrix </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00135">135</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0b7e4dd1254a435e0e99c0d91ccc75a6"></a><!-- doxytag: member="m23d_ortho_flexible_builder::reconstruct" ref="a0b7e4dd1254a435e0e99c0d91ccc75a6" args="(const vcl_vector&lt; vcl_vector&lt; vgl_point_2d&lt; double &gt; &gt; &gt; &amp;pt_vec_list, const unsigned &amp;n_modes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void m23d_ortho_flexible_builder::reconstruct </td>
          <td>(</td>
          <td class="paramtype">const vcl_vector&lt; vcl_vector&lt; <a class="elRef" doxygen="core_vgl.tag:../../../../core/vgl/html" href="../../../../core/vgl/html/classvgl__point__2d.html">vgl_point_2d</a>&lt; double &gt; &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>pt_vec_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned &amp;&#160;</td>
          <td class="paramname"><em>n_modes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reconstruct structure from set of 2d pts. </p>
<p>formulates measurement matrix P2D then calls <a class="el" href="classm23d__ortho__flexible__builder.html#a0b7e4dd1254a435e0e99c0d91ccc75a6" title="Reconstruct structure from set of 2d pts.">reconstruct()</a> function</p>
<p>Formulates measurement matrix P2D then calls <a class="el" href="classm23d__ortho__flexible__builder.html#a0b7e4dd1254a435e0e99c0d91ccc75a6" title="Reconstruct structure from set of 2d pts.">reconstruct()</a> function </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00049">49</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="a806b45b2b87fbff3ac8ace3087163da8"></a><!-- doxytag: member="m23d_ortho_flexible_builder::reconstruct" ref="a806b45b2b87fbff3ac8ace3087163da8" args="(const vnl_matrix&lt; double &gt; &amp;P2D, unsigned n_modes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void m23d_ortho_flexible_builder::reconstruct </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>P2D</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>n_modes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reconstruct structure of 3D points given multiple 2D views. </p>
<p>Data assumed to be scaled orthographic projections The result is stored in the <a class="el" href="classm23d__ortho__flexible__builder.html#ab9e16abe17b18aebaf917d68c65a1ffd" title="Return 3(m+1) x np matrix, each column containing modes for one 3D point.">shape_3d()</a> matrix. The estimated projection matrices are stored in the <a class="el" href="classm23d__ortho__flexible__builder.html#a6d81f0b66e58ae68b091f7cb52b2863b" title="The 2ns x 3(m+1) projection matrix.">projections()</a> matrix Automatically select views which form a good basis. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">P2D</td><td>2ns x np matrix. Rows contain alternating x's and y's from 2D shapes </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00086">86</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="abd1c7b7641cad7626628b3d36016b677"></a><!-- doxytag: member="m23d_ortho_flexible_builder::reconstruct_with_first_as_basis" ref="abd1c7b7641cad7626628b3d36016b677" args="(const vnl_matrix&lt; double &gt; &amp;P2D, unsigned n_modes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void m23d_ortho_flexible_builder::reconstruct_with_first_as_basis </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>P2D</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>n_modes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reconstruct structure of 3D points given multiple 2D views. </p>
<p>Data assumed to be scaled orthographic projections The result is stored in the <a class="el" href="classm23d__ortho__flexible__builder.html#ab9e16abe17b18aebaf917d68c65a1ffd" title="Return 3(m+1) x np matrix, each column containing modes for one 3D point.">shape_3d()</a> matrix. The estimated projection matrices are stored in the <a class="el" href="classm23d__ortho__flexible__builder.html#a6d81f0b66e58ae68b091f7cb52b2863b" title="The 2ns x 3(m+1) projection matrix.">projections()</a> matrix The first (n_modes+1) views are assumed to define a basis for the modes. This might not be ideal. Use <a class="el" href="classm23d__ortho__flexible__builder.html#a0b7e4dd1254a435e0e99c0d91ccc75a6" title="Reconstruct structure from set of 2d pts.">reconstruct()</a> to automatically select views which form a good basis. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">P2D</td><td>2ns x np matrix. Rows contain alternating x's and y's from 2D shapes</td></tr>
  </table>
  </dd>
</dl>
<p>Data assumed to be scaled orthographic projections The result is stored in the <a class="el" href="classm23d__ortho__flexible__builder.html#ab9e16abe17b18aebaf917d68c65a1ffd" title="Return 3(m+1) x np matrix, each column containing modes for one 3D point.">shape_3d()</a> matrix. The estimated projection matrices are stored in the <a class="el" href="classm23d__ortho__flexible__builder.html#a6d81f0b66e58ae68b091f7cb52b2863b" title="The 2ns x 3(m+1) projection matrix.">projections()</a> matrix </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">P2D</td><td>2ns x np matrix. Rows contain alternating x's and y's from 2D shapes </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00030">30</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="a970d5dcd0a6881d0e777214b7717aabc"></a><!-- doxytag: member="m23d_ortho_flexible_builder::refine" ref="a970d5dcd0a6881d0e777214b7717aabc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void m23d_ortho_flexible_builder::refine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Refine estimates of projection and structure. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00555">555</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="aec47fc24aa364ace9c7ea6283ef87dfd"></a><!-- doxytag: member="m23d_ortho_flexible_builder::set_view_data" ref="aec47fc24aa364ace9c7ea6283ef87dfd" args="(const vnl_matrix&lt; double &gt; &amp;P2D)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void m23d_ortho_flexible_builder::set_view_data </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>P2D</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Take copy of 2D points and remove CoG from each. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00123">123</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="afdd34789b83683f3b0ce085d546284b8"></a><!-- doxytag: member="m23d_ortho_flexible_builder::shape" ref="afdd34789b83683f3b0ce085d546284b8" args="(unsigned i) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt; double &gt; m23d_ortho_flexible_builder::shape </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return 3D shape i as a 3 x np matrix. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html#l00591">591</a> of file <a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a>.</p>

</div>
</div>
<a class="anchor" id="ab9e16abe17b18aebaf917d68c65a1ffd"></a><!-- doxytag: member="m23d_ortho_flexible_builder::shape_3d" ref="ab9e16abe17b18aebaf917d68c65a1ffd" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt;double&gt;&amp; m23d_ortho_flexible_builder::shape_3d </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return 3(m+1) x np matrix, each column containing modes for one 3D point. </p>
<p>Points are centred on the origin. Each 3 rows contains one of the (1+m) bases. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00123">123</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ac5fe5e82c1c46644991559a80f34c23d"></a><!-- doxytag: member="m23d_ortho_flexible_builder::coeffs_" ref="ac5fe5e82c1c46644991559a80f34c23d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt;double&gt; <a class="el" href="classm23d__ortho__flexible__builder.html#ac5fe5e82c1c46644991559a80f34c23d">m23d_ortho_flexible_builder::coeffs_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ns x (m+1) matrix, each row of which contains the weights for a shape. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00053">53</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<a class="anchor" id="a939fa037294396a3fdebaa05d50423b8"></a><!-- doxytag: member="m23d_ortho_flexible_builder::cog_" ref="a939fa037294396a3fdebaa05d50423b8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vcl_vector&lt;<a class="elRef" doxygen="core_vgl.tag:../../../../core/vgl/html" href="../../../../core/vgl/html/classvgl__point__2d.html">vgl_point_2d</a>&lt;double&gt; &gt; <a class="el" href="classm23d__ortho__flexible__builder.html#a939fa037294396a3fdebaa05d50423b8">m23d_ortho_flexible_builder::cog_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The CoG of each shape supplied to <a class="el" href="classm23d__ortho__flexible__builder.html#a0b7e4dd1254a435e0e99c0d91ccc75a6" title="Reconstruct structure from set of 2d pts.">reconstruct()</a>. </p>
<p>This has been subtracted from each example to centre on the origin Centred data stored in P2Dc_ </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00042">42</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4ac7b202c206912b5b121423543fd9db"></a><!-- doxytag: member="m23d_ortho_flexible_builder::mean_coeffs_" ref="a4ac7b202c206912b5b121423543fd9db" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__vector.html">vnl_vector</a>&lt;double&gt; <a class="el" href="classm23d__ortho__flexible__builder.html#a4ac7b202c206912b5b121423543fd9db">m23d_ortho_flexible_builder::mean_coeffs_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Mean coefficients. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00059">59</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<a class="anchor" id="a94eac51c4978aa78b503b2f7c13b29a5"></a><!-- doxytag: member="m23d_ortho_flexible_builder::mean_shape_" ref="a94eac51c4978aa78b503b2f7c13b29a5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt;double&gt; <a class="el" href="classm23d__ortho__flexible__builder.html#a94eac51c4978aa78b503b2f7c13b29a5">m23d_ortho_flexible_builder::mean_shape_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Mean 3D shape as a 3 x np matrix. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00056">56</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<a class="anchor" id="acae9744d5c8246124b01bdf668758fbc"></a><!-- doxytag: member="m23d_ortho_flexible_builder::P2Dc_" ref="acae9744d5c8246124b01bdf668758fbc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt;double&gt; <a class="el" href="classm23d__ortho__flexible__builder.html#acae9744d5c8246124b01bdf668758fbc">m23d_ortho_flexible_builder::P2Dc_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Centred version of the 2D views supplied to <a class="el" href="classm23d__ortho__flexible__builder.html#a0b7e4dd1254a435e0e99c0d91ccc75a6" title="Reconstruct structure from set of 2d pts.">reconstruct()</a>. </p>
<p>Each 2D shape has been translated so that its CoG is at the origin </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00046">46</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<a class="anchor" id="a101954e3dfc51cb04e0b810636216a07"></a><!-- doxytag: member="m23d_ortho_flexible_builder::P3D_" ref="a101954e3dfc51cb04e0b810636216a07" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt;double&gt; <a class="el" href="classm23d__ortho__flexible__builder.html#a101954e3dfc51cb04e0b810636216a07">m23d_ortho_flexible_builder::P3D_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>3(1+m) x np matrix, each column containing one 3D point. </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00033">33</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3e73d18745867740e4d9b37ba65901a1"></a><!-- doxytag: member="m23d_ortho_flexible_builder::P_" ref="a3e73d18745867740e4d9b37ba65901a1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt;double&gt; <a class="el" href="classm23d__ortho__flexible__builder.html#a3e73d18745867740e4d9b37ba65901a1">m23d_ortho_flexible_builder::P_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The 2ns x 3(1+m) projection matrix. </p>
<p>Each 2x3 sub-matrix is a scaled orthographic projection matrix </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00037">37</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa79c6157e9d22fb7e3da3eb11c71c43b"></a><!-- doxytag: member="m23d_ortho_flexible_builder::pure_P_" ref="aa79c6157e9d22fb7e3da3eb11c71c43b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/classvnl__matrix.html">vnl_matrix</a>&lt;double&gt; <a class="el" href="classm23d__ortho__flexible__builder.html#aa79c6157e9d22fb7e3da3eb11c71c43b">m23d_ortho_flexible_builder::pure_P_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The 2ns x 3 matrix. Each 2x3 block is the projection for a given view. </p>
<p>Each 2x3 sub-matrix is a scaled orthographic projection matrix </p>

<p>Definition at line <a class="el" href="m23d__ortho__flexible__builder_8h_source.html#l00050">50</a> of file <a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>contrib/mul/m23d/<a class="el" href="m23d__ortho__flexible__builder_8h_source.html">m23d_ortho_flexible_builder.h</a></li>
<li>contrib/mul/m23d/<a class="el" href="m23d__ortho__flexible__builder_8cxx_source.html">m23d_ortho_flexible_builder.cxx</a></li>
</ul>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 1 2013 17:34:31 for contrib/mul/m23d by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
