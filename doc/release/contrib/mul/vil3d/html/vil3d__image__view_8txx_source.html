<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>contrib/mul/vil3d/vil3d_image_view.txx Source File</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">contrib/mul/vil3d/vil3d_image_view.txx</div>  </div>
</div>
<div class="contents">
<a href="vil3d__image__view_8txx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// This is mul/vil3d/vil3d_image_view.txx</span>
<a name="l00002"></a>00002 <span class="preprocessor">#ifndef vil3d_image_view_txx_</span>
<a name="l00003"></a><a class="code" href="vil3d__image__view_8txx.html#abfa01596c94f593d236ecaed151473b0">00003</a> <span class="preprocessor"></span><span class="preprocessor">#define vil3d_image_view_txx_</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="comment">//:</span>
<a name="l00005"></a>00005 <span class="comment">// \file</span>
<a name="l00006"></a>00006 <span class="comment">// \brief Represent images of one or more planes of Ts.</span>
<a name="l00007"></a>00007 <span class="comment">// \author Tim Cootes, Ian Scott</span>
<a name="l00008"></a>00008 <span class="comment">//</span>
<a name="l00009"></a>00009 <span class="comment">// Note: To keep down size of vil3d_image_view</span>
<a name="l00010"></a>00010 <span class="comment">// Please think carefully before adding any new methods.</span>
<a name="l00011"></a>00011 <span class="comment">// In particular any methods that provide new views (e.g. vil3d_slice)</span>
<a name="l00012"></a>00012 <span class="comment">// will be more usefully provided as external functions. - IMS.</span>
<a name="l00013"></a>00013 <span class="comment">// In that case, use the &quot;relates&quot; keyword of Doxygen to link the documentation</span>
<a name="l00014"></a>00014 <span class="comment">// of that function to the vil3d_image_view class.</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="preprocessor">#include &quot;<a class="code" href="vil3d__image__view_8h.html" title="A base class reference-counting view of some image data.">vil3d_image_view.h</a>&quot;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;vcl_cstring.h&gt;</span> <span class="comment">// for std::memset</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;vcl_string.h&gt;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;vcl_cassert.h&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;vcl_ostream.h&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;vcl_algorithm.h&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;<a class="codeRef" doxygen="core_vil.tag:../../../../core/vil/html" href="../../../../core/vil/html/vil__pixel__format_8h.html">vil/vil_pixel_format.h</a>&gt;</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="comment">//=======================================================================</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00027"></a><a class="code" href="classvil3d__image__view.html#a449e4bd01e6721246cdca200f24dfe0d">00027</a> <a class="code" href="classvil3d__image__view.html#a449e4bd01e6721246cdca200f24dfe0d" title="Dflt ctor.">vil3d_image_view&lt;T&gt;::vil3d_image_view</a>()
<a name="l00028"></a>00028 : top_left_(0),istep_(0),jstep_(0),kstep_(0),planestep_(0)
<a name="l00029"></a>00029 {}
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00032"></a><a class="code" href="classvil3d__image__view.html#a226082794aa2499009708c83e17913aa">00032</a> <a class="code" href="classvil3d__image__view.html#a449e4bd01e6721246cdca200f24dfe0d" title="Dflt ctor.">vil3d_image_view&lt;T&gt;::vil3d_image_view</a>(<span class="keywordtype">unsigned</span> ni, <span class="keywordtype">unsigned</span> nj,
<a name="l00033"></a>00033                                       <span class="keywordtype">unsigned</span> nk, <span class="keywordtype">unsigned</span> n_planes)
<a name="l00034"></a>00034 : top_left_(0),istep_(1),jstep_(0),kstep_(0)
<a name="l00035"></a>00035 {
<a name="l00036"></a>00036   <a class="code" href="classvil3d__image__view.html#a7a232d9de8bd8ab762effc30ab1a83f4" title="resize current planes to ni x nj x nk.">set_size</a>(ni,nj,nk,n_planes);
<a name="l00037"></a>00037 }
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="comment">//: Set this view to look at someone else&#39;s memory data.</span>
<a name="l00040"></a>00040 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00041"></a><a class="code" href="classvil3d__image__view.html#a1921a92f5e99a08e40d35332e9fed40e">00041</a> <a class="code" href="classvil3d__image__view.html#a449e4bd01e6721246cdca200f24dfe0d" title="Dflt ctor.">vil3d_image_view&lt;T&gt;::vil3d_image_view</a>(<span class="keyword">const</span> T* top_left,
<a name="l00042"></a>00042                                       <span class="keywordtype">unsigned</span> n_i, <span class="keywordtype">unsigned</span> n_j, <span class="keywordtype">unsigned</span> n_k, <span class="keywordtype">unsigned</span> n_planes,
<a name="l00043"></a>00043                                       vcl_ptrdiff_t i_step, vcl_ptrdiff_t j_step,
<a name="l00044"></a>00044                                       vcl_ptrdiff_t k_step, vcl_ptrdiff_t plane_step)
<a name="l00045"></a>00045 {
<a name="l00046"></a>00046   set_to_memory(top_left,n_i,n_j,n_k,n_planes,i_step,j_step,k_step,plane_step);
<a name="l00047"></a>00047 }
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="comment">//: Set this view to look at another view&#39;s data</span>
<a name="l00050"></a>00050 <span class="comment">//  Need to pass the memory chunk to set up the internal smart ptr appropriately</span>
<a name="l00051"></a>00051 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00052"></a><a class="code" href="classvil3d__image__view.html#aaaab3377d31818b5e3a8dfc1e727042e">00052</a> <a class="code" href="classvil3d__image__view.html#a449e4bd01e6721246cdca200f24dfe0d" title="Dflt ctor.">vil3d_image_view&lt;T&gt;::vil3d_image_view</a>(<span class="keyword">const</span> <a class="codeRef" doxygen="core_vil.tag:../../../../core/vil/html" href="../../../../core/vil/html/classvil__smart__ptr.html">vil_memory_chunk_sptr</a>&amp; mem_chunk,
<a name="l00053"></a>00053                                       <span class="keyword">const</span> T* top_left, <span class="keywordtype">unsigned</span> n_i, <span class="keywordtype">unsigned</span> n_j,
<a name="l00054"></a>00054                                       <span class="keywordtype">unsigned</span> n_k, <span class="keywordtype">unsigned</span> n_planes,
<a name="l00055"></a>00055                                       vcl_ptrdiff_t i_step, vcl_ptrdiff_t j_step,
<a name="l00056"></a>00056                                       vcl_ptrdiff_t k_step, vcl_ptrdiff_t plane_step)
<a name="l00057"></a>00057  : <a class="code" href="classvil3d__image__view__base.html" title="An abstract base class of smart pointers to actual image data in memory.">vil3d_image_view_base</a>(n_i, n_j, n_k, n_planes)
<a name="l00058"></a>00058  , top_left_(const_cast&lt;T*&gt;(top_left))
<a name="l00059"></a>00059  , istep_(i_step), jstep_(j_step), kstep_(k_step)
<a name="l00060"></a>00060  , planestep_(plane_step)
<a name="l00061"></a>00061  , ptr_(mem_chunk)
<a name="l00062"></a>00062 {
<a name="l00063"></a>00063   <span class="keywordflow">if</span> (mem_chunk) <span class="comment">// if we are doing a view transform on a non-owned image, then mem_chunk will be 0.</span>
<a name="l00064"></a>00064   {
<a name="l00065"></a>00065     <span class="comment">// check view and chunk are in rough agreement</span>
<a name="l00066"></a>00066     assert(mem_chunk-&gt;size() &gt;= n_planes*n_i*n_j*n_k*<span class="keyword">sizeof</span>(T));
<a name="l00067"></a>00067     <span class="keywordflow">if</span> (<a class="code" href="classvil3d__image__view__base.html#a6e3dc4332b40b76f0496029b17c9d8b7" title="The number of pixels.">size</a>() &amp;&amp; (top_left  &lt; reinterpret_cast&lt;const T*&gt;(mem_chunk-&gt;data()) ||
<a name="l00068"></a>00068         top_left &gt;= reinterpret_cast&lt;const T*&gt;(reinterpret_cast&lt;char*&gt;(mem_chunk-&gt;data()) + mem_chunk-&gt;size()) ))
<a name="l00069"></a>00069       vcl_cerr &lt;&lt; <span class="stringliteral">&quot;top_left at &quot;</span> &lt;&lt; static_cast&lt;const void*&gt;(top_left) &lt;&lt; <span class="stringliteral">&quot;, memory_chunk at &quot;</span>
<a name="l00070"></a>00070                &lt;&lt; <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(mem_chunk-&gt;data()) &lt;&lt; <span class="stringliteral">&quot;, size &quot;</span> &lt;&lt; mem_chunk-&gt;size()
<a name="l00071"></a>00071                &lt;&lt; <span class="stringliteral">&quot;, size of data type &quot;</span> &lt;&lt; <span class="keyword">sizeof</span>(T) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00072"></a>00072     assert(!<a class="code" href="classvil3d__image__view__base.html#a6e3dc4332b40b76f0496029b17c9d8b7" title="The number of pixels.">size</a>() || (top_left &gt;= reinterpret_cast&lt;const T*&gt;(mem_chunk-&gt;data()) &amp;&amp;
<a name="l00073"></a>00073            top_left  &lt; reinterpret_cast&lt;const T*&gt;(reinterpret_cast&lt;char*&gt;(mem_chunk-&gt;data()) + mem_chunk-&gt;size()) ));
<a name="l00074"></a>00074   }
<a name="l00075"></a>00075 }
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="comment">//: Copy constructor</span>
<a name="l00078"></a>00078 <span class="comment">// If this view cannot set itself to view the other data (because the pixel</span>
<a name="l00079"></a>00079 <span class="comment">// formats are incompatible) it will set itself to empty.</span>
<a name="l00080"></a>00080 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00081"></a><a class="code" href="classvil3d__image__view.html#a6c5600aa5c30a3975c3088982896858b">00081</a> <a class="code" href="classvil3d__image__view.html#a449e4bd01e6721246cdca200f24dfe0d" title="Dflt ctor.">vil3d_image_view&lt;T&gt;::vil3d_image_view</a>(<span class="keyword">const</span> <a class="code" href="classvil3d__image__view.html" title="Concrete view of image data of type T held in memory.">vil3d_image_view&lt;T&gt;</a>&amp; im)
<a name="l00082"></a>00082   : <a class="code" href="classvil3d__image__view__base.html" title="An abstract base class of smart pointers to actual image data in memory.">vil3d_image_view_base</a>(im.ni(), im.nj(), im.nk(), im.nplanes()),
<a name="l00083"></a>00083     top_left_(im.top_left_), istep_(im.istep()), jstep_(im.jstep()),
<a name="l00084"></a>00084     kstep_(im.kstep()), planestep_(im.planestep()), ptr_(im.memory_chunk())
<a name="l00085"></a>00085 {
<a name="l00086"></a>00086   <span class="keywordflow">if</span> (static_cast&lt;vil3d_image_view_base const&amp;&gt;(im).<a class="code" href="classvil3d__image__view.html#a536a21d9eaa55763f2b6fbe9ffedce2a" title="Return a description of the concrete data pixel type.">pixel_format</a>() != <a class="code" href="classvil3d__image__view.html#a536a21d9eaa55763f2b6fbe9ffedce2a" title="Return a description of the concrete data pixel type.">pixel_format</a>())
<a name="l00087"></a>00087     <a class="code" href="classvil3d__image__view.html#a140d2bfb821ecec1b3277ba8da4dee31" title="Make empty.">clear</a>();
<a name="l00088"></a>00088 }
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 <span class="comment">//: Create shallow copy of image with given base reference</span>
<a name="l00091"></a>00091 <span class="comment">//  Sets to empty image if target is of different pixel type</span>
<a name="l00092"></a>00092 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00093"></a><a class="code" href="classvil3d__image__view.html#af3ceb71abb6708285dec7023ce859b00">00093</a> <a class="code" href="classvil3d__image__view.html#a449e4bd01e6721246cdca200f24dfe0d" title="Dflt ctor.">vil3d_image_view&lt;T&gt;::vil3d_image_view</a>(<span class="keyword">const</span> <a class="code" href="classvil3d__image__view__base.html" title="An abstract base class of smart pointers to actual image data in memory.">vil3d_image_view_base</a>&amp; base_ref)
<a name="l00094"></a>00094   : top_left_(0),istep_(0),jstep_(0),kstep_(0),planestep_(0)
<a name="l00095"></a>00095 {
<a name="l00096"></a>00096   <a class="code" href="classvil3d__image__view.html#a8852361c0245082bd8751daea7084241" title="Copy a view. The rhs and lhs will point to the same image data.">operator=</a>(base_ref);
<a name="l00097"></a>00097 }
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 <span class="comment">//: Create shallow copy of image with given base reference</span>
<a name="l00100"></a>00100 <span class="comment">//  Sets to empty image if target is of different pixel type</span>
<a name="l00101"></a>00101 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00102"></a><a class="code" href="classvil3d__image__view.html#a6f70c88d9589b6aead189b734e699acd">00102</a> <a class="code" href="classvil3d__image__view.html#a449e4bd01e6721246cdca200f24dfe0d" title="Dflt ctor.">vil3d_image_view&lt;T&gt;::vil3d_image_view</a>(<span class="keyword">const</span> <a class="codeRef" doxygen="core_vil.tag:../../../../core/vil/html" href="../../../../core/vil/html/classvil__smart__ptr.html">vil3d_image_view_base_sptr</a>&amp; base_sptr)
<a name="l00103"></a>00103   : top_left_(0),istep_(0),jstep_(0),kstep_(0),planestep_(0)
<a name="l00104"></a>00104 {
<a name="l00105"></a>00105   <a class="code" href="classvil3d__image__view.html#a8852361c0245082bd8751daea7084241" title="Copy a view. The rhs and lhs will point to the same image data.">operator=</a>(base_sptr);
<a name="l00106"></a>00106 }
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 <span class="comment">//: Create shallow copy of image with same type image</span>
<a name="l00109"></a>00109 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00110"></a><a class="code" href="classvil3d__image__view.html#a8852361c0245082bd8751daea7084241">00110</a> <span class="keyword">const</span> <a class="code" href="classvil3d__image__view.html" title="Concrete view of image data of type T held in memory.">vil3d_image_view&lt;T&gt;</a>&amp; <a class="code" href="classvil3d__image__view.html#a8852361c0245082bd8751daea7084241" title="Copy a view. The rhs and lhs will point to the same image data.">vil3d_image_view&lt;T&gt;::operator=</a>(<span class="keyword">const</span> <a class="code" href="classvil3d__image__view.html" title="Concrete view of image data of type T held in memory.">vil3d_image_view&lt;T&gt;</a>&amp; rhs)
<a name="l00111"></a>00111 {
<a name="l00112"></a>00112   <span class="keywordflow">return</span> operator=( static_cast&lt;vil3d_image_view_base const&amp;&gt;(rhs) );
<a name="l00113"></a>00113 }
<a name="l00114"></a>00114 
<a name="l00115"></a>00115 <span class="comment">//: Create shallow copy of image with given base reference</span>
<a name="l00116"></a>00116 <span class="comment">//  Sets to empty image if target is of different pixel type</span>
<a name="l00117"></a>00117 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00118"></a><a class="code" href="classvil3d__image__view.html#a4bfd8b8485ee4e51453f8868d1d5d9f7">00118</a> <span class="keyword">const</span> <a class="code" href="classvil3d__image__view.html" title="Concrete view of image data of type T held in memory.">vil3d_image_view&lt;T&gt;</a>&amp; <a class="code" href="classvil3d__image__view.html#a8852361c0245082bd8751daea7084241" title="Copy a view. The rhs and lhs will point to the same image data.">vil3d_image_view&lt;T&gt;::operator=</a>(<span class="keyword">const</span> <a class="code" href="classvil3d__image__view__base.html" title="An abstract base class of smart pointers to actual image data in memory.">vil3d_image_view_base</a>&amp; base_ref)
<a name="l00119"></a>00119 {
<a name="l00120"></a>00120   <span class="keywordflow">if</span> (static_cast&lt;const vil3d_image_view_base*&gt;(<span class="keyword">this</span>) == &amp;base_ref)
<a name="l00121"></a>00121     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00122"></a>00122 
<a name="l00123"></a>00123   <span class="keywordflow">if</span> (base_ref.<a class="code" href="classvil3d__image__view__base.html#ab512f0443790aeaf06d20ff7d8e1d259" title="Return a description of the concrete data pixel type.">pixel_format</a>() == pixel_format())
<a name="l00124"></a>00124   {
<a name="l00125"></a>00125     <span class="keyword">const</span> <a class="code" href="classvil3d__image__view.html" title="Concrete view of image data of type T held in memory.">vil3d_image_view&lt;T&gt;</a> &amp;that = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classvil3d__image__view.html" title="Concrete view of image data of type T held in memory.">vil3d_image_view&lt;T&gt;</a>&amp;<span class="keyword">&gt;</span>(base_ref);
<a name="l00126"></a>00126     ni_=that.<a class="code" href="classvil3d__image__view__base.html#a4b74c70b204a1f57c556e514a2a1282b" title="Number of columns.">ni_</a>;
<a name="l00127"></a>00127     nj_=that.<a class="code" href="classvil3d__image__view__base.html#ab9ead2aca9813d114eadea10c5b6ef07" title="Number of rasters.">nj_</a>;
<a name="l00128"></a>00128     nk_=that.<a class="code" href="classvil3d__image__view__base.html#af3e328b1069bee3c45fd79d504270ea1" title="Number of slices.">nk_</a>;
<a name="l00129"></a>00129     nplanes_=that.<a class="code" href="classvil3d__image__view__base.html#a561b186811e72382b745dd57c5d0a628" title="Number of planes.">nplanes_</a>;
<a name="l00130"></a>00130     istep_=that.<a class="code" href="classvil3d__image__view.html#a964fbb9fcef5ada7058bdcc3ba999936" title="Add this to a pixel pointer to move one column left.">istep_</a>;
<a name="l00131"></a>00131     jstep_=that.<a class="code" href="classvil3d__image__view.html#a913d76b5642d60d255fa77f85cbe804b" title="Add this to a pixel pointer to move one row down.">jstep_</a>;
<a name="l00132"></a>00132     kstep_=that.<a class="code" href="classvil3d__image__view.html#a6b1df08cf4052c35491036beac9d9294" title="Add this to a pixel pointer to move one slice down.">kstep_</a>;
<a name="l00133"></a>00133     planestep_=that.<a class="code" href="classvil3d__image__view.html#a4cb9e2bd964c91aeb1b3706da74d8ce2" title="Add this to a pixel pointer to move one plane back.">planestep_</a>;
<a name="l00134"></a>00134     top_left_=that.<a class="code" href="classvil3d__image__view.html#a4c574b19a3063c0f21488c01721d3fb3" title="Pointer to pixel at origin.">top_left_</a>;
<a name="l00135"></a>00135     ptr_=that.<a class="code" href="classvil3d__image__view.html#afdbd860111a4ce7bcba516234e3a6b53" title="Reference to actual image data.">ptr_</a>;
<a name="l00136"></a>00136     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00137"></a>00137   }
<a name="l00138"></a>00138 
<a name="l00139"></a>00139   clear();
<a name="l00140"></a>00140   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00141"></a>00141 }
<a name="l00142"></a>00142 
<a name="l00143"></a>00143 <span class="comment">//: Perform deep copy of the src image, placing in this image</span>
<a name="l00144"></a>00144 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00145"></a><a class="code" href="classvil3d__image__view.html#a6e038f6999694a876cf79ff8f456843e">00145</a> <span class="keywordtype">void</span> <a class="code" href="classvil3d__image__view.html#a6e038f6999694a876cf79ff8f456843e" title="Make a copy of the data in src and set this to view it.">vil3d_image_view&lt;T&gt;::deep_copy</a>(<span class="keyword">const</span> <a class="code" href="classvil3d__image__view.html" title="Concrete view of image data of type T held in memory.">vil3d_image_view&lt;T&gt;</a>&amp; src)
<a name="l00146"></a>00146 {
<a name="l00147"></a>00147   set_size(src.<a class="code" href="classvil3d__image__view__base.html#a53eefb37dc79c0400d329d73833e8118" title="Width.">ni</a>(),src.<a class="code" href="classvil3d__image__view__base.html#adaca1d1c42ef27c216d0ace551964c8a" title="Height.">nj</a>(),src.<a class="code" href="classvil3d__image__view__base.html#a4692571104e476761ce1be8185fd7f1c" title="Depth.">nk</a>(),src.<a class="code" href="classvil3d__image__view__base.html#a3880dcfc887c4ee1de938d08f89cec13" title="Number of planes.">nplanes</a>());
<a name="l00148"></a>00148 
<a name="l00149"></a>00149   vcl_ptrdiff_t s_planestep = src.<a class="code" href="classvil3d__image__view.html#a14a62f612bffdd7ccd4246d0f91c8930" title="Add this to your pixel pointer to get pixel on next plane.">planestep</a>();
<a name="l00150"></a>00150   vcl_ptrdiff_t s_istep = src.<a class="code" href="classvil3d__image__view.html#af69f3a9f935cc8833e733c1876d8feb5" title="Add this to your pixel pointer to get next i pixel.">istep</a>();
<a name="l00151"></a>00151   vcl_ptrdiff_t s_jstep = src.<a class="code" href="classvil3d__image__view.html#a64e09d330e411dd83852bc8017ff0da3" title="Add this to your pixel pointer to get next j pixel.">jstep</a>();
<a name="l00152"></a>00152   vcl_ptrdiff_t s_kstep = src.<a class="code" href="classvil3d__image__view.html#a6f3541fabdcae46e4d269942fd67768e" title="Add this to your pixel pointer to get next k pixel.">kstep</a>();
<a name="l00153"></a>00153 
<a name="l00154"></a>00154   <span class="comment">// Do a deep copy</span>
<a name="l00155"></a>00155   <span class="comment">// This is potentially inefficient</span>
<a name="l00156"></a>00156   <span class="keyword">const</span> T* src_data = src.<a class="code" href="classvil3d__image__view.html#a21ac2065afde9c998a61d79101a047f8" title="Pointer to the first (top left in plane 0) pixel.">origin_ptr</a>();
<a name="l00157"></a>00157   T* data = top_left_;
<a name="l00158"></a>00158   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p=0;p&lt;nplanes_;++p,src_data+=s_planestep,data+=planestep_)
<a name="l00159"></a>00159   {
<a name="l00160"></a>00160     T* slice = data;
<a name="l00161"></a>00161     <span class="keyword">const</span> T* src_slice = src_data;
<a name="l00162"></a>00162     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k=0;k&lt;nk_;++k,slice+=kstep_,src_slice+=s_kstep)
<a name="l00163"></a>00163     {
<a name="l00164"></a>00164       T* row = slice;
<a name="l00165"></a>00165       <span class="keyword">const</span> T* src_row = src_slice;
<a name="l00166"></a>00166       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j=0;j&lt;nj_;++j,row += jstep_,src_row += s_jstep)
<a name="l00167"></a>00167       {
<a name="l00168"></a>00168         T* p = row;
<a name="l00169"></a>00169         <span class="keyword">const</span> T* sp = src_row;
<a name="l00170"></a>00170         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;ni_;++i,p+=istep_,sp+=s_istep) *p = *sp;
<a name="l00171"></a>00171       }
<a name="l00172"></a>00172     }
<a name="l00173"></a>00173   }
<a name="l00174"></a>00174 }
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 
<a name="l00177"></a><a class="code" href="classvil3d__image__view.html#a683d0f89081182070954360876f84c10">00177</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <a class="code" href="classvil3d__image__view.html#a683d0f89081182070954360876f84c10">vil3d_image_view&lt;T&gt;::~vil3d_image_view</a>()
<a name="l00178"></a>00178 {
<a name="l00179"></a>00179   <span class="comment">// release_data();</span>
<a name="l00180"></a>00180 }
<a name="l00181"></a>00181 
<a name="l00182"></a>00182 <span class="comment">//=======================================================================</span>
<a name="l00183"></a>00183 
<a name="l00184"></a>00184 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00185"></a><a class="code" href="classvil3d__image__view.html#a7a232d9de8bd8ab762effc30ab1a83f4">00185</a> <span class="keywordtype">void</span> <a class="code" href="classvil3d__image__view.html#a7a232d9de8bd8ab762effc30ab1a83f4" title="resize current planes to ni x nj x nk.">vil3d_image_view&lt;T&gt;::set_size</a>(<span class="keywordtype">unsigned</span> n_i, <span class="keywordtype">unsigned</span> n_j, <span class="keywordtype">unsigned</span> n_k)
<a name="l00186"></a>00186 {
<a name="l00187"></a>00187   set_size(n_i,n_j,n_k, nplanes_);
<a name="l00188"></a>00188 }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 <span class="comment">//: True if data all in one unbroken block and origin_ptr() is lowest data address</span>
<a name="l00191"></a>00191 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00192"></a><a class="code" href="classvil3d__image__view.html#a26f7d0cc3a985c2d3369fff608982a0c">00192</a> <span class="keywordtype">bool</span> <a class="code" href="classvil3d__image__view.html#a26f7d0cc3a985c2d3369fff608982a0c" title="True if data all in one unbroken block and origin_ptr() is lowest data address.">vil3d_image_view&lt;T&gt;::is_contiguous</a>()<span class="keyword"> const</span>
<a name="l00193"></a>00193 <span class="keyword"></span>{
<a name="l00194"></a>00194   <span class="comment">// RRR GGG BBB</span>
<a name="l00195"></a>00195   <span class="keywordflow">if</span> (planestep_==<span class="keywordtype">int</span>(ni_*nj_*nk_))
<a name="l00196"></a>00196   {
<a name="l00197"></a>00197     <span class="keywordflow">if</span> (istep_==1 &amp;&amp; jstep_==<span class="keywordtype">int</span>(ni_) &amp;&amp; kstep_==<span class="keywordtype">int</span>(ni_*nj_) ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00198"></a>00198     <span class="keywordflow">if</span> (istep_==1 &amp;&amp; kstep_==<span class="keywordtype">int</span>(ni_) &amp;&amp; jstep_==<span class="keywordtype">int</span>(ni_*nk_) ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00199"></a>00199     <span class="keywordflow">if</span> (jstep_==1 &amp;&amp; istep_==<span class="keywordtype">int</span>(nj_) &amp;&amp; kstep_==<span class="keywordtype">int</span>(ni_*nj_) ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00200"></a>00200     <span class="keywordflow">if</span> (jstep_==1 &amp;&amp; kstep_==<span class="keywordtype">int</span>(nj_) &amp;&amp; istep_==<span class="keywordtype">int</span>(nj_*nk_) ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00201"></a>00201     <span class="keywordflow">if</span> (kstep_==1 &amp;&amp; istep_==<span class="keywordtype">int</span>(nk_) &amp;&amp; jstep_==<span class="keywordtype">int</span>(ni_*nk_) ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00202"></a>00202     <span class="keywordflow">if</span> (kstep_==1 &amp;&amp; jstep_==<span class="keywordtype">int</span>(nk_) &amp;&amp; istep_==<span class="keywordtype">int</span>(nj_*nk_) ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00203"></a>00203   }
<a name="l00204"></a>00204 
<a name="l00205"></a>00205   <span class="keywordtype">int</span> np = nplanes_;
<a name="l00206"></a>00206   <span class="comment">// RGBRGBRGB</span>
<a name="l00207"></a>00207   <span class="keywordflow">if</span> (planestep_==1)
<a name="l00208"></a>00208   {
<a name="l00209"></a>00209     <span class="keywordflow">if</span> (istep_==np &amp;&amp; jstep_==<span class="keywordtype">int</span>(ni_*np) &amp;&amp; kstep_==<span class="keywordtype">int</span>(ni_*nj_*np) ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00210"></a>00210     <span class="keywordflow">if</span> (istep_==np &amp;&amp; kstep_==<span class="keywordtype">int</span>(ni_*np) &amp;&amp; jstep_==<span class="keywordtype">int</span>(ni_*nk_*np) ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00211"></a>00211     <span class="keywordflow">if</span> (jstep_==np &amp;&amp; istep_==<span class="keywordtype">int</span>(nj_*np) &amp;&amp; kstep_==<span class="keywordtype">int</span>(ni_*nj_*np) ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00212"></a>00212     <span class="keywordflow">if</span> (jstep_==np &amp;&amp; kstep_==<span class="keywordtype">int</span>(nj_*np) &amp;&amp; istep_==<span class="keywordtype">int</span>(nj_*nk_*np) ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00213"></a>00213     <span class="keywordflow">if</span> (kstep_==np &amp;&amp; istep_==<span class="keywordtype">int</span>(nk_*np) &amp;&amp; jstep_==<span class="keywordtype">int</span>(ni_*nk_*np) ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00214"></a>00214     <span class="keywordflow">if</span> (kstep_==np &amp;&amp; jstep_==<span class="keywordtype">int</span>(nk_*np) &amp;&amp; istep_==<span class="keywordtype">int</span>(nj_*nk_*np) ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00215"></a>00215   }
<a name="l00216"></a>00216 
<a name="l00217"></a>00217   <span class="comment">// Note that there may be other weird combinations</span>
<a name="l00218"></a>00218   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00219"></a>00219 }
<a name="l00220"></a>00220 
<a name="l00221"></a>00221 <span class="comment">//=======================================================================</span>
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00224"></a><a class="code" href="classvil3d__image__view.html#a9e46a7e5318d74069f1b3119a0f3110e">00224</a> <span class="keywordtype">void</span> <a class="code" href="classvil3d__image__view.html#a7a232d9de8bd8ab762effc30ab1a83f4" title="resize current planes to ni x nj x nk.">vil3d_image_view&lt;T&gt;::set_size</a>(<span class="keywordtype">unsigned</span> n_i, <span class="keywordtype">unsigned</span> n_j, <span class="keywordtype">unsigned</span> n_k, <span class="keywordtype">unsigned</span> n_planes)
<a name="l00225"></a>00225 {
<a name="l00226"></a>00226   <span class="keywordflow">if</span> (n_i==ni_ &amp;&amp; n_j==nj_ &amp;&amp; n_k==nk_ &amp;&amp; n_planes==nplanes_) <span class="keywordflow">return</span>;
<a name="l00227"></a>00227 
<a name="l00228"></a>00228   release_memory();
<a name="l00229"></a>00229 
<a name="l00230"></a>00230   <a class="codeRef" doxygen="core_vil.tag:../../../../core/vil/html" href="../../../../core/vil/html/vil__pixel__format_8h.html#a6f749d91364b0bcb661189f4a154800d">vil_pixel_format</a> fmt = <a class="codeRef" doxygen="core_vil.tag:../../../../core/vil/html" href="../../../../core/vil/html/vil__pixel__format_8h.html#a1584d4356219c867020df43a66aada05">vil_pixel_format_of</a>(T());
<a name="l00231"></a>00231   ptr_ = <span class="keyword">new</span> <a class="codeRef" doxygen="core_vil.tag:../../../../core/vil/html" href="../../../../core/vil/html/classvil__memory__chunk.html">vil_memory_chunk</a>(<span class="keyword">sizeof</span>(T)*n_planes*n_k*n_j*n_i,
<a name="l00232"></a>00232     <a class="codeRef" doxygen="core_vil.tag:../../../../core/vil/html" href="../../../../core/vil/html/vil__pixel__format_8cxx.html#a0589722cd843f9c7790df385fbb29a13">vil_pixel_format_component_format</a>(fmt));
<a name="l00233"></a>00233 
<a name="l00234"></a>00234   ni_ = n_i;
<a name="l00235"></a>00235   nj_ = n_j;
<a name="l00236"></a>00236   nk_ = n_k;
<a name="l00237"></a>00237   nplanes_ = n_planes;
<a name="l00238"></a>00238   istep_ = 1;
<a name="l00239"></a>00239   jstep_ = n_i;
<a name="l00240"></a>00240   kstep_ = n_i*n_j;
<a name="l00241"></a>00241   planestep_ = n_i*n_j*n_k;
<a name="l00242"></a>00242 
<a name="l00243"></a>00243   top_left_ = <span class="keyword">reinterpret_cast&lt;</span>T*<span class="keyword">&gt;</span>(ptr_-&gt;data());
<a name="l00244"></a>00244 }
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 <span class="comment">//: Set this view to look at someone else&#39;s memory.</span>
<a name="l00248"></a>00248 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00249"></a><a class="code" href="classvil3d__image__view.html#acf4ee896f82b75fa24e28cdd61df0c57">00249</a> <span class="keywordtype">void</span> <a class="code" href="classvil3d__image__view.html#acf4ee896f82b75fa24e28cdd61df0c57" title="Set this view to look at someone else&#39;s memory data.">vil3d_image_view&lt;T&gt;::set_to_memory</a>(<span class="keyword">const</span> T* top_left,
<a name="l00250"></a>00250                                         <span class="keywordtype">unsigned</span> n_i, <span class="keywordtype">unsigned</span> n_j,
<a name="l00251"></a>00251                                         <span class="keywordtype">unsigned</span> n_k, <span class="keywordtype">unsigned</span> n_planes,
<a name="l00252"></a>00252                                         vcl_ptrdiff_t i_step, vcl_ptrdiff_t j_step,
<a name="l00253"></a>00253                                         vcl_ptrdiff_t k_step, vcl_ptrdiff_t plane_step)
<a name="l00254"></a>00254 {
<a name="l00255"></a>00255   release_memory();
<a name="l00256"></a>00256   top_left_ = <span class="keyword">const_cast&lt;</span>T*<span class="keyword">&gt;</span>(top_left);  <span class="comment">// Remove const, as view may end up manipulating data</span>
<a name="l00257"></a>00257 
<a name="l00258"></a>00258   ni_ = n_i;
<a name="l00259"></a>00259   nj_ = n_j;
<a name="l00260"></a>00260   nk_ = n_k;
<a name="l00261"></a>00261   nplanes_ = n_planes;
<a name="l00262"></a>00262   istep_ = i_step;
<a name="l00263"></a>00263   jstep_ = j_step;
<a name="l00264"></a>00264   kstep_ = k_step;
<a name="l00265"></a>00265   planestep_ = plane_step;
<a name="l00266"></a>00266 }
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 <span class="comment">//=======================================================================</span>
<a name="l00269"></a>00269 <span class="comment">//: Fill view with given value</span>
<a name="l00270"></a>00270 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00271"></a><a class="code" href="classvil3d__image__view.html#a32b7a15a3b01277a5de1b65448babe77">00271</a> <span class="keywordtype">void</span> <a class="code" href="classvil3d__image__view.html#a32b7a15a3b01277a5de1b65448babe77" title="Fill view with given value.">vil3d_image_view&lt;T&gt;::fill</a>(T value)
<a name="l00272"></a>00272 {
<a name="l00273"></a>00273   <span class="keywordflow">if</span> (is_contiguous())
<a name="l00274"></a>00274     <span class="keywordflow">if</span> (value == 0)
<a name="l00275"></a>00275       vcl_memset(begin(), 0, this-&gt;size_bytes());
<a name="l00276"></a>00276     <span class="keywordflow">else</span>
<a name="l00277"></a>00277       vcl_fill(begin(), end(), value);
<a name="l00278"></a>00278   <span class="keywordflow">else</span>
<a name="l00279"></a>00279   {
<a name="l00280"></a>00280     T* plane = top_left_;
<a name="l00281"></a>00281     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p=0;p&lt;nplanes_;++p,plane += planestep_)
<a name="l00282"></a>00282     {
<a name="l00283"></a>00283       T* slice = plane;
<a name="l00284"></a>00284       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k=0;k&lt;nk_;++k,slice += kstep_)
<a name="l00285"></a>00285       {
<a name="l00286"></a>00286         T* row = slice;
<a name="l00287"></a>00287         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j=0;j&lt;nj_;++j,row += jstep_)
<a name="l00288"></a>00288         {
<a name="l00289"></a>00289           T* p = row;
<a name="l00290"></a>00290           <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;ni_;++i,p+=istep_) *p = value;
<a name="l00291"></a>00291         }
<a name="l00292"></a>00292       }
<a name="l00293"></a>00293     }
<a name="l00294"></a>00294   }
<a name="l00295"></a>00295 }
<a name="l00296"></a>00296 
<a name="l00297"></a>00297 <span class="comment">//=======================================================================</span>
<a name="l00298"></a>00298 
<a name="l00299"></a>00299 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00300"></a><a class="code" href="classvil3d__image__view.html#a8d93ab27b09ab6dc97631c466bd01c0f">00300</a> <span class="keywordtype">bool</span> <a class="code" href="classvil3d__image__view.html#a8d93ab27b09ab6dc97631c466bd01c0f" title="True if this is (or is derived from) class s.">vil3d_image_view&lt;T&gt;::is_class</a>(vcl_string <span class="keyword">const</span>&amp; s)<span class="keyword"> const</span>
<a name="l00301"></a>00301 <span class="keyword"></span>{
<a name="l00302"></a>00302   <span class="keywordflow">return</span> s==<a class="code" href="classvil3d__image__view.html#aadc09649b76d9bbd1b73930878314d72" title="Return class name.">vil3d_image_view&lt;T&gt;::is_a</a>() || <a class="code" href="classvil3d__image__view__base.html#a7374d976bdbf40e6c0b4f2db5fcea217" title="True if this is (or is derived from) class s.">vil3d_image_view_base::is_class</a>(s);
<a name="l00303"></a>00303 }
<a name="l00304"></a>00304 
<a name="l00305"></a>00305 <span class="comment">//=======================================================================</span>
<a name="l00306"></a>00306 
<a name="l00307"></a>00307 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00308"></a><a class="code" href="classvil3d__image__view.html#a5c958fcb1b421fd0d37ce49079be3b11">00308</a> <span class="keywordtype">void</span> <a class="code" href="classvil3d__image__view.html#a5c958fcb1b421fd0d37ce49079be3b11" title="Print a 1-line summary of contents.">vil3d_image_view&lt;T&gt;::print</a>(vcl_ostream&amp; os)<span class="keyword"> const</span>
<a name="l00309"></a>00309 <span class="keyword"></span>{
<a name="l00310"></a>00310   os&lt;&lt;nplanes_&lt;&lt;<span class="stringliteral">&quot; planes, each &quot;</span>&lt;&lt;ni_&lt;&lt;<span class="stringliteral">&quot; x &quot;</span>&lt;&lt;nj_&lt;&lt;<span class="stringliteral">&quot; x &quot;</span>&lt;&lt;nk_;
<a name="l00311"></a>00311 }
<a name="l00312"></a>00312 
<a name="l00313"></a>00313 <span class="comment">//=======================================================================</span>
<a name="l00314"></a>00314 <span class="comment">//: True if they share same view of same image data.</span>
<a name="l00315"></a>00315 <span class="comment">//  This does not do a deep equality on image data. If the images point</span>
<a name="l00316"></a>00316 <span class="comment">//  to different image data objects that contain identical images, then</span>
<a name="l00317"></a>00317 <span class="comment">//  the result will still be false.</span>
<a name="l00318"></a>00318 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00319"></a><a class="code" href="classvil3d__image__view.html#af5e7ae98b95a5ff512baaaa77d9e502a">00319</a> <span class="keywordtype">bool</span> <a class="code" href="classvil3d__image__view.html#af5e7ae98b95a5ff512baaaa77d9e502a" title="True if they share same view of same image data.">vil3d_image_view&lt;T&gt;::operator==</a>(<span class="keyword">const</span> <a class="code" href="classvil3d__image__view.html" title="Concrete view of image data of type T held in memory.">vil3d_image_view&lt;T&gt;</a> &amp;other)<span class="keyword"> const</span>
<a name="l00320"></a>00320 <span class="keyword"></span>{
<a name="l00321"></a>00321   <span class="keywordflow">if</span> (!(<span class="keywordtype">bool</span>) *<span class="keyword">this</span> &amp;&amp; !(<span class="keywordtype">bool</span>)other) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00322"></a>00322   <span class="keywordflow">return</span> ptr_  == other.ptr_ &amp;&amp;
<a name="l00323"></a>00323     top_left_  == other.top_left_ &amp;&amp;
<a name="l00324"></a>00324     nplanes_   == other.nplanes_ &amp;&amp;
<a name="l00325"></a>00325     ni_        == other.ni_ &amp;&amp;
<a name="l00326"></a>00326     nj_        == other.nj_ &amp;&amp;
<a name="l00327"></a>00327     nk_        == other.nk_ &amp;&amp;
<a name="l00328"></a>00328     planestep_ == other.planestep_ &amp;&amp;
<a name="l00329"></a>00329     istep_     == other.istep_ &amp;&amp;
<a name="l00330"></a>00330     jstep_     == other.jstep_ &amp;&amp;
<a name="l00331"></a>00331     kstep_     == other.kstep_;
<a name="l00332"></a>00332 }
<a name="l00333"></a>00333 
<a name="l00334"></a>00334 <span class="comment">//=======================================================================</span>
<a name="l00335"></a>00335 <span class="comment">//: Provides an ordering.</span>
<a name="l00336"></a>00336 <span class="comment">//  Useful for ordered containers.</span>
<a name="l00337"></a>00337 <span class="comment">//  There is no guaranteed meaning to the less than operator, except that</span>
<a name="l00338"></a>00338 <span class="comment">//  (a&lt;b &amp;&amp; b&lt;a)  is false and  !(a&lt;b) &amp;&amp; !(b&lt;a)  is equivalent to  a==b</span>
<a name="l00339"></a>00339 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00340"></a><a class="code" href="classvil3d__image__view.html#a10969c41a2f6e5d28ea2e5ed5cab65c5">00340</a> <span class="keywordtype">bool</span> <a class="code" href="classvil3d__image__view.html#a10969c41a2f6e5d28ea2e5ed5cab65c5" title="Provides an ordering.">vil3d_image_view&lt;T&gt;::operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="classvil3d__image__view.html" title="Concrete view of image data of type T held in memory.">vil3d_image_view&lt;T&gt;</a>&amp; other)<span class="keyword"> const</span>
<a name="l00341"></a>00341 <span class="keyword"></span>{
<a name="l00342"></a>00342   <span class="keywordflow">if</span> (ptr_ != other.<a class="code" href="classvil3d__image__view.html#afdbd860111a4ce7bcba516234e3a6b53" title="Reference to actual image data.">ptr_</a>) <span class="keywordflow">return</span> ptr_&lt;other.<a class="code" href="classvil3d__image__view.html#afdbd860111a4ce7bcba516234e3a6b53" title="Reference to actual image data.">ptr_</a>;
<a name="l00343"></a>00343   <span class="keywordflow">if</span> ((<span class="keywordtype">bool</span>) *<span class="keyword">this</span> &amp;&amp; (<span class="keywordtype">bool</span>)other) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00344"></a>00344   <span class="keywordflow">if</span> (nplanes_ != other.nplanes_) <span class="keywordflow">return</span> nplanes_ &lt; other.nplanes_;
<a name="l00345"></a>00345   <span class="keywordflow">if</span> (ni_ != other.ni_) <span class="keywordflow">return</span> ni_ &lt; other.ni_;
<a name="l00346"></a>00346   <span class="keywordflow">if</span> (nj_ != other.nj_) <span class="keywordflow">return</span> nj_ &lt; other.nj_;
<a name="l00347"></a>00347   <span class="keywordflow">if</span> (nk_ != other.nk_) <span class="keywordflow">return</span> nk_ &lt; other.nk_;
<a name="l00348"></a>00348   <span class="keywordflow">if</span> (planestep_ != other.planestep_) <span class="keywordflow">return</span> planestep_ &lt; other.planestep_;
<a name="l00349"></a>00349   <span class="keywordflow">if</span> (istep_ != other.istep_) <span class="keywordflow">return</span> istep_ &lt; other.istep_;
<a name="l00350"></a>00350   <span class="keywordflow">if</span> (jstep_ != other.jstep_) <span class="keywordflow">return</span> jstep_ &lt; other.jstep_;
<a name="l00351"></a>00351   <span class="keywordflow">return</span> kstep_ &lt; other.kstep_;
<a name="l00352"></a>00352 }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 <span class="comment">//=======================================================================</span>
<a name="l00356"></a>00356 <span class="comment">//: True if the actual images are identical.</span>
<a name="l00357"></a>00357 <span class="comment">// $\bigwedge_{i,j,k,p} {\textstyle src}(i,j,k,p) == {\textstyle dest}(i,j,k,p)$</span>
<a name="l00358"></a>00358 <span class="comment">// The data may be formatted differently in each memory chunk.</span>
<a name="l00359"></a>00359 <span class="comment">//  O(size).</span>
<a name="l00360"></a>00360 <span class="comment">// \relatesalso vil3d_image_view</span>
<a name="l00361"></a>00361 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00362"></a><a class="code" href="vil3d__image__view_8txx.html#ace278014387574788df634789a002a73">00362</a> <span class="keywordtype">bool</span> <a class="code" href="classvil3d__image__view.html#ace278014387574788df634789a002a73" title="True if the actual images are identical.">vil3d_image_view_deep_equality</a>(<span class="keyword">const</span> <a class="code" href="classvil3d__image__view.html" title="Concrete view of image data of type T held in memory.">vil3d_image_view&lt;T&gt;</a> &amp;lhs,
<a name="l00363"></a>00363                                     <span class="keyword">const</span> <a class="code" href="classvil3d__image__view.html" title="Concrete view of image data of type T held in memory.">vil3d_image_view&lt;T&gt;</a> &amp;rhs)
<a name="l00364"></a>00364 {
<a name="l00365"></a>00365   <span class="keywordflow">if</span> (lhs.<a class="code" href="classvil3d__image__view__base.html#a3880dcfc887c4ee1de938d08f89cec13" title="Number of planes.">nplanes</a>() != rhs.<a class="code" href="classvil3d__image__view__base.html#a3880dcfc887c4ee1de938d08f89cec13" title="Number of planes.">nplanes</a>() ||
<a name="l00366"></a>00366       lhs.<a class="code" href="classvil3d__image__view__base.html#a4692571104e476761ce1be8185fd7f1c" title="Depth.">nk</a>() != rhs.<a class="code" href="classvil3d__image__view__base.html#a4692571104e476761ce1be8185fd7f1c" title="Depth.">nk</a>() ||
<a name="l00367"></a>00367       lhs.<a class="code" href="classvil3d__image__view__base.html#adaca1d1c42ef27c216d0ace551964c8a" title="Height.">nj</a>() != rhs.<a class="code" href="classvil3d__image__view__base.html#adaca1d1c42ef27c216d0ace551964c8a" title="Height.">nj</a>() ||
<a name="l00368"></a>00368       lhs.<a class="code" href="classvil3d__image__view__base.html#a53eefb37dc79c0400d329d73833e8118" title="Width.">ni</a>() != rhs.<a class="code" href="classvil3d__image__view__base.html#a53eefb37dc79c0400d329d73833e8118" title="Width.">ni</a>())
<a name="l00369"></a>00369     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00370"></a>00370 
<a name="l00371"></a>00371   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> p = 0; p &lt; rhs.<a class="code" href="classvil3d__image__view__base.html#a3880dcfc887c4ee1de938d08f89cec13" title="Number of planes.">nplanes</a>(); ++p)
<a name="l00372"></a>00372    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> k = 0; k &lt; rhs.<a class="code" href="classvil3d__image__view__base.html#a4692571104e476761ce1be8185fd7f1c" title="Depth.">nk</a>(); ++k)
<a name="l00373"></a>00373     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = 0; j &lt; rhs.<a class="code" href="classvil3d__image__view__base.html#adaca1d1c42ef27c216d0ace551964c8a" title="Height.">nj</a>(); ++j)
<a name="l00374"></a>00374       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; rhs.<a class="code" href="classvil3d__image__view__base.html#a53eefb37dc79c0400d329d73833e8118" title="Width.">ni</a>(); ++i)
<a name="l00375"></a>00375         <span class="keywordflow">if</span> (!(rhs(i,j,k,p) == lhs(i,j,k,p)))
<a name="l00376"></a>00376           <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00377"></a>00377   <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00378"></a>00378 }
<a name="l00379"></a>00379 
<a name="l00380"></a><a class="code" href="vil3d__image__view_8txx.html#a1861f0c6cfe2484542f3fd0e6d5e6854">00380</a> <span class="preprocessor">#define VIL3D_IMAGE_VIEW_INSTANTIATE(T) \</span>
<a name="l00381"></a>00381 <span class="preprocessor">VCL_DEFINE_SPECIALIZATION vcl_string vil3d_image_view&lt;T &gt;::is_a() const \</span>
<a name="l00382"></a>00382 <span class="preprocessor">{ return vcl_string(&quot;vil3d_image_view&lt;&quot; #T &quot;&gt;&quot;); } \</span>
<a name="l00383"></a>00383 <span class="preprocessor">template class vil3d_image_view&lt;T &gt;; \</span>
<a name="l00384"></a>00384 <span class="preprocessor">template bool vil3d_image_view_deep_equality(const vil3d_image_view&lt;T &gt;&amp;, \</span>
<a name="l00385"></a>00385 <span class="preprocessor">                                             const vil3d_image_view&lt;T &gt;&amp;)</span>
<a name="l00386"></a>00386 <span class="preprocessor"></span>
<a name="l00387"></a>00387 <span class="preprocessor">#endif // vil3d_image_view_txx_</span>
</pre></div></div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 1 2013 17:34:08 for contrib/mul/vil3d by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
