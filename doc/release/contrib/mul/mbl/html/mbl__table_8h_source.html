<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>contrib/mul/mbl/mbl_table.h Source File</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">contrib/mul/mbl/mbl_table.h</div>  </div>
</div>
<div class="contents">
<a href="mbl__table_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef mbl_table_h</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define mbl_table_h</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="comment">//:</span>
<a name="l00004"></a>00004 <span class="comment">// \file</span>
<a name="l00005"></a>00005 <span class="comment">// \author Kevin de Souza</span>
<a name="l00006"></a>00006 <span class="comment">// \date 05-Aug-2004</span>
<a name="l00007"></a>00007 <span class="comment">// \brief Container for tabulated data suitable for reading/writing to delimited text files</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;vcl_map.h&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;vcl_iosfwd.h&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;vcl_vector.h&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;vcl_string.h&gt;</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="comment">//: Container for tabulated data suitable for reading/writing to delimited text files.</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// Table comprises a number of columns of double-precision data.</span>
<a name="l00017"></a>00017 <span class="comment">// Each column is headed by a text string (which may contain whitespace but not end-of-line).</span>
<a name="l00018"></a>00018 <span class="comment">// Column headers must be unique.</span>
<a name="l00019"></a>00019 <span class="comment">// Columns are separated by a delimiter character (e.g. &quot;\t&quot;).</span>
<a name="l00020"></a>00020 <span class="comment">// The delimiter character must not occur in any of the entries!</span>
<a name="l00021"></a>00021 <span class="comment">// The delimiter character is optional at the end of a row.</span>
<a name="l00022"></a>00022 <span class="comment">// Each row must be terminated by an end-of-line (including the last row).</span>
<a name="l00023"></a>00023 <span class="comment">// Each column of data is stored as a vector of doubles and associated with the column header string.</span>
<a name="l00024"></a><a class="code" href="classmbl__table.html">00024</a> <span class="keyword">class </span><a class="code" href="classmbl__table.html" title="Container for tabulated data suitable for reading/writing to delimited text files.">mbl_table</a>
<a name="l00025"></a>00025 {
<a name="l00026"></a>00026 <span class="keyword">public</span>:
<a name="l00027"></a>00027 
<a name="l00028"></a>00028   <span class="comment">//: Constructor</span>
<a name="l00029"></a>00029   <span class="comment">// \param delim The delimiter character.</span>
<a name="l00030"></a>00030   <a class="code" href="classmbl__table.html#a287fcb24f62d7edb8faffd521e252032" title="Constructor.">mbl_table</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> delim=<span class="charliteral">&#39;\t&#39;</span>);
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 
<a name="l00033"></a>00033   <span class="comment">//: Constructor</span>
<a name="l00034"></a>00034   <span class="comment">// \param delim The delimiter character.</span>
<a name="l00035"></a>00035   <span class="comment">// \param headers The column headers (in order).</span>
<a name="l00036"></a>00036   <a class="code" href="classmbl__table.html#a287fcb24f62d7edb8faffd521e252032" title="Constructor.">mbl_table</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> delim,
<a name="l00037"></a>00037             <span class="keyword">const</span> vcl_vector&lt;vcl_string&gt;&amp; headers);
<a name="l00038"></a>00038 
<a name="l00039"></a>00039   
<a name="l00040"></a>00040   <span class="comment">//: Return the number of columns</span>
<a name="l00041"></a>00041   <span class="keywordtype">unsigned</span> <a class="code" href="classmbl__table.html#a81ba756e91b171fd367155f1326ffc96" title="Return the number of columns.">num_cols</a>() <span class="keyword">const</span>;
<a name="l00042"></a>00042 
<a name="l00043"></a>00043   
<a name="l00044"></a>00044   <span class="comment">//: Return the number of rows</span>
<a name="l00045"></a>00045   <span class="keywordtype">unsigned</span> <a class="code" href="classmbl__table.html#a8733b0ea4164b15d3f3bedb71fd314a5" title="Return the number of rows.">num_rows</a>() <span class="keyword">const</span>;
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 
<a name="l00048"></a>00048   <span class="comment">//: Get the column of data corresponding to a particular heading.</span>
<a name="l00049"></a>00049   <span class="comment">// \param header String identifying the desired column.</span>
<a name="l00050"></a>00050   <span class="comment">// \return true if there is a column with the specified heading.</span>
<a name="l00051"></a>00051   <span class="comment">// \retval column A vector containing the values of the requested column.</span>
<a name="l00052"></a>00052   <span class="keywordtype">bool</span> <a class="code" href="classmbl__table.html#a2a430e57b05bd3859af901802af6586c" title="Get the column of data corresponding to a particular heading.">get_column</a>(<span class="keyword">const</span> vcl_string&amp; header,
<a name="l00053"></a>00053                   vcl_vector&lt;double&gt;&amp; column) <span class="keyword">const</span>;
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 
<a name="l00056"></a>00056   <span class="comment">//: Returns true if column exists</span>
<a name="l00057"></a>00057   <span class="keywordtype">bool</span> <a class="code" href="classmbl__table.html#a76bdc696b72f5d7518929f223db58727" title="Returns true if column exists.">column_exists</a>(<span class="keyword">const</span> vcl_string&amp; header) <span class="keyword">const</span>;
<a name="l00058"></a>00058   
<a name="l00059"></a>00059 
<a name="l00060"></a>00060   <span class="comment">//: Get a specified row of data.</span>
<a name="l00061"></a>00061   <span class="comment">// \param r Index of the desired row.</span>
<a name="l00062"></a>00062   <span class="comment">// \return true if there is a row with the specified index.</span>
<a name="l00063"></a>00063   <span class="comment">// \retval row A vector containing the values of the requested row.</span>
<a name="l00064"></a>00064   <span class="keywordtype">bool</span> <a class="code" href="classmbl__table.html#a215cd8bf3cb646bc3795f82aac454abd" title="Get a specified row of data.">get_row</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span>&amp; r,
<a name="l00065"></a>00065                vcl_vector&lt;double&gt;&amp; row) <span class="keyword">const</span>;
<a name="l00066"></a>00066 
<a name="l00067"></a>00067   
<a name="l00068"></a>00068   <span class="comment">//: Get the list of column headers (in column order).</span>
<a name="l00069"></a>00069   <span class="comment">// \retval headers The list of column headers.</span>
<a name="l00070"></a>00070   <span class="keywordtype">void</span> <a class="code" href="classmbl__table.html#a264b568c37e39effc4d03860324e9d6e" title="Get the list of column headers (in column order).">get_column_headers</a>(vcl_vector&lt;vcl_string&gt;&amp; headers) <span class="keyword">const</span>;
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 
<a name="l00073"></a>00073   <span class="comment">//: Append a column of data with its own heading.</span>
<a name="l00074"></a>00074   <span class="comment">// \param header String identifying the column.</span>
<a name="l00075"></a>00075   <span class="comment">// \param column A vector containing the values of the column.</span>
<a name="l00076"></a>00076   <span class="comment">// \return true If the column was added.</span>
<a name="l00077"></a>00077   <span class="comment">// \note The new column must be the same length as existing columns.</span>
<a name="l00078"></a>00078   <span class="keywordtype">bool</span> <a class="code" href="classmbl__table.html#ac9509421904ce6d527e9fd62ecda75a5" title="Append a column of data with its own heading.">append_column</a>(<span class="keyword">const</span> vcl_string&amp; header,
<a name="l00079"></a>00079                      <span class="keyword">const</span> vcl_vector&lt;double&gt;&amp; column);
<a name="l00080"></a>00080   
<a name="l00081"></a>00081 
<a name="l00082"></a>00082   <span class="comment">//: Append an empty column with its own heading.</span>
<a name="l00083"></a>00083   <span class="comment">// \param header String identifying the column.</span>
<a name="l00084"></a>00084   <span class="comment">// \param val Default value to initialize all elements of the new column.</span>
<a name="l00085"></a>00085   <span class="comment">// \return true If the column was added.</span>
<a name="l00086"></a>00086   <span class="comment">// \note The new column will be the same length as existing columns.</span>
<a name="l00087"></a>00087   <span class="keywordtype">bool</span> <a class="code" href="classmbl__table.html#ac9509421904ce6d527e9fd62ecda75a5" title="Append a column of data with its own heading.">append_column</a>(<span class="keyword">const</span> vcl_string&amp; header,
<a name="l00088"></a>00088                      <span class="keyword">const</span> <span class="keywordtype">double</span> val=0);
<a name="l00089"></a>00089   
<a name="l00090"></a>00090 
<a name="l00091"></a>00091   <span class="comment">//: Append a row of data.</span>
<a name="l00092"></a>00092   <span class="comment">// \return true if the row was added.</span>
<a name="l00093"></a>00093   <span class="comment">// \param row A vector containing the values of the new row.</span>
<a name="l00094"></a>00094   <span class="comment">// \note The new row must be the same length as existing rows.</span>
<a name="l00095"></a>00095   <span class="keywordtype">bool</span> <a class="code" href="classmbl__table.html#aa34cca32f3ef88fdb50400d4620bac6d" title="Append a row of data.">append_row</a>(<span class="keyword">const</span> vcl_vector&lt;double&gt;&amp; row);
<a name="l00096"></a>00096   
<a name="l00097"></a>00097 
<a name="l00098"></a>00098   <span class="comment">//: Append an empty row.</span>
<a name="l00099"></a>00099   <span class="comment">// \return true If the row was added.</span>
<a name="l00100"></a>00100   <span class="comment">// \param val Default value to initialize all elements of the new row.</span>
<a name="l00101"></a>00101   <span class="comment">// \note The new row will be the same length as existing rows.</span>
<a name="l00102"></a>00102   <span class="keywordtype">bool</span> <a class="code" href="classmbl__table.html#aa34cca32f3ef88fdb50400d4620bac6d" title="Append a row of data.">append_row</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> val=0);
<a name="l00103"></a>00103   
<a name="l00104"></a>00104 
<a name="l00105"></a>00105   <span class="comment">//: Set the value of an existing element.</span>
<a name="l00106"></a>00106   <span class="comment">// \param header The string identifying the column to be modified.</span>
<a name="l00107"></a>00107   <span class="comment">// \param r The row index of the element to be modified.</span>
<a name="l00108"></a>00108   <span class="comment">// \param value The new value to use for the modified element.</span>
<a name="l00109"></a>00109   <span class="comment">// \return False if the column does not exist or the row index is not valid.</span>
<a name="l00110"></a>00110   <span class="comment">// \note This function is intended only for existing elements.</span>
<a name="l00111"></a>00111   <span class="keywordtype">bool</span> <a class="code" href="classmbl__table.html#a38c726347db48529057ab10fba630fd8" title="Set the value of an existing element.">set_element</a>(<span class="keyword">const</span> vcl_string&amp; header, 
<a name="l00112"></a>00112                    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> r, 
<a name="l00113"></a>00113                    <span class="keyword">const</span> <span class="keywordtype">double</span> value);
<a name="l00114"></a>00114 
<a name="l00115"></a>00115 
<a name="l00116"></a>00116   <span class="comment">//: Get the value of an existing element.</span>
<a name="l00117"></a>00117   <span class="comment">// \param header The string identifying the column of interest.</span>
<a name="l00118"></a>00118   <span class="comment">// \param r The row index of the element of interest.</span>
<a name="l00119"></a>00119   <span class="comment">// \return The value of the requested element (undefined if the element</span>
<a name="l00120"></a>00120   <span class="comment">//         does not exist).</span>
<a name="l00121"></a>00121   <span class="comment">// \retval success If provided, will be used to indicate whether the </span>
<a name="l00122"></a>00122   <span class="comment">//                 specified element existed.</span>
<a name="l00123"></a>00123   <span class="comment">// \note This function is intended only for existing elements.</span>
<a name="l00124"></a>00124   <span class="comment">// \note It is recommended that you provide and check the parameter success.</span>
<a name="l00125"></a>00125   <span class="keywordtype">double</span> <a class="code" href="classmbl__table.html#a775662c5b8037fd19dd59153ec366109" title="Get the value of an existing element.">get_element</a>(<span class="keyword">const</span> vcl_string&amp; header, 
<a name="l00126"></a>00126                      <span class="keyword">const</span> <span class="keywordtype">unsigned</span> r, 
<a name="l00127"></a>00127                      <span class="keywordtype">bool</span>* success=0) <span class="keyword">const</span>;
<a name="l00128"></a>00128 
<a name="l00129"></a>00129   
<a name="l00130"></a>00130   <span class="comment">//: Load this table&#39;s data from specified text stream.</span>
<a name="l00131"></a>00131   <span class="comment">// Any existing data is lost.</span>
<a name="l00132"></a>00132   <span class="comment">// \return true if table was read successfully from the stream.</span>
<a name="l00133"></a>00133   <span class="keywordtype">bool</span> <a class="code" href="classmbl__table.html#a8b4dcb857486bcb7e62e0b080e02077e" title="Load this table&#39;s data from specified text stream.">read</a>(vcl_istream&amp; is);
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 
<a name="l00136"></a>00136   <span class="comment">//: Save this table&#39;s data to specified text stream.</span>
<a name="l00137"></a>00137   <span class="keywordtype">void</span> <a class="code" href="classmbl__table.html#aa7179bcedc19053290cd72153918d93b" title="Save this table&#39;s data to specified text stream.">write</a>(vcl_ostream&amp; os) <span class="keyword">const</span>;
<a name="l00138"></a>00138 
<a name="l00139"></a>00139 
<a name="l00140"></a>00140   <span class="comment">//: Create a new table of subset of columns defined by headers</span>
<a name="l00141"></a>00141   <span class="comment">// \retval new_table a subtable </span>
<a name="l00142"></a>00142   <span class="comment">// \param headers subset of column headers</span>
<a name="l00143"></a>00143   <span class="comment">// \return true if all columns in headers existed in &quot;this&quot; and were copied</span>
<a name="l00144"></a>00144   <span class="keywordtype">bool</span> <a class="code" href="classmbl__table.html#adada28c64fef5c0fd35cfd330d3ae25e" title="Create a new table of subset of columns defined by headers.">subtable</a>(<a class="code" href="classmbl__table.html" title="Container for tabulated data suitable for reading/writing to delimited text files.">mbl_table</a> &amp;new_table,  <span class="keyword">const</span> vcl_vector&lt;vcl_string&gt; &amp;headers) <span class="keyword">const</span>;
<a name="l00145"></a>00145 
<a name="l00146"></a>00146   
<a name="l00147"></a>00147   <span class="comment">//: Is another table identical to this one?</span>
<a name="l00148"></a>00148   <span class="comment">// \note The normal behaviour of this function is to return false as soon</span>
<a name="l00149"></a>00149   <span class="comment">// as a discrepancy is found. However, if verbosity&gt;=2 this function will</span>
<a name="l00150"></a>00150   <span class="comment">// compare all corresponding elements (providing that the table dimensions match).</span>
<a name="l00151"></a>00151   <span class="keywordtype">bool</span> <a class="code" href="classmbl__table.html#ab2d3df1bb50aa34858816e91b352c148" title="Is another table identical to this one?.">operator==</a>(<span class="keyword">const</span> <a class="code" href="classmbl__table.html" title="Container for tabulated data suitable for reading/writing to delimited text files.">mbl_table</a>&amp; rhs) <span class="keyword">const</span>;
<a name="l00152"></a>00152 
<a name="l00153"></a>00153   
<a name="l00154"></a>00154   <span class="comment">//: Is another table different from this one?</span>
<a name="l00155"></a>00155   <span class="comment">// \sa operator==()</span>
<a name="l00156"></a>00156   <span class="keywordtype">bool</span> <a class="code" href="classmbl__table.html#a61cc75e03ffabed1bfdac0caaa49a8b5" title="Is another table different from this one?.">operator!=</a>(<span class="keyword">const</span> <a class="code" href="classmbl__table.html" title="Container for tabulated data suitable for reading/writing to delimited text files.">mbl_table</a>&amp; rhs) <span class="keyword">const</span>;
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 
<a name="l00159"></a>00159   <span class="comment">//: Set the tolerance used to determine whether table entries are equal.</span>
<a name="l00160"></a>00160   <span class="comment">// \param tol The tolerance should be a small positive number, eg 1e-19.</span>
<a name="l00161"></a>00161   <span class="comment">// \param frac Whether the tolerance is applied as a fractional difference.</span>
<a name="l00162"></a>00162   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmbl__table.html#afe7e382afec72e3ed4c211ff43cde713" title="Set the tolerance used to determine whether table entries are equal.">set_tolerance</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>&amp; tol,
<a name="l00163"></a>00163                             <span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; fract=<span class="keyword">false</span>);
<a name="l00164"></a>00164 
<a name="l00165"></a>00165 
<a name="l00166"></a>00166   <span class="comment">//: Set the level of verbosity used for error output.</span>
<a name="l00167"></a>00167   <span class="comment">// \param v The verbosity should be a small integer, eg -3 to 3. </span>
<a name="l00168"></a>00168   <span class="comment">// Larger values cause more detailed output.</span>
<a name="l00169"></a>00169   <span class="comment">// Default level is 0. </span>
<a name="l00170"></a>00170   <span class="comment">// \note Currently only levels 1 and 2 are defined: level 1 provides some</span>
<a name="l00171"></a>00171   <span class="comment">// feedback for equality testing; level 2 also causes the equality operator</span>
<a name="l00172"></a>00172   <span class="comment">// to check all corresponding elements of a table.</span>
<a name="l00173"></a>00173   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmbl__table.html#a4d7385b5ba1c6ec239b0e794b8d1843d" title="Set the level of verbosity used for error output.">set_verbosity</a>(<span class="keyword">const</span> <span class="keywordtype">int</span>&amp; <a class="codeRef" doxygen="core_vnl.tag:../../../../core/vnl/html" href="../../../../core/vnl/html/vnl__vector_8h.html#a38bf1e5e0427bdeba2b469eea9befc23">v</a>);
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 <span class="keyword">protected</span>:
<a name="l00177"></a>00177 
<a name="l00178"></a>00178   <span class="comment">//: Read a series of characters from the stream until a delimiter character or eol.</span>
<a name="l00179"></a>00179   <span class="comment">// \param is The input stream.</span>
<a name="l00180"></a>00180   <span class="comment">// \return true if a non-empty string was successfully read.</span>
<a name="l00181"></a>00181   <span class="comment">// \retval str The string which was read.</span>
<a name="l00182"></a>00182   <span class="comment">// \retval eol Whether the stream is at end-of-line after reading the string.</span>
<a name="l00183"></a>00183   <span class="comment">// \retval eof Whether the stream is at end-of-file after reading the string.</span>
<a name="l00184"></a>00184   <span class="keywordtype">bool</span> <a class="code" href="classmbl__table.html#a10a0c2059c420268c659fb76eb30718c" title="Read a series of characters from the stream until a delimiter character or eol.">read_delimited_string</a>(vcl_istream&amp; is,
<a name="l00185"></a>00185                              vcl_string&amp; str,
<a name="l00186"></a>00186                              <span class="keywordtype">bool</span>&amp; eol,
<a name="l00187"></a>00187                              <span class="keywordtype">bool</span>&amp; eof);
<a name="l00188"></a>00188 
<a name="l00189"></a>00189   <span class="comment">//: The character delimiting each column.</span>
<a name="l00190"></a><a class="code" href="classmbl__table.html#aee163a18dd8ebc5ff377291b97d53742">00190</a>   <span class="keywordtype">char</span> <a class="code" href="classmbl__table.html#aee163a18dd8ebc5ff377291b97d53742" title="The character delimiting each column.">delimiter_</a>;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192   <span class="comment">//: The column headers (in order)</span>
<a name="l00193"></a><a class="code" href="classmbl__table.html#aa19cf4ce54d79eac1b3bd275bbb27d8a">00193</a>   vcl_vector&lt;vcl_string&gt; <a class="code" href="classmbl__table.html#aa19cf4ce54d79eac1b3bd275bbb27d8a" title="The column headers (in order).">column_headers_</a>;
<a name="l00194"></a>00194 
<a name="l00195"></a>00195   <span class="comment">//: Map a column header string to column index</span>
<a name="l00196"></a><a class="code" href="classmbl__table.html#a388021bbc60c48fc3bac481598f6bdd6">00196</a>   vcl_map&lt;vcl_string, unsigned&gt; <a class="code" href="classmbl__table.html#a388021bbc60c48fc3bac481598f6bdd6" title="Map a column header string to column index.">header_to_column_index_</a>;
<a name="l00197"></a>00197 
<a name="l00198"></a>00198   <span class="comment">//: The table data, arranged as column vectors of double data.</span>
<a name="l00199"></a><a class="code" href="classmbl__table.html#a3653e3c1a0c90dd32a5c1ae8cc432434">00199</a>   vcl_vector&lt;vcl_vector&lt;double&gt; &gt; <a class="code" href="classmbl__table.html#a3653e3c1a0c90dd32a5c1ae8cc432434" title="The table data, arranged as column vectors of double data.">columns_</a>;
<a name="l00200"></a>00200 
<a name="l00201"></a>00201 };
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 <span class="preprocessor">#endif // mbl_table_h</span>
</pre></div></div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 1 2013 17:33:13 for contrib/mul/mbl by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
